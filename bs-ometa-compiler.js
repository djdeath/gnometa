// This file was generated using Gnometa
// https://github.com/djdeath/gnometa
let BSSemActionParser=objectThatDelegatesTo(BSJSParser,{
"jsOmetaKeyword":function(){var $elf=this,$vars={},$r0=this._startStructure(0);$vars.k=this._getStructureValue(this.anything());this._appendStructure($r0,this._apply("spaces"));this._appendStructure($r0,this.exactly("@"));$vars.n=this._appendStructure($r0,this._apply("iName"));this._pred(($vars.k == $vars.n));$r0.value=$vars.k;return this._endStructure($r0);},
"primExprHd":function(){var $elf=this,$vars={},$r0=this._startStructure(11);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(13);this._appendStructure($r1,this._applyWithArgs("jsOmetaKeyword","location"));$r1.value=["Location"];return this._endStructure($r1);},function(){return this._forwardStructure(BSJSParser._superApplyWithArgs(this,"primExprHd"),17);}));return this._endStructure($r0);},
"curlySemAction":function(){var $elf=this,$vars={},$r0=this._startStructure(19);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(21);this._appendStructure($r1,this._applyWithArgs("token","{"));$vars.r=this._appendStructure($r1,this._apply("expr"));this._appendStructure($r1,this._apply("sc"));this._appendStructure($r1,this._applyWithArgs("token","}"));$r1.value=$vars.r;return this._endStructure($r1);},function(){var $r1=this._startStructure(32);this._appendStructure($r1,this._applyWithArgs("token","{"));$vars.ss=this._appendStructure($r1,this._many(function(){var $r2=this._startStructure(39);$vars.s=this._appendStructure($r2,this._apply("srcElem"));this._appendStructure($r2,this._lookahead(function(){return this._forwardStructure(this._apply("srcElem"),46);}));$r2.value=$vars.s;return this._endStructure($r2);}));$vars.s=this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(51);$vars.r=this._appendStructure($r2,this._apply("expr"));this._appendStructure($r2,this._apply("sc"));$r2.value=["return",$vars.r];return this._endStructure($r2);},function(){return this._forwardStructure(this._apply("srcElem"),58);}));$vars.ss.push($vars.s);this._appendStructure($r1,this._applyWithArgs("token","}"));$r1.value=["send","call",["func",[],["begin"].concat($vars.ss)],["this"]];return this._endStructure($r1);}));return this._endStructure($r0);},
"semAction":function(){var $elf=this,$vars={},$r0=this._startStructure(62);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("curlySemAction"),64);},function(){var $r1=this._startStructure(66);$vars.r=this._appendStructure($r1,this._apply("primExpr"));this._appendStructure($r1,this._apply("spaces"));$r1.value=$vars.r;return this._endStructure($r1);}));return this._endStructure($r0);}});let BSOMetaParser=objectThatDelegatesTo(BaseStrParser,{
"enum":function(){var $elf=this,$vars={},$r0=this._startStructure(73);$vars.r=this._getStructureValue(this.anything());$vars.d=this._getStructureValue(this.anything());$vars.v=this._appendStructure($r0,this._applyWithArgs("listOf",$vars.r,$vars.d));this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._applyWithArgs("token",","),82);},function(){return this._forwardStructure(this._apply("empty"),84);}));$r0.value=$vars.v;return this._endStructure($r0);},
"space":function(){var $elf=this,$vars={},$r0=this._startStructure(86);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(BaseStrParser._superApplyWithArgs(this,"space"),88);},function(){return this._forwardStructure(this._applyWithArgs("fromTo","//","\n"),90);},function(){return this._forwardStructure(this._applyWithArgs("fromTo","/*","*/"),92);}));return this._endStructure($r0);},
"nameFirst":function(){var $elf=this,$vars={},$r0=this._startStructure(94);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this.exactly("_"),96);},function(){return this._forwardStructure(this.exactly("$"),98);},function(){return this._forwardStructure(this._apply("letter"),100);}));return this._endStructure($r0);},
"nameRest":function(){var $elf=this,$vars={},$r0=this._startStructure(102);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("nameFirst"),104);},function(){return this._forwardStructure(this._apply("digit"),106);}));return this._endStructure($r0);},
"tsName":function(){var $elf=this,$vars={},$r0=this._startStructure(108);$r0.value=this._appendStructure($r0,this._consumedBy(function(){var $r1=this._startStructure(110);this._appendStructure($r1,this._apply("nameFirst"));$r1.value=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("nameRest"),117);}));return this._endStructure($r1);}));return this._endStructure($r0);},
"name":function(){var $elf=this,$vars={},$r0=this._startStructure(119);this._appendStructure($r0,this._apply("spaces"));$r0.value=this._appendStructure($r0,this._apply("tsName"));return this._endStructure($r0);},
"hexDigit":function(){var $elf=this,$vars={},$r0=this._startStructure(126);$vars.x=this._appendStructure($r0,this._apply("char"));$vars.v=this["hexDigits"].indexOf($vars.x.toLowerCase());this._pred(($vars.v >= (0)));$r0.value=$vars.v;return this._endStructure($r0);},
"eChar":function(){var $elf=this,$vars={},$r0=this._startStructure(133);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(135);$vars.s=this._appendStructure($r1,this._consumedBy(function(){var $r2=this._startStructure(140);this._appendStructure($r2,this.exactly("\\"));$r2.value=this._appendStructure($r2,this._or(function(){var $r3=this._startStructure(147);this._appendStructure($r3,this.exactly("u"));this._appendStructure($r3,this._apply("hexDigit"));this._appendStructure($r3,this._apply("hexDigit"));this._appendStructure($r3,this._apply("hexDigit"));$r3.value=this._appendStructure($r3,this._apply("hexDigit"));return this._endStructure($r3);},function(){var $r3=this._startStructure(160);this._appendStructure($r3,this.exactly("x"));this._appendStructure($r3,this._apply("hexDigit"));$r3.value=this._appendStructure($r3,this._apply("hexDigit"));return this._endStructure($r3);},function(){return this._forwardStructure(this._apply("char"),169);}));return this._endStructure($r2);}));$r1.value=unescape($vars.s);return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("char"),171);}));return this._endStructure($r0);},
"tsString":function(){var $elf=this,$vars={},$r0=this._startStructure(173);this._appendStructure($r0,this.exactly("\'"));$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(180);this._appendStructure($r1,this._not(function(){return this._forwardStructure(this.exactly("\'"),184);}));$r1.value=this._appendStructure($r1,this._apply("eChar"));return this._endStructure($r1);}));this._appendStructure($r0,this.exactly("\'"));$r0.value=$vars.xs.join("");return this._endStructure($r0);},
"characters":function(){var $elf=this,$vars={},$r0=this._startStructure(191);this._appendStructure($r0,this.exactly("`"));this._appendStructure($r0,this.exactly("`"));$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(200);this._appendStructure($r1,this._not(function(){var $r2=this._startStructure(204);this._appendStructure($r2,this.exactly("\'"));$r2.value=this._appendStructure($r2,this.exactly("\'"));return this._endStructure($r2);}));$r1.value=this._appendStructure($r1,this._apply("eChar"));return this._endStructure($r1);}));this._appendStructure($r0,this.exactly("\'"));this._appendStructure($r0,this.exactly("\'"));$r0.value=[this._extractLocation($r0),"App","seq",jsValue("string",$vars.xs.join(""))];return this._endStructure($r0);},
"sCharacters":function(){var $elf=this,$vars={},$r0=this._startStructure(218);this._appendStructure($r0,this.exactly("\""));$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(225);this._appendStructure($r1,this._not(function(){return this._forwardStructure(this.exactly("\""),229);}));$r1.value=this._appendStructure($r1,this._apply("eChar"));return this._endStructure($r1);}));this._appendStructure($r0,this.exactly("\""));$r0.value=[this._extractLocation($r0),"App","token",jsValue("string",$vars.xs.join(""))];return this._endStructure($r0);},
"string":function(){var $elf=this,$vars={},$r0=this._startStructure(236);$vars.xs=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(241);this._appendStructure($r1,this._or(function(){return this._forwardStructure(this.exactly("#"),245);},function(){return this._forwardStructure(this.exactly("`"),247);}));$r1.value=this._appendStructure($r1,this._apply("tsName"));return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("tsString"),252);}));$r0.value=[this._extractLocation($r0),"App","exactly",jsValue("string",$vars.xs)];return this._endStructure($r0);},
"number":function(){var $elf=this,$vars={},$r0=this._startStructure(254);$vars.n=this._appendStructure($r0,this._consumedBy(function(){var $r1=this._startStructure(259);this._appendStructure($r1,this._opt(function(){return this._forwardStructure(this.exactly("-"),263);}));$r1.value=this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("digit"),268);}));return this._endStructure($r1);}));$r0.value=[this._extractLocation($r0),"App","exactly",jsValue("number",$vars.n)];return this._endStructure($r0);},
"keyword":function(){var $elf=this,$vars={},$r0=this._startStructure(270);$vars.xs=this._getStructureValue(this.anything());this._appendStructure($r0,this._applyWithArgs("token",$vars.xs));this._appendStructure($r0,this._not(function(){return this._forwardStructure(this._apply("letterOrDigit"),277);}));$r0.value=$vars.xs;return this._endStructure($r0);},
"args":function(){var $elf=this,$vars={},$r0=this._startStructure(279);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(281);this._appendStructure($r1,this.exactly("("));$vars.xs=this._appendStructure($r1,this._applyWithArgs("listOf","hostExpr",","));this._appendStructure($r1,this._applyWithArgs("token",")"));$r1.value=$vars.xs;return this._endStructure($r1);},function(){var $r1=this._startStructure(290);this._appendStructure($r1,this._apply("empty"));$r1.value=[];return this._endStructure($r1);}));return this._endStructure($r0);},
"application":function(){var $elf=this,$vars={},$r0=this._startStructure(294);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(296);this._appendStructure($r1,this._applyWithArgs("token","^"));$vars.rule=this._appendStructure($r1,this._apply("name"));$vars.as=this._appendStructure($r1,this._apply("args"));$r1.value=[this._extractLocation($r1),"App","super",jsValue("string",$vars.rule)].concat($vars.as);return this._endStructure($r1);},function(){var $r1=this._startStructure(306);$vars.grm=this._appendStructure($r1,this._apply("name"));this._appendStructure($r1,this._applyWithArgs("token","."));$vars.rule=this._appendStructure($r1,this._apply("name"));$vars.as=this._appendStructure($r1,this._apply("args"));$r1.value=[this._extractLocation($r1),"App","foreign",jsCode(this["locals"],["get",$vars.grm]),jsValue("string",$vars.rule)].concat($vars.as);return this._endStructure($r1);},function(){var $r1=this._startStructure(319);$vars.rule=this._appendStructure($r1,this._apply("name"));$vars.as=this._appendStructure($r1,this._apply("args"));$r1.value=[this._extractLocation($r1),"App",$vars.rule].concat($vars.as);return this._endStructure($r1);}));return this._endStructure($r0);},
"hostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(327);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionParser,"expr"));$r0.value=jsCode(this["locals"],$vars.r);return this._endStructure($r0);},
"curlyHostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(332);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionParser,"curlySemAction"));$r0.value=jsCode(this["locals"],$vars.r);return this._endStructure($r0);},
"primHostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(337);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionParser,"semAction"));$r0.value=jsCode(this["locals"],$vars.r);return this._endStructure($r0);},
"atomicHostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(342);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("curlyHostExpr"),344);},function(){return this._forwardStructure(this._apply("primHostExpr"),346);}));return this._endStructure($r0);},
"semAction":function(){var $elf=this,$vars={},$r0=this._startStructure(348);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(350);$r1.value=($vars.x=this._appendStructure($r1,this._apply("curlyHostExpr")));return this._endStructure($r1);},function(){var $r1=this._startStructure(356);this._appendStructure($r1,this._applyWithArgs("token","!"));$r1.value=($vars.x=this._appendStructure($r1,this._apply("atomicHostExpr")));return this._endStructure($r1);}));return this._endStructure($r0);},
"arrSemAction":function(){var $elf=this,$vars={},$r0=this._startStructure(365);this._appendStructure($r0,this._applyWithArgs("token","->"));$r0.value=($vars.x=this._appendStructure($r0,this._apply("atomicHostExpr")));return this._endStructure($r0);},
"semPred":function(){var $elf=this,$vars={},$r0=this._startStructure(374);this._appendStructure($r0,this._applyWithArgs("token","?"));$vars.x=this._appendStructure($r0,this._apply("atomicHostExpr"));$r0.value=[this._extractLocation($r0),"Pred",$vars.x];return this._endStructure($r0);},
"expr":function(){var $elf=this,$vars={},$r0=this._startStructure(381);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(383);$vars.x=this._appendStructure($r1,this._applyWithArgs("expr5",true));$vars.xs=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(391);this._appendStructure($r2,this._applyWithArgs("token","|"));$r2.value=this._appendStructure($r2,this._applyWithArgs("expr5",true));return this._endStructure($r2);}));$r1.value=[this._extractLocation($r1),"Or",$vars.x].concat($vars.xs);return this._endStructure($r1);},function(){var $r1=this._startStructure(398);$vars.x=this._appendStructure($r1,this._applyWithArgs("expr5",true));$vars.xs=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(406);this._appendStructure($r2,this._applyWithArgs("token","||"));$r2.value=this._appendStructure($r2,this._applyWithArgs("expr5",true));return this._endStructure($r2);}));$r1.value=[this._extractLocation($r1),"XOr",$vars.x].concat($vars.xs);return this._endStructure($r1);},function(){return this._forwardStructure(this._applyWithArgs("expr5",false),413);}));return this._endStructure($r0);},
"expr5":function(){var $elf=this,$vars={},$r0=this._startStructure(415);$vars.ne=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(421);$vars.x=this._appendStructure($r1,this._apply("interleavePart"));$vars.xs=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(429);this._appendStructure($r2,this._applyWithArgs("token","&&"));$r2.value=this._appendStructure($r2,this._apply("interleavePart"));return this._endStructure($r2);}));$r1.value=[this._extractLocation($r1),"Interleave",$vars.x].concat($vars.xs);return this._endStructure($r1);},function(){return this._forwardStructure(this._applyWithArgs("expr4",$vars.ne),436);}));return this._endStructure($r0);},
"interleavePart":function(){var $elf=this,$vars={},$r0=this._startStructure(438);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(440);this._appendStructure($r1,this._applyWithArgs("token","("));$vars.part=this._appendStructure($r1,this._applyWithArgs("expr4",true));this._appendStructure($r1,this._applyWithArgs("token",")"));$r1.value=["1",$vars.part];return this._endStructure($r1);},function(){var $r1=this._startStructure(449);$vars.part=this._appendStructure($r1,this._applyWithArgs("expr4",true));$r1.value=this._appendStructure($r1,this._applyWithArgs("modedIPart",$vars.part));return this._endStructure($r1);}));return this._endStructure($r0);},
"modedIPart":function(){var $elf=this,$vars={},$r0=this._startStructure(457);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(459);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(463);this._appendStructure($r2,this.exactly("And"));$r2.value=this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(470);this._appendStructure($r3,this.exactly("Many"));$r3.value=($vars.part=this._getStructureValue(this.anything()));return this._endStructure($r3);}));return this._endStructure($r2);}));$r1.value=["*",$vars.part];return this._endStructure($r1);},function(){var $r1=this._startStructure(477);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(481);this._appendStructure($r2,this.exactly("And"));$r2.value=this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(488);this._appendStructure($r3,this.exactly("Many1"));$r3.value=($vars.part=this._getStructureValue(this.anything()));return this._endStructure($r3);}));return this._endStructure($r2);}));$r1.value=["+",$vars.part];return this._endStructure($r1);},function(){var $r1=this._startStructure(495);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(499);this._appendStructure($r2,this.exactly("And"));$r2.value=this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(506);this._appendStructure($r3,this.exactly("Opt"));$r3.value=($vars.part=this._getStructureValue(this.anything()));return this._endStructure($r3);}));return this._endStructure($r2);}));$r1.value=["?",$vars.part];return this._endStructure($r1);},function(){var $r1=this._startStructure(513);$vars.part=this._getStructureValue(this.anything());$r1.value=["1",$vars.part];return this._endStructure($r1);}));return this._endStructure($r0);},
"expr4":function(){var $elf=this,$vars={},$r0=this._startStructure(516);$vars.ne=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(522);$vars.xs=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("expr3"),527);}));$vars.act=this._appendStructure($r1,this._apply("arrSemAction"));$r1.value=[this._extractLocation($r1),"And"].concat($vars.xs).concat([$vars.act]);return this._endStructure($r1);},function(){var $r1=this._startStructure(532);this._pred($vars.ne);$vars.xs=this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("expr3"),538);}));$r1.value=[this._extractLocation($r1),"And"].concat($vars.xs);return this._endStructure($r1);},function(){var $r1=this._startStructure(540);this._pred(($vars.ne == false));$vars.xs=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("expr3"),546);}));$r1.value=[this._extractLocation($r1),"And"].concat($vars.xs);return this._endStructure($r1);}));return this._endStructure($r0);},
"optIter":function(){var $elf=this,$vars={},$r0=this._startStructure(548);$vars.x=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(554);this._appendStructure($r1,this.exactly("*"));$r1.value=[this._extractLocation($r1),"Many",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(558);this._appendStructure($r1,this.exactly("+"));$r1.value=[this._extractLocation($r1),"Many1",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(562);this._appendStructure($r1,this.exactly("?"));$r1.value=[this._extractLocation($r1),"Opt",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(566);this._appendStructure($r1,this._apply("empty"));$r1.value=$vars.x;return this._endStructure($r1);}));return this._endStructure($r0);},
"optBind":function(){var $elf=this,$vars={},$r0=this._startStructure(570);$vars.x=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(576);this._appendStructure($r1,this.exactly(":"));$vars.n=this._appendStructure($r1,this._apply("name"));$r1.value=(function (){(this["locals"][$vars.n]=true);return [this._extractLocation($r1),"Set",$vars.n,$vars.x];}).call(this);return this._endStructure($r1);},function(){var $r1=this._startStructure(583);this._appendStructure($r1,this._apply("empty"));$r1.value=$vars.x;return this._endStructure($r1);}));return this._endStructure($r0);},
"expr3":function(){var $elf=this,$vars={},$r0=this._startStructure(587);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(589);this._appendStructure($r1,this._applyWithArgs("token",":"));$vars.n=this._appendStructure($r1,this._apply("name"));$r1.value=(function (){(this["locals"][$vars.n]=true);return [this._extractLocation($r1),"Set",$vars.n,[null,"PopArg"]];}).call(this);return this._endStructure($r1);},function(){var $r1=this._startStructure(596);$vars.e=this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(601);$vars.x=this._appendStructure($r2,this._apply("expr2"));$r2.value=this._appendStructure($r2,this._applyWithArgs("optIter",$vars.x));return this._endStructure($r2);},function(){return this._forwardStructure(this._apply("semAction"),609);}));$r1.value=this._appendStructure($r1,this._applyWithArgs("optBind",$vars.e));return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("semPred"),614);}));return this._endStructure($r0);},
"expr2":function(){var $elf=this,$vars={},$r0=this._startStructure(616);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(618);this._appendStructure($r1,this._applyWithArgs("token","~"));$vars.x=this._appendStructure($r1,this._apply("expr2"));$r1.value=[this._extractLocation($r1),"Not",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(625);this._appendStructure($r1,this._applyWithArgs("token","&"));$vars.x=this._appendStructure($r1,this._apply("expr1"));$r1.value=[this._extractLocation($r1),"Lookahead",$vars.x];return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("expr1"),632);}));return this._endStructure($r0);},
"expr1":function(){var $elf=this,$vars={},$r0=this._startStructure(634);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("application"),636);},function(){var $r1=this._startStructure(638);$vars.x=this._appendStructure($r1,this._or(function(){return this._forwardStructure(this._applyWithArgs("keyword","undefined"),643);},function(){return this._forwardStructure(this._applyWithArgs("keyword","nil"),645);},function(){return this._forwardStructure(this._applyWithArgs("keyword","true"),647);},function(){return this._forwardStructure(this._applyWithArgs("keyword","false"),649);}));$r1.value=[this._extractLocation($r1),"App","exactly",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(651);this._appendStructure($r1,this._apply("spaces"));$r1.value=this._appendStructure($r1,this._or(function(){return this._forwardStructure(this._apply("characters"),658);},function(){return this._forwardStructure(this._apply("sCharacters"),660);},function(){return this._forwardStructure(this._apply("string"),662);},function(){return this._forwardStructure(this._apply("number"),664);}));return this._endStructure($r1);},function(){var $r1=this._startStructure(666);this._appendStructure($r1,this._applyWithArgs("token","["));$vars.x=this._appendStructure($r1,this._apply("expr"));this._appendStructure($r1,this._applyWithArgs("token","]"));$r1.value=[this._extractLocation($r1),"Form",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(675);this._appendStructure($r1,this._applyWithArgs("token","<"));$vars.x=this._appendStructure($r1,this._apply("expr"));this._appendStructure($r1,this._applyWithArgs("token",">"));$r1.value=[this._extractLocation($r1),"ConsBy",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(684);this._appendStructure($r1,this._applyWithArgs("token","@<"));$vars.x=this._appendStructure($r1,this._apply("expr"));this._appendStructure($r1,this._applyWithArgs("token",">"));$r1.value=[this._extractLocation($r1),"IdxConsBy",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(693);this._appendStructure($r1,this._applyWithArgs("token","("));$vars.x=this._appendStructure($r1,this._apply("expr"));this._appendStructure($r1,this._applyWithArgs("token",")"));$r1.value=$vars.x;return this._endStructure($r1);}));return this._endStructure($r0);},
"ruleName":function(){var $elf=this,$vars={},$r0=this._startStructure(702);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("name"),704);},function(){var $r1=this._startStructure(706);this._appendStructure($r1,this._apply("spaces"));$r1.value=this._appendStructure($r1,this._apply("tsString"));return this._endStructure($r1);}));return this._endStructure($r0);},
"rule":function(){var $elf=this,$vars={},$r0=this._startStructure(713);this._appendStructure($r0,this._lookahead(function(){var $r1=this._startStructure(717);$r1.value=($vars.n=this._appendStructure($r1,this._apply("ruleName")));return this._endStructure($r1);}));(this["locals"]=({}));$vars.x=this._appendStructure($r0,this._applyWithArgs("rulePart",$vars.n));$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(729);this._appendStructure($r1,this._applyWithArgs("token",","));$r1.value=this._appendStructure($r1,this._applyWithArgs("rulePart",$vars.n));return this._endStructure($r1);}));$r0.value=[this._extractLocation($r0),"Rule",$vars.n,[this._extractLocation($r0),"Or",$vars.x].concat($vars.xs)];return this._endStructure($r0);},
"rulePart":function(){var $elf=this,$vars={},$r0=this._startStructure(736);$vars.rn=this._getStructureValue(this.anything());$vars.n=this._appendStructure($r0,this._apply("ruleName"));this._pred(($vars.n == $vars.rn));$vars.b1=this._appendStructure($r0,this._applyWithArgs("expr4",false));$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(749);this._appendStructure($r1,this._applyWithArgs("token","="));$vars.b2=this._appendStructure($r1,this._apply("expr"));$r1.value=[this._extractLocation($r1),"And",$vars.b1,$vars.b2];return this._endStructure($r1);},function(){var $r1=this._startStructure(756);this._appendStructure($r1,this._apply("empty"));$r1.value=$vars.b1;return this._endStructure($r1);}));return this._endStructure($r0);},
"grammar":function(){var $elf=this,$vars={},$r0=this._startStructure(760);this._appendStructure($r0,this._applyWithArgs("keyword","ometa"));$vars.sn=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(767);this._appendStructure($r1,this._applyWithArgs("token","("));$vars.sni=this._appendStructure($r1,this._apply("name"));this._appendStructure($r1,this._applyWithArgs("token",")"));$r1.value=$vars.sni;return this._endStructure($r1);},function(){var $r1=this._startStructure(776);this._appendStructure($r1,this._apply("empty"));$r1.value="OMeta";return this._endStructure($r1);}));this._appendStructure($r0,this._applyWithArgs("token","{"));$vars.rs=this._appendStructure($r0,this._applyWithArgs("enum","rule",","));this._appendStructure($r0,this._applyWithArgs("token","}"));$r0.value=this._appendStructure($r0,this._applyWithArgs("foreign",BSOMetaOptimizer,"optimizeGrammar",["Grammar",$vars.sn].concat($vars.rs)));return this._endStructure($r0);}});(BSOMetaParser["hexDigits"]="0123456789abcdef");let BSSemActionTranslator=objectThatDelegatesTo(BSJSTranslator,{
"Location":function(){var $elf=this,$vars={},$r0=this._startStructure(790);$r0.value=["this._extractLocation($r",this["_storeVal"],")"].join("");return this._endStructure($r0);},
"get":function(){var $elf=this,$vars={},$r0=this._startStructure(793);$vars.n=this._getStructureValue(this.anything());$r0.value=this._renameVariable($vars.n);return this._endStructure($r0);},
"name":function(){var $elf=this,$vars={},$r0=this._startStructure(796);$vars.n=this._getStructureValue(this.anything());$r0.value=this._renameVariable($vars.n);return this._endStructure($r0);},
"jstrans":function(){var $elf=this,$vars={},$r0=this._startStructure(799);$vars.storeVal=this._getStructureValue(this.anything());$vars.toRename=this._getStructureValue(this.anything());(function (){(this["_storeVal"]=$vars.storeVal);return (this["_toRename"]=$vars.toRename);}).call(this);$r0.value=this._appendStructure($r0,this._apply("trans"));return this._endStructure($r0);}});(BSSemActionTranslator["_renameVariable"]=(function (name){if(((name != "$elf") && this["_toRename"][name])){return ("$vars." + name);}else{undefined;}return name;}));let BSOMetaTranslator=objectThatDelegatesTo(OMeta,{
"App":function(){var $elf=this,$vars={},$r0=this._startStructure(806);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(808);this._appendStructure($r1,this.exactly("super"));$vars.args=this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("transFn"),815);}));$r1.value=[this["sName"],"._superApplyWithArgs(this,",$vars.args.join(","),")"].join("");return this._endStructure($r1);},function(){var $r1=this._startStructure(817);$vars.rule=this._getStructureValue(this.anything());$vars.args=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("transFn"),823);}));$r1.value=this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(828);this._pred(this._optimizedCall($vars.rule,$vars.args));$r2.value=["this.",this["_callables"][$vars.rule]["name"],"(",$vars.args.join(","),")"].join("");return this._endStructure($r2);},function(){var $r2=this._startStructure(831);this._pred(($vars.args["length"] < (1)));$r2.value=["this._apply(\"",$vars.rule,"\")"].join("");return this._endStructure($r2);},function(){var $r2=this._startStructure(834);$r2.value=["this._applyWithArgs(\"",$vars.rule,"\",",$vars.args.join(","),")"].join("");return this._endStructure($r2);}));return this._endStructure($r1);}));return this._endStructure($r0);},
"Pred":function(){var $elf=this,$vars={},$r0=this._startStructure(837);$vars.expr=this._appendStructure($r0,this._apply("transFn"));$r0.value=["this._pred(",$vars.expr,")"].join("");return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(842);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("transFn"),847);}));$r0.value=["this._or(",$vars.xs.join(","),")"].join("");return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(849);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("transFn"),854);}));$vars.xs.unshift(this["rName"].toProgramString());$r0.value=["this._xor(",$vars.xs.join(","),")"].join("");return this._endStructure($r0);},
"And":function(){var $elf=this,$vars={},$r0=this._startStructure(856);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(858);$vars.xs=this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("transFn"),863);}));$r1.value=$vars.xs.join(";");return this._endStructure($r1);},function(){var $r1=this._startStructure(865);$r1.value="undefined";return this._endStructure($r1);}));return this._endStructure($r0);},
"Opt":function(){var $elf=this,$vars={},$r0=this._startStructure(868);$vars.x=this._appendStructure($r0,this._apply("transFn"));$r0.value=["this._opt(",$vars.x,")"].join("");return this._endStructure($r0);},
"Many":function(){var $elf=this,$vars={},$r0=this._startStructure(873);$vars.x=this._appendStructure($r0,this._apply("transFn"));$r0.value=["this._many(",$vars.x,")"].join("");return this._endStructure($r0);},
"Many1":function(){var $elf=this,$vars={},$r0=this._startStructure(878);$vars.x=this._appendStructure($r0,this._apply("transFn"));$r0.value=["this._many1(",$vars.x,")"].join("");return this._endStructure($r0);},
"Set":function(){var $elf=this,$vars={},$r0=this._startStructure(883);$vars.n=this._getStructureValue(this.anything());$vars.v=this._appendStructure($r0,this._apply("transFn"));$r0.value=["$vars.",$vars.n,"=",$vars.v].join("");return this._endStructure($r0);},
"Not":function(){var $elf=this,$vars={},$r0=this._startStructure(889);$vars.x=this._appendStructure($r0,this._apply("transFn"));$r0.value=["this._not(",$vars.x,")"].join("");return this._endStructure($r0);},
"Lookahead":function(){var $elf=this,$vars={},$r0=this._startStructure(894);$vars.x=this._appendStructure($r0,this._apply("transFn"));$r0.value=["this._lookahead(",$vars.x,")"].join("");return this._endStructure($r0);},
"Form":function(){var $elf=this,$vars={},$r0=this._startStructure(899);$vars.x=this._appendStructure($r0,this._apply("transFn"));$r0.value=["this._form(",$vars.x,")"].join("");return this._endStructure($r0);},
"ConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(904);$vars.x=this._appendStructure($r0,this._apply("transFn"));$r0.value=["this._consumedBy(",$vars.x,")"].join("");return this._endStructure($r0);},
"IdxConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(909);$vars.x=this._appendStructure($r0,this._apply("transFn"));$r0.value=["this._idxConsumedBy(",$vars.x,")"].join("");return this._endStructure($r0);},
"JumpTable":function(){var $elf=this,$vars={},$r0=this._startStructure(914);this["_storeVar"]++;$vars.cases=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("jtCase"),919);}));this["_storeVar"]--;$r0.value=this.jumpTableCode($vars.cases);return this._endStructure($r0);},
"Interleave":function(){var $elf=this,$vars={},$r0=this._startStructure(921);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("intPart"),926);}));$r0.value=["this._interleave(",$vars.xs.join(","),")"].join("");return this._endStructure($r0);},
"Function":function(){var $elf=this,$vars={},$r0=this._startStructure(928);this["_storeVar"]++;$vars.x=this._appendStructure($r0,this._apply("transFn"));this["_storeVar"]--;$r0.value=["function(){",$vars.x,";}"].join("");return this._endStructure($r0);},
"FunctionStructure":function(){var $elf=this,$vars={},$r0=this._startStructure(933);this["_storeVar"]++;$vars.xs=this._appendStructure($r0,this._many1(function(){return this._forwardStructure(this._apply("transFn"),938);}));this["_storeVar"]--;$r0.value=["function(){var $r",(this["_storeVar"] + (1)),"=this._startStructure(",this.getLocationId(),");",$vars.xs.join(";"),";return this._endStructure($r",(this["_storeVar"] + (1)),");}"].join("");return this._endStructure($r0);},
"ReturnStructure":function(){var $elf=this,$vars={},$r0=this._startStructure(940);$vars.x=this._appendStructure($r0,this._apply("transFn"));$r0.value=["$r",this["_storeVar"],".value=",$vars.x].join("");return this._endStructure($r0);},
"Return":function(){var $elf=this,$vars={},$r0=this._startStructure(945);$vars.x=this._appendStructure($r0,this._apply("transFn"));$r0.value=["return this._forwardStructure(",$vars.x,",",this.getLocationId(),")"].join("");return this._endStructure($r0);},
"Parenthesis":function(){var $elf=this,$vars={},$r0=this._startStructure(950);$vars.x=this._appendStructure($r0,this._apply("transFn"));$r0.value=["(",$vars.x,")"].join("");return this._endStructure($r0);},
"Store":function(){var $elf=this,$vars={},$r0=this._startStructure(955);$vars.x=this._appendStructure($r0,this._apply("transFn"));$r0.value=["this._appendStructure($r",this["_storeVar"],",",$vars.x,")"].join("");return this._endStructure($r0);},
"Js":function(){var $elf=this,$vars={},$r0=this._startStructure(960);$vars.locals=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._applyWithArgs("transJs",$vars.locals));return this._endStructure($r0);},
"PopArg":function(){var $elf=this,$vars={},$r0=this._startStructure(966);$r0.value="this._getStructureValue(this.anything())";return this._endStructure($r0);},
"Rule":function(){var $elf=this,$vars={},$r0=this._startStructure(969);$vars.name=this._getStructureValue(this.anything());(function (){(this["rName"]=$vars.name);return (this["_storeVar"]=(0));}).call(this);$vars.body=this._appendStructure($r0,this._apply("trans"));$r0.value=["\n\"",$vars.name,"\":function(){var $elf=this,","$vars={},","$r0=this._startStructure(",this.getLocationId(),");",$vars.body,";return this._endStructure($r0);}"].join("");return this._endStructure($r0);},
"Grammar":function(){var $elf=this,$vars={},$r0=this._startStructure(975);$vars.sName=this._getStructureValue(this.anything());(function (){(this["sName"]=$vars.sName);return (this["_locations"]=[]);}).call(this);$vars.rules=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("trans"),981);}));$r0.value=["objectThatDelegatesTo(",$vars.sName,",{",$vars.rules.join(","),"})"].join("");return this._endStructure($r0);},
"intPart":function(){var $elf=this,$vars={},$r0=this._startStructure(983);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(987);$vars.mode=this._getStructureValue(this.anything());$r1.value=($vars.part=this._appendStructure($r1,this._apply("transFn")));return this._endStructure($r1);}));$r0.value=(($vars.mode.toProgramString() + ",") + $vars.part);return this._endStructure($r0);},
"jtCase":function(){var $elf=this,$vars={},$r0=this._startStructure(995);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(999);$vars.x=this._getStructureValue(this.anything());$r1.value=($vars.e=this._appendStructure($r1,this._apply("trans")));return this._endStructure($r1);}));$r0.value=[$vars.x.toProgramString(),$vars.e];return this._endStructure($r0);},
"transJs":function(){var $elf=this,$vars={},$r0=this._startStructure(1007);$vars.locals=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionTranslator,"jstrans",this["_storeVar"],$vars.locals));return this._endStructure($r0);},
"trans":function(){var $elf=this,$vars={},$r0=this._startStructure(1013);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(1017);$vars.loc=this._getStructureValue(this.anything());$vars.t=this._getStructureValue(this.anything());this.pushLocation($vars.loc);$vars.ans=this._appendStructure($r1,this._apply($vars.t));$r1.value=this.popLocation();return this._endStructure($r1);}));$r0.value=$vars.ans;return this._endStructure($r0);},
"transFn":function(){var $elf=this,$vars={},$r0=this._startStructure(1024);$vars.x=this._appendStructure($r0,this._apply("trans"));$r0.value=$vars.x;return this._endStructure($r0);}});(BSOMetaTranslator["_callables"]=({"anything": ({"name": "anything","nbArgs": (0)}),"apply": ({"name": "_apply","nbArgs": (1)}),"end": ({"name": "end","nbArgs": (0)}),"exactly": ({"name": "exactly","nbArgs": (1)}),"seq": ({"name": "seq","nbArgs": (1)})}));(BSOMetaTranslator["_optimizedCall"]=(function (rule,args){let c=this["_callables"][rule];return (c && (c["nbArgs"] == args["length"]));}));(BSOMetaTranslator["jumpTableCode"]=(function (cases){var buf=new StringBuffer();buf.nextPutAll((("(function(){var $r" + (this["_storeVar"] + (1))) + "=this._startStructure(-1);"));buf.nextPutAll((("switch(this._appendStructure($r" + (this["_storeVar"] + (1))) + ",this._apply(\'anything\'))){"));for(var i=(0);(i < cases["length"]);(i+=(1))){buf.nextPutAll((((("case " + cases[i][(0)]) + ":") + cases[i][(1)]) + ";break;"));}buf.nextPutAll((("default: throw fail}return this._endStructure($r" + (this["_storeVar"] + (1))) + ");}).call(this)"));return buf.contents();}));(BSOMetaTranslator["pushLocation"]=(function (location){if((location != null)){let locationId=createSourceMapId();addToSourseMap(locationId,location["start"],location["stop"]);this["_locations"].push(locationId);}else{this["_locations"].push(this["_locations"][(this["_locations"]["length"] - (1))]);};}));(BSOMetaTranslator["popLocation"]=(function (){this["_locations"].pop();}));(BSOMetaTranslator["getLocationId"]=(function (){return this["_locations"][(this["_locations"]["length"] - (1))];}))


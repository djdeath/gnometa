// This file was generated using Gnometa
// https://github.com/djdeath/gnometa
let BSSemActionParser=objectThatDelegatesTo(BSJSParser,{
"jsOmetaKeyword":function(){var $elf=this,$vars={},$r0=this._startStructure(0);$vars.k=this._getStructureValue(this.anything());this._appendStructure($r0,this._apply("spaces"),3);this._appendStructure($r0,this.exactly("@"),5);$vars.n=this._appendStructure($r0,this._apply("iName"),8);this._pred(($vars.k == $vars.n));$r0.value=$vars.k;return this._endStructure($r0);},
"primExprHd":function(){var $elf=this,$vars={},$r0=this._startStructure(13);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(16);this._appendStructure($r1,this._applyWithArgs("jsOmetaKeyword","location"),18);$r1.value=["Location"];return this._endStructure($r1);},function(){return this._forwardStructure(BSJSParser._superApplyWithArgs(this,"primExprHd"),22);}),14);return this._endStructure($r0);},
"curlySemAction":function(){var $elf=this,$vars={},$r0=this._startStructure(24);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(27);this._appendStructure($r1,this._applyWithArgs("token","{"),29);$vars.r=this._appendStructure($r1,this._apply("expr"),32);this._appendStructure($r1,this._apply("sc"),34);this._appendStructure($r1,this._applyWithArgs("token","}"),36);$r1.value=$vars.r;return this._endStructure($r1);},function(){var $r1=this._startStructure(39);this._appendStructure($r1,this._applyWithArgs("token","{"),41);$vars.ss=this._appendStructure($r1,this._many(function(){var $r2=this._startStructure(46);$vars.s=this._appendStructure($r2,this._apply("srcElem"),49);this._appendStructure($r2,this._lookahead(function(){return this._forwardStructure(this._apply("srcElem"),53);}),51);$r2.value=$vars.s;return this._endStructure($r2);}),44);$vars.s=this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(59);$vars.r=this._appendStructure($r2,this._apply("expr"),62);this._appendStructure($r2,this._apply("sc"),64);$r2.value=["return",$vars.r];return this._endStructure($r2);},function(){return this._forwardStructure(this._apply("srcElem"),67);}),57);$vars.ss.push($vars.s);this._appendStructure($r1,this._applyWithArgs("token","}"),70);$r1.value=["send","call",["func",[],["begin"].concat($vars.ss)],["this"]];return this._endStructure($r1);}),25);return this._endStructure($r0);},
"semAction":function(){var $elf=this,$vars={},$r0=this._startStructure(73);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("curlySemAction"),76);},function(){var $r1=this._startStructure(78);$vars.r=this._appendStructure($r1,this._apply("primExpr"),81);this._appendStructure($r1,this._apply("spaces"),83);$r1.value=$vars.r;return this._endStructure($r1);}),74);return this._endStructure($r0);}});let BSOMetaParser=objectThatDelegatesTo(BaseStrParser,{
"enum":function(){var $elf=this,$vars={},$r0=this._startStructure(86);$vars.r=this._getStructureValue(this.anything());$vars.d=this._getStructureValue(this.anything());$vars.v=this._appendStructure($r0,this._applyWithArgs("listOf",$vars.r,$vars.d),91);this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._applyWithArgs("token",","),97);},function(){return this._forwardStructure(this._apply("empty"),99);}),95);$r0.value=$vars.v;return this._endStructure($r0);},
"space":function(){var $elf=this,$vars={},$r0=this._startStructure(102);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(BaseStrParser._superApplyWithArgs(this,"space"),105);},function(){return this._forwardStructure(this._applyWithArgs("fromTo","//","\n"),107);},function(){return this._forwardStructure(this._applyWithArgs("fromTo","/*","*/"),111);}),103);return this._endStructure($r0);},
"nameFirst":function(){var $elf=this,$vars={},$r0=this._startStructure(115);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this.exactly("_"),118);},function(){return this._forwardStructure(this.exactly("$"),120);},function(){return this._forwardStructure(this._apply("letter"),122);}),116);return this._endStructure($r0);},
"nameRest":function(){var $elf=this,$vars={},$r0=this._startStructure(124);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("nameFirst"),127);},function(){return this._forwardStructure(this._apply("digit"),129);}),125);return this._endStructure($r0);},
"tsName":function(){var $elf=this,$vars={},$r0=this._startStructure(131);$r0.value=this._appendStructure($r0,this._consumedBy(function(){var $r1=this._startStructure(134);this._appendStructure($r1,this._apply("nameFirst"),136);$r1.value=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("nameRest"),140);}),138);return this._endStructure($r1);}),132);return this._endStructure($r0);},
"name":function(){var $elf=this,$vars={},$r0=this._startStructure(142);this._appendStructure($r0,this._apply("spaces"),144);$r0.value=this._appendStructure($r0,this._apply("tsName"),146);return this._endStructure($r0);},
"hexDigit":function(){var $elf=this,$vars={},$r0=this._startStructure(148);$vars.x=this._appendStructure($r0,this._apply("char"),151);$vars.v=this["hexDigits"].indexOf($vars.x.toLowerCase());this._pred(($vars.v >= (0)));$r0.value=$vars.v;return this._endStructure($r0);},
"eChar":function(){var $elf=this,$vars={},$r0=this._startStructure(158);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(161);$vars.s=this._appendStructure($r1,this._consumedBy(function(){var $r2=this._startStructure(166);this._appendStructure($r2,this.exactly("\\"),168);$r2.value=this._appendStructure($r2,this._or(function(){var $r3=this._startStructure(172);this._appendStructure($r3,this.exactly("u"),174);this._appendStructure($r3,this._apply("hexDigit"),176);this._appendStructure($r3,this._apply("hexDigit"),178);this._appendStructure($r3,this._apply("hexDigit"),180);$r3.value=this._appendStructure($r3,this._apply("hexDigit"),182);return this._endStructure($r3);},function(){var $r3=this._startStructure(184);this._appendStructure($r3,this.exactly("x"),186);this._appendStructure($r3,this._apply("hexDigit"),188);$r3.value=this._appendStructure($r3,this._apply("hexDigit"),190);return this._endStructure($r3);},function(){return this._forwardStructure(this._apply("char"),192);}),170);return this._endStructure($r2);}),164);$r1.value=unescape($vars.s);return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("char"),195);}),159);return this._endStructure($r0);},
"tsString":function(){var $elf=this,$vars={},$r0=this._startStructure(197);this._appendStructure($r0,this.exactly("\'"),199);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(204);this._appendStructure($r1,this._not(function(){return this._forwardStructure(this.exactly("\'"),208);}),206);$r1.value=this._appendStructure($r1,this._apply("eChar"),210);return this._endStructure($r1);}),202);this._appendStructure($r0,this.exactly("\'"),212);$r0.value=$vars.xs.join("");return this._endStructure($r0);},
"characters":function(){var $elf=this,$vars={},$r0=this._startStructure(215);this._appendStructure($r0,this.exactly("`"),217);this._appendStructure($r0,this.exactly("`"),219);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(224);this._appendStructure($r1,this._not(function(){var $r2=this._startStructure(228);this._appendStructure($r2,this.exactly("\'"),230);$r2.value=this._appendStructure($r2,this.exactly("\'"),232);return this._endStructure($r2);}),226);$r1.value=this._appendStructure($r1,this._apply("eChar"),234);return this._endStructure($r1);}),222);this._appendStructure($r0,this.exactly("\'"),236);this._appendStructure($r0,this.exactly("\'"),238);$r0.value=[this._extractLocation($r0),"App","seq",jsValue("string",$vars.xs.join(""))];return this._endStructure($r0);},
"sCharacters":function(){var $elf=this,$vars={},$r0=this._startStructure(241);this._appendStructure($r0,this.exactly("\""),243);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(248);this._appendStructure($r1,this._not(function(){return this._forwardStructure(this.exactly("\""),252);}),250);$r1.value=this._appendStructure($r1,this._apply("eChar"),254);return this._endStructure($r1);}),246);this._appendStructure($r0,this.exactly("\""),256);$r0.value=[this._extractLocation($r0),"App","token",jsValue("string",$vars.xs.join(""))];return this._endStructure($r0);},
"string":function(){var $elf=this,$vars={},$r0=this._startStructure(259);$vars.xs=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(264);this._appendStructure($r1,this._or(function(){return this._forwardStructure(this.exactly("#"),268);},function(){return this._forwardStructure(this.exactly("`"),270);}),266);$r1.value=this._appendStructure($r1,this._apply("tsName"),272);return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("tsString"),274);}),262);$r0.value=[this._extractLocation($r0),"App","exactly",jsValue("string",$vars.xs)];return this._endStructure($r0);},
"number":function(){var $elf=this,$vars={},$r0=this._startStructure(277);$vars.n=this._appendStructure($r0,this._consumedBy(function(){var $r1=this._startStructure(282);this._appendStructure($r1,this._opt(function(){return this._forwardStructure(this.exactly("-"),286);}),284);$r1.value=this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("digit"),290);}),288);return this._endStructure($r1);}),280);$r0.value=[this._extractLocation($r0),"App","exactly",jsValue("number",$vars.n)];return this._endStructure($r0);},
"keyword":function(){var $elf=this,$vars={},$r0=this._startStructure(293);$vars.xs=this._getStructureValue(this.anything());this._appendStructure($r0,this._applyWithArgs("token",$vars.xs),296);this._appendStructure($r0,this._not(function(){return this._forwardStructure(this._apply("letterOrDigit"),301);}),299);$r0.value=$vars.xs;return this._endStructure($r0);},
"args":function(){var $elf=this,$vars={},$r0=this._startStructure(304);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(307);this._appendStructure($r1,this.exactly("("),309);$vars.xs=this._appendStructure($r1,this._applyWithArgs("listOf","hostExpr",","),312);this._appendStructure($r1,this._applyWithArgs("token",")"),316);$r1.value=$vars.xs;return this._endStructure($r1);},function(){var $r1=this._startStructure(319);this._appendStructure($r1,this._apply("empty"),321);$r1.value=[];return this._endStructure($r1);}),305);return this._endStructure($r0);},
"application":function(){var $elf=this,$vars={},$r0=this._startStructure(324);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(327);this._appendStructure($r1,this._applyWithArgs("token","^"),329);$vars.rule=this._appendStructure($r1,this._apply("name"),332);$vars.as=this._appendStructure($r1,this._apply("args"),335);$r1.value=[this._extractLocation($r1),"App","super",jsValue("string",$vars.rule)].concat($vars.as);return this._endStructure($r1);},function(){var $r1=this._startStructure(338);$vars.grm=this._appendStructure($r1,this._apply("name"),341);this._appendStructure($r1,this._applyWithArgs("token","."),343);$vars.rule=this._appendStructure($r1,this._apply("name"),346);$vars.as=this._appendStructure($r1,this._apply("args"),349);$r1.value=[this._extractLocation($r1),"App","foreign",jsCode(this._extractLocation($r1),this["locals"],["get",$vars.grm]),jsValue("string",$vars.rule)].concat($vars.as);return this._endStructure($r1);},function(){var $r1=this._startStructure(352);$vars.rule=this._appendStructure($r1,this._apply("name"),355);$vars.as=this._appendStructure($r1,this._apply("args"),358);$r1.value=[this._extractLocation($r1),"App",$vars.rule].concat($vars.as);return this._endStructure($r1);}),325);return this._endStructure($r0);},
"hostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(361);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionParser,"expr"),364);$r0.value=jsCode(this._extractLocation($r0),this["locals"],$vars.r);return this._endStructure($r0);},
"curlyHostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(368);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionParser,"curlySemAction"),371);$r0.value=jsCode(this._extractLocation($r0),this["locals"],$vars.r);return this._endStructure($r0);},
"primHostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(375);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionParser,"semAction"),378);$r0.value=jsCode(this._extractLocation($r0),this["locals"],$vars.r);return this._endStructure($r0);},
"atomicHostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(382);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("curlyHostExpr"),385);},function(){return this._forwardStructure(this._apply("primHostExpr"),387);}),383);return this._endStructure($r0);},
"semAction":function(){var $elf=this,$vars={},$r0=this._startStructure(389);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("curlyHostExpr"),392);},function(){var $r1=this._startStructure(394);this._appendStructure($r1,this._applyWithArgs("token","!"),396);$r1.value=this._appendStructure($r1,this._apply("atomicHostExpr"),398);return this._endStructure($r1);}),390);return this._endStructure($r0);},
"arrSemAction":function(){var $elf=this,$vars={},$r0=this._startStructure(400);this._appendStructure($r0,this._applyWithArgs("token","->"),402);$r0.value=this._appendStructure($r0,this._apply("atomicHostExpr"),404);return this._endStructure($r0);},
"semPred":function(){var $elf=this,$vars={},$r0=this._startStructure(406);this._appendStructure($r0,this._applyWithArgs("token","?"),408);$vars.x=this._appendStructure($r0,this._apply("atomicHostExpr"),411);$r0.value=[this._extractLocation($r0),"Pred",$vars.x];return this._endStructure($r0);},
"expr":function(){var $elf=this,$vars={},$r0=this._startStructure(414);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(417);$vars.x=this._appendStructure($r1,this._applyWithArgs("expr5",true),420);$vars.xs=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(426);this._appendStructure($r2,this._applyWithArgs("token","|"),428);$r2.value=this._appendStructure($r2,this._applyWithArgs("expr5",true),430);return this._endStructure($r2);}),424);$r1.value=[this._extractLocation($r1),"Or",$vars.x].concat($vars.xs);return this._endStructure($r1);},function(){var $r1=this._startStructure(434);$vars.x=this._appendStructure($r1,this._applyWithArgs("expr5",true),437);$vars.xs=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(443);this._appendStructure($r2,this._applyWithArgs("token","||"),445);$r2.value=this._appendStructure($r2,this._applyWithArgs("expr5",true),447);return this._endStructure($r2);}),441);$r1.value=[this._extractLocation($r1),"XOr",$vars.x].concat($vars.xs);return this._endStructure($r1);},function(){return this._forwardStructure(this._applyWithArgs("expr5",false),451);}),415);return this._endStructure($r0);},
"expr5":function(){var $elf=this,$vars={},$r0=this._startStructure(454);$vars.ne=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(459);$vars.x=this._appendStructure($r1,this._apply("interleavePart"),462);$vars.xs=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(467);this._appendStructure($r2,this._applyWithArgs("token","&&"),469);$r2.value=this._appendStructure($r2,this._apply("interleavePart"),471);return this._endStructure($r2);}),465);$r1.value=[this._extractLocation($r1),"Interleave",$vars.x].concat($vars.xs);return this._endStructure($r1);},function(){return this._forwardStructure(this._applyWithArgs("expr4",$vars.ne),474);}),457);return this._endStructure($r0);},
"interleavePart":function(){var $elf=this,$vars={},$r0=this._startStructure(477);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(480);this._appendStructure($r1,this._applyWithArgs("token","("),482);$vars.part=this._appendStructure($r1,this._applyWithArgs("expr4",true),485);this._appendStructure($r1,this._applyWithArgs("token",")"),488);$r1.value=["1",$vars.part];return this._endStructure($r1);},function(){var $r1=this._startStructure(491);$vars.part=this._appendStructure($r1,this._applyWithArgs("expr4",true),494);$r1.value=this._appendStructure($r1,this._applyWithArgs("modedIPart",$vars.part),497);return this._endStructure($r1);}),478);return this._endStructure($r0);},
"modedIPart":function(){var $elf=this,$vars={},$r0=this._startStructure(500);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(503);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(507);this._appendStructure($r2,this.exactly("And"),509);$r2.value=this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(513);this._appendStructure($r3,this.exactly("Many"),515);$r3.value=($vars.part=this._getStructureValue(this.anything()));return this._endStructure($r3);}),511);return this._endStructure($r2);}),505);$r1.value=["*",$vars.part];return this._endStructure($r1);},function(){var $r1=this._startStructure(520);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(524);this._appendStructure($r2,this.exactly("And"),526);$r2.value=this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(530);this._appendStructure($r3,this.exactly("Many1"),532);$r3.value=($vars.part=this._getStructureValue(this.anything()));return this._endStructure($r3);}),528);return this._endStructure($r2);}),522);$r1.value=["+",$vars.part];return this._endStructure($r1);},function(){var $r1=this._startStructure(537);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(541);this._appendStructure($r2,this.exactly("And"),543);$r2.value=this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(547);this._appendStructure($r3,this.exactly("Opt"),549);$r3.value=($vars.part=this._getStructureValue(this.anything()));return this._endStructure($r3);}),545);return this._endStructure($r2);}),539);$r1.value=["?",$vars.part];return this._endStructure($r1);},function(){var $r1=this._startStructure(554);$vars.part=this._getStructureValue(this.anything());$r1.value=["1",$vars.part];return this._endStructure($r1);}),501);return this._endStructure($r0);},
"expr4":function(){var $elf=this,$vars={},$r0=this._startStructure(558);$vars.ne=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(563);$vars.xs=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("expr3"),568);}),566);$vars.act=this._appendStructure($r1,this._apply("arrSemAction"),571);$r1.value=[this._extractLocation($r1),"And"].concat($vars.xs).concat([$vars.act]);return this._endStructure($r1);},function(){var $r1=this._startStructure(574);this._pred($vars.ne);$vars.xs=this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("expr3"),581);}),579);$r1.value=[this._extractLocation($r1),"And"].concat($vars.xs);return this._endStructure($r1);},function(){var $r1=this._startStructure(584);this._pred(($vars.ne == false));$vars.xs=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("expr3"),591);}),589);$r1.value=[this._extractLocation($r1),"And"].concat($vars.xs);return this._endStructure($r1);}),561);return this._endStructure($r0);},
"optIter":function(){var $elf=this,$vars={},$r0=this._startStructure(594);$vars.x=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(599);this._appendStructure($r1,this.exactly("*"),601);$r1.value=[mergeLocation(this._extractLocation($r1),$vars.x[(0)]),"Many",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(604);this._appendStructure($r1,this.exactly("+"),606);$r1.value=[mergeLocation(this._extractLocation($r1),$vars.x[(0)]),"Many1",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(609);this._appendStructure($r1,this.exactly("?"),611);$r1.value=[mergeLocation(this._extractLocation($r1),$vars.x[(0)]),"Opt",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(614);this._appendStructure($r1,this._apply("empty"),616);$r1.value=$vars.x;return this._endStructure($r1);}),597);return this._endStructure($r0);},
"optBind":function(){var $elf=this,$vars={},$r0=this._startStructure(619);$vars.x=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(624);this._appendStructure($r1,this.exactly(":"),626);$vars.n=this._appendStructure($r1,this._apply("name"),629);$r1.value=(function (){(this["locals"][$vars.n]=true);return [mergeLocation(this._extractLocation($r1),$vars.x[(0)]),"Set",$vars.n,$vars.x];}).call(this);return this._endStructure($r1);},function(){var $r1=this._startStructure(632);this._appendStructure($r1,this._apply("empty"),634);$r1.value=$vars.x;return this._endStructure($r1);}),622);return this._endStructure($r0);},
"expr3":function(){var $elf=this,$vars={},$r0=this._startStructure(637);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(640);this._appendStructure($r1,this._applyWithArgs("token",":"),642);$vars.n=this._appendStructure($r1,this._apply("name"),645);$r1.value=(function (){(this["locals"][$vars.n]=true);return [this._extractLocation($r1),"Set",$vars.n,[null,"PopArg"]];}).call(this);return this._endStructure($r1);},function(){var $r1=this._startStructure(648);$vars.e=this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(653);$vars.x=this._appendStructure($r2,this._apply("expr2"),656);$r2.value=this._appendStructure($r2,this._applyWithArgs("optIter",$vars.x),658);return this._endStructure($r2);},function(){return this._forwardStructure(this._apply("semAction"),661);}),651);$r1.value=this._appendStructure($r1,this._applyWithArgs("optBind",$vars.e),663);return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("semPred"),666);}),638);return this._endStructure($r0);},
"expr2":function(){var $elf=this,$vars={},$r0=this._startStructure(668);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(671);this._appendStructure($r1,this._applyWithArgs("token","~"),673);$vars.x=this._appendStructure($r1,this._apply("expr2"),676);$r1.value=[this._extractLocation($r1),"Not",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(679);this._appendStructure($r1,this._applyWithArgs("token","&"),681);$vars.x=this._appendStructure($r1,this._apply("expr1"),684);$r1.value=[this._extractLocation($r1),"Lookahead",$vars.x];return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("expr1"),687);}),669);return this._endStructure($r0);},
"expr1":function(){var $elf=this,$vars={},$r0=this._startStructure(689);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("application"),692);},function(){var $r1=this._startStructure(694);$vars.x=this._appendStructure($r1,this._or(function(){return this._forwardStructure(this._applyWithArgs("keyword","undefined"),699);},function(){return this._forwardStructure(this._applyWithArgs("keyword","nil"),702);},function(){return this._forwardStructure(this._applyWithArgs("keyword","true"),705);},function(){return this._forwardStructure(this._applyWithArgs("keyword","false"),708);}),697);$r1.value=[this._extractLocation($r1),"App","exactly",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(712);this._appendStructure($r1,this._apply("spaces"),714);$r1.value=this._appendStructure($r1,this._or(function(){return this._forwardStructure(this._apply("characters"),718);},function(){return this._forwardStructure(this._apply("sCharacters"),720);},function(){return this._forwardStructure(this._apply("string"),722);},function(){return this._forwardStructure(this._apply("number"),724);}),716);return this._endStructure($r1);},function(){var $r1=this._startStructure(726);this._appendStructure($r1,this._applyWithArgs("token","["),728);$vars.x=this._appendStructure($r1,this._apply("expr"),731);this._appendStructure($r1,this._applyWithArgs("token","]"),733);$r1.value=[this._extractLocation($r1),"Form",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(736);this._appendStructure($r1,this._applyWithArgs("token","<"),738);$vars.x=this._appendStructure($r1,this._apply("expr"),741);this._appendStructure($r1,this._applyWithArgs("token",">"),743);$r1.value=[this._extractLocation($r1),"ConsBy",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(746);this._appendStructure($r1,this._applyWithArgs("token","@<"),748);$vars.x=this._appendStructure($r1,this._apply("expr"),751);this._appendStructure($r1,this._applyWithArgs("token",">"),753);$r1.value=[this._extractLocation($r1),"IdxConsBy",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(756);this._appendStructure($r1,this._applyWithArgs("token","("),758);$vars.x=this._appendStructure($r1,this._apply("expr"),761);this._appendStructure($r1,this._applyWithArgs("token",")"),763);$r1.value=$vars.x;return this._endStructure($r1);}),690);return this._endStructure($r0);},
"ruleName":function(){var $elf=this,$vars={},$r0=this._startStructure(766);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("name"),769);},function(){var $r1=this._startStructure(771);this._appendStructure($r1,this._apply("spaces"),773);$r1.value=this._appendStructure($r1,this._apply("tsString"),775);return this._endStructure($r1);}),767);return this._endStructure($r0);},
"rule":function(){var $elf=this,$vars={},$r0=this._startStructure(777);this._appendStructure($r0,this._lookahead(function(){var $r1=this._startStructure(780);$r1.value=($vars.n=this._appendStructure($r1,this._apply("ruleName"),783));return this._endStructure($r1);}),779);(this["locals"]=({}));$vars.x=this._appendStructure($r0,this._applyWithArgs("rulePart",$vars.n),787);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(793);this._appendStructure($r1,this._applyWithArgs("token",","),795);$r1.value=this._appendStructure($r1,this._applyWithArgs("rulePart",$vars.n),797);return this._endStructure($r1);}),791);$r0.value=[this._extractLocation($r0),"Rule",$vars.n,[this._extractLocation($r0),"Or",$vars.x].concat($vars.xs)];return this._endStructure($r0);},
"rulePart":function(){var $elf=this,$vars={},$r0=this._startStructure(801);$vars.rn=this._getStructureValue(this.anything());$vars.n=this._appendStructure($r0,this._apply("ruleName"),805);this._pred(($vars.n == $vars.rn));$vars.b1=this._appendStructure($r0,this._applyWithArgs("expr4",false),810);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(815);this._appendStructure($r1,this._applyWithArgs("token","="),817);$vars.b2=this._appendStructure($r1,this._apply("expr"),820);$r1.value=[this._extractLocation($r1),"And",$vars.b1,$vars.b2];return this._endStructure($r1);},function(){var $r1=this._startStructure(823);this._appendStructure($r1,this._apply("empty"),825);$r1.value=$vars.b1;return this._endStructure($r1);}),813);return this._endStructure($r0);},
"grammar":function(){var $elf=this,$vars={},$r0=this._startStructure(828);this._appendStructure($r0,this._applyWithArgs("keyword","ometa"),830);$vars.sn=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(836);this._appendStructure($r1,this._applyWithArgs("token","("),838);$vars.sni=this._appendStructure($r1,this._apply("name"),841);this._appendStructure($r1,this._applyWithArgs("token",")"),843);$r1.value=$vars.sni;return this._endStructure($r1);},function(){var $r1=this._startStructure(846);this._appendStructure($r1,this._apply("empty"),848);$r1.value="OMeta";return this._endStructure($r1);}),834);this._appendStructure($r0,this._applyWithArgs("token","{"),851);$vars.rs=this._appendStructure($r0,this._applyWithArgs("enum","rule",","),854);this._appendStructure($r0,this._applyWithArgs("token","}"),858);$r0.value=this._appendStructure($r0,this._applyWithArgs("foreign",BSOMetaOptimizer,"optimizeGrammar",["Grammar",$vars.sn].concat($vars.rs)),860);return this._endStructure($r0);}});(BSOMetaParser["hexDigits"]="0123456789abcdef");let BSSemActionTranslator=objectThatDelegatesTo(BSJSTranslator,{
"Location":function(){var $elf=this,$vars={},$r0=this._startStructure(864);$r0.value=["this._extractLocation($r",this["_storeVal"],")"].join("");return this._endStructure($r0);},
"get":function(){var $elf=this,$vars={},$r0=this._startStructure(866);$vars.n=this._getStructureValue(this.anything());$r0.value=this._renameVariable($vars.n);return this._endStructure($r0);},
"name":function(){var $elf=this,$vars={},$r0=this._startStructure(870);$vars.n=this._getStructureValue(this.anything());$r0.value=this._renameVariable($vars.n);return this._endStructure($r0);},
"jstrans":function(){var $elf=this,$vars={},$r0=this._startStructure(874);$vars.storeVal=this._getStructureValue(this.anything());$vars.toRename=this._getStructureValue(this.anything());(function (){(this["_storeVal"]=$vars.storeVal);return (this["_toRename"]=$vars.toRename);}).call(this);$r0.value=this._appendStructure($r0,this._apply("trans"),879);return this._endStructure($r0);}});(BSSemActionTranslator["_renameVariable"]=(function (name){if(((name != "$elf") && this["_toRename"][name])){return ("$vars." + name);}else{undefined;}return name;}));let BSOMetaTranslator=objectThatDelegatesTo(OMeta,{
"App":function(){var $elf=this,$vars={},$r0=this._startStructure(881);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(884);this._appendStructure($r1,this.exactly("super"),886);$vars.args=this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("transFn"),891);}),889);$r1.value=[this["sName"],"._superApplyWithArgs(this,",$vars.args.join(","),")"].join("");return this._endStructure($r1);},function(){var $r1=this._startStructure(894);$vars.rule=this._getStructureValue(this.anything());$vars.args=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("transFn"),900);}),898);$r1.value=this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(904);this._pred(this._optimizedCall($vars.rule,$vars.args));$r2.value=["this.",this["_callables"][$vars.rule]["name"],"(",$vars.args.join(","),")"].join("");return this._endStructure($r2);},function(){var $r2=this._startStructure(909);this._pred(($vars.args["length"] < (1)));$r2.value=["this._apply(\"",$vars.rule,"\")"].join("");return this._endStructure($r2);},function(){var $r2=this._startStructure(903);$r2.value=["this._applyWithArgs(\"",$vars.rule,"\",",$vars.args.join(","),")"].join("");return this._endStructure($r2);}),902);return this._endStructure($r1);}),882);return this._endStructure($r0);},
"Pred":function(){var $elf=this,$vars={},$r0=this._startStructure(915);$vars.expr=this._appendStructure($r0,this._apply("transFn"),918);$r0.value=["this._pred(",$vars.expr,")"].join("");return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(921);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("transFn"),926);}),924);$r0.value=["this._or(",$vars.xs.join(","),")"].join("");return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(929);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("transFn"),934);}),932);$vars.xs.unshift(this["rName"].toProgramString());$r0.value=["this._xor(",$vars.xs.join(","),")"].join("");return this._endStructure($r0);},
"And":function(){var $elf=this,$vars={},$r0=this._startStructure(938);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(941);$vars.xs=this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("transFn"),946);}),944);$r1.value=$vars.xs.join(";");return this._endStructure($r1);},function(){var $r1=this._startStructure(940);$r1.value="undefined";return this._endStructure($r1);}),939);return this._endStructure($r0);},
"Opt":function(){var $elf=this,$vars={},$r0=this._startStructure(950);$vars.x=this._appendStructure($r0,this._apply("transFn"),953);$r0.value=["this._opt(",$vars.x,")"].join("");return this._endStructure($r0);},
"Many":function(){var $elf=this,$vars={},$r0=this._startStructure(956);$vars.x=this._appendStructure($r0,this._apply("transFn"),959);$r0.value=["this._many(",$vars.x,")"].join("");return this._endStructure($r0);},
"Many1":function(){var $elf=this,$vars={},$r0=this._startStructure(962);$vars.x=this._appendStructure($r0,this._apply("transFn"),965);$r0.value=["this._many1(",$vars.x,")"].join("");return this._endStructure($r0);},
"Set":function(){var $elf=this,$vars={},$r0=this._startStructure(968);$vars.n=this._getStructureValue(this.anything());$vars.v=this._appendStructure($r0,this._apply("transFn"),972);$r0.value=["$vars.",$vars.n,"=",$vars.v].join("");return this._endStructure($r0);},
"Not":function(){var $elf=this,$vars={},$r0=this._startStructure(975);$vars.x=this._appendStructure($r0,this._apply("transFn"),978);$r0.value=["this._not(",$vars.x,")"].join("");return this._endStructure($r0);},
"Lookahead":function(){var $elf=this,$vars={},$r0=this._startStructure(981);$vars.x=this._appendStructure($r0,this._apply("transFn"),984);$r0.value=["this._lookahead(",$vars.x,")"].join("");return this._endStructure($r0);},
"Form":function(){var $elf=this,$vars={},$r0=this._startStructure(987);$vars.x=this._appendStructure($r0,this._apply("transFn"),990);$r0.value=["this._form(",$vars.x,")"].join("");return this._endStructure($r0);},
"ConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(993);$vars.x=this._appendStructure($r0,this._apply("transFn"),996);$r0.value=["this._consumedBy(",$vars.x,")"].join("");return this._endStructure($r0);},
"IdxConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(999);$vars.x=this._appendStructure($r0,this._apply("transFn"),1002);$r0.value=["this._idxConsumedBy(",$vars.x,")"].join("");return this._endStructure($r0);},
"JumpTable":function(){var $elf=this,$vars={},$r0=this._startStructure(1005);this["_storeVar"]++;$vars.cases=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("jtCase"),1011);}),1009);this["_storeVar"]--;$r0.value=this.jumpTableCode($vars.cases);return this._endStructure($r0);},
"Interleave":function(){var $elf=this,$vars={},$r0=this._startStructure(1015);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("intPart"),1020);}),1018);$r0.value=["this._interleave(",$vars.xs.join(","),")"].join("");return this._endStructure($r0);},
"Function":function(){var $elf=this,$vars={},$r0=this._startStructure(1023);this["_storeVar"]++;$vars.x=this._appendStructure($r0,this._apply("transFn"),1027);this["_storeVar"]--;$r0.value=["function(){",$vars.x,";}"].join("");return this._endStructure($r0);},
"FunctionStructure":function(){var $elf=this,$vars={},$r0=this._startStructure(1031);this["_storeVar"]++;$vars.xs=this._appendStructure($r0,this._many1(function(){return this._forwardStructure(this._apply("transFn"),1037);}),1035);this["_storeVar"]--;$r0.value=["function(){var $r",(this["_storeVar"] + (1)),"=this._startStructure(",this.getLocationId(),");",$vars.xs.join(";"),";return this._endStructure($r",(this["_storeVar"] + (1)),");}"].join("");return this._endStructure($r0);},
"ReturnStructure":function(){var $elf=this,$vars={},$r0=this._startStructure(1041);$vars.x=this._appendStructure($r0,this._apply("transFn"),1044);$r0.value=["$r",this["_storeVar"],".value=",$vars.x].join("");return this._endStructure($r0);},
"Return":function(){var $elf=this,$vars={},$r0=this._startStructure(1047);$vars.x=this._appendStructure($r0,this._apply("transFn"),1050);$r0.value=["return this._forwardStructure(",$vars.x,",",this.getLocationId(),")"].join("");return this._endStructure($r0);},
"Parenthesis":function(){var $elf=this,$vars={},$r0=this._startStructure(1053);$vars.x=this._appendStructure($r0,this._apply("transFn"),1056);$r0.value=["(",$vars.x,")"].join("");return this._endStructure($r0);},
"Store":function(){var $elf=this,$vars={},$r0=this._startStructure(1059);$vars.x=this._appendStructure($r0,this._apply("transFn"),1062);$r0.value=["this._appendStructure($r",this["_storeVar"],",",$vars.x,",",this.getLocationId(),")"].join("");return this._endStructure($r0);},
"Js":function(){var $elf=this,$vars={},$r0=this._startStructure(1065);$vars.locals=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._applyWithArgs("transJs",$vars.locals),1068);return this._endStructure($r0);},
"PopArg":function(){var $elf=this,$vars={},$r0=this._startStructure(1071);$r0.value="this._getStructureValue(this.anything())";return this._endStructure($r0);},
"Rule":function(){var $elf=this,$vars={},$r0=this._startStructure(1073);$vars.name=this._getStructureValue(this.anything());(function (){(this["rName"]=$vars.name);return (this["_storeVar"]=(0));}).call(this);$vars.body=this._appendStructure($r0,this._apply("trans"),1078);$r0.value=["\n\"",$vars.name,"\":function(){var $elf=this,","$vars={},","$r0=this._startStructure(",this.getLocationId(),");",$vars.body,";return this._endStructure($r0);}"].join("");return this._endStructure($r0);},
"Grammar":function(){var $elf=this,$vars={},$r0=this._startStructure(1081);$vars.sName=this._getStructureValue(this.anything());(function (){(this["sName"]=$vars.sName);return (this["_locations"]=[]);}).call(this);$vars.rules=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("trans"),1088);}),1086);$r0.value=["objectThatDelegatesTo(",$vars.sName,",{",$vars.rules.join(","),"})"].join("");return this._endStructure($r0);},
"intPart":function(){var $elf=this,$vars={},$r0=this._startStructure(1091);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(1095);$vars.mode=this._getStructureValue(this.anything());$r1.value=($vars.part=this._appendStructure($r1,this._apply("transFn"),1100));return this._endStructure($r1);}),1093);$r0.value=(($vars.mode.toProgramString() + ",") + $vars.part);return this._endStructure($r0);},
"jtCase":function(){var $elf=this,$vars={},$r0=this._startStructure(1103);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(1107);$vars.x=this._getStructureValue(this.anything());$r1.value=($vars.e=this._appendStructure($r1,this._apply("trans"),1112));return this._endStructure($r1);}),1105);$r0.value=[$vars.x.toProgramString(),$vars.e];return this._endStructure($r0);},
"transJs":function(){var $elf=this,$vars={},$r0=this._startStructure(1115);$vars.locals=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionTranslator,"jstrans",this["_storeVar"],$vars.locals),1118);return this._endStructure($r0);},
"trans":function(){var $elf=this,$vars={},$r0=this._startStructure(1123);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(1127);$vars.loc=this._getStructureValue(this.anything());$vars.t=this._getStructureValue(this.anything());this.pushLocation($vars.loc);$vars.ans=this._appendStructure($r1,this._apply($vars.t),1133);$r1.value=this.popLocation();return this._endStructure($r1);}),1125);$r0.value=$vars.ans;return this._endStructure($r0);},
"transFn":function(){var $elf=this,$vars={},$r0=this._startStructure(1138);$vars.x=this._appendStructure($r0,this._apply("trans"),1141);$r0.value=$vars.x;return this._endStructure($r0);}});(BSOMetaTranslator["_callables"]=({"anything": ({"name": "anything","nbArgs": (0)}),"apply": ({"name": "_apply","nbArgs": (1)}),"end": ({"name": "end","nbArgs": (0)}),"exactly": ({"name": "exactly","nbArgs": (1)}),"seq": ({"name": "seq","nbArgs": (1)})}));(BSOMetaTranslator["_optimizedCall"]=(function (rule,args){let c=this["_callables"][rule];return (c && (c["nbArgs"] == args["length"]));}));(BSOMetaTranslator["jumpTableCode"]=(function (cases){var buf=new StringBuffer();buf.nextPutAll((("(function(){var $r" + (this["_storeVar"] + (1))) + "=this._startStructure(-1);"));buf.nextPutAll((("switch(this._appendStructure($r" + (this["_storeVar"] + (1))) + ",this._apply(\'anything\'))){"));for(var i=(0);(i < cases["length"]);(i+=(1))){buf.nextPutAll((((("case " + cases[i][(0)]) + ":") + cases[i][(1)]) + ";break;"));}buf.nextPutAll((("default: throw fail}return this._endStructure($r" + (this["_storeVar"] + (1))) + ");}).call(this)"));return buf.contents();}));(BSOMetaTranslator["pushLocation"]=(function (location){if((location != null)){let locationId=createSourceMapId();addToSourseMap(locationId,location["start"],location["stop"]);this["_locations"].push(locationId);}else{this["_locations"].push(this["_locations"][(this["_locations"]["length"] - (1))]);};}));(BSOMetaTranslator["popLocation"]=(function (){this["_locations"].pop();}));(BSOMetaTranslator["getLocationId"]=(function (){return this["_locations"][(this["_locations"]["length"] - (1))];}))


// This file was generated using Gnometa
// https://github.com/djdeath/gnometa
let BSSemActionParser=objectThatDelegatesTo(BSJSParser,{
"jsOmetaKeyword":function(){var $elf=this,$vars={},$r0=this._startStructure(1, true);$vars.k=this.anything();this._appendStructure($r0,this._apply("spaces"),4);this._appendStructure($r0,this.exactly("@"),6);$vars.n=this._appendStructure($r0,this._apply("iName"),9);$r0.value=this._pred(($vars.k.value == $vars.n.value));$r0.value=$vars.k.value;return this._endStructure($r0);},
"primExprHd":function(){var $elf=this,$vars={},$r0=this._startStructure(16, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(19);this._appendStructure($r1,this._applyWithArgs("jsOmetaKeyword","location"),21);this._appendStructure($r1,this._applyWithArgs("token","("),24);$vars.n=this._appendStructure($r1,this._apply("iName"),27);this._appendStructure($r1,this._applyWithArgs("token",")"),29);$r1.value=["Location",$vars.n.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(33);this._appendStructure($r1,this._applyWithArgs("jsOmetaKeyword","location"),35);$r1.value=["Location",null];return this._endStructure($r1);},function(){return this._forwardStructure(BSJSParser._superApplyWithArgs(this,"primExprHd"),40);}),17);return this._endStructure($r0);},
"curlySemAction":function(){var $elf=this,$vars={},$r0=this._startStructure(42, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(45);this._appendStructure($r1,this._applyWithArgs("token","{"),47);$vars.r=this._appendStructure($r1,this._apply("expr"),50);this._appendStructure($r1,this._apply("sc"),52);this._appendStructure($r1,this._applyWithArgs("token","}"),54);$r1.value=$vars.r.value;return this._endStructure($r1);},function(){var $r1=this._startStructure(58);this._appendStructure($r1,this._applyWithArgs("token","{"),60);$vars.ss=this._appendStructure($r1,this._many(function(){var $r2=this._startStructure(65);$vars.s=this._appendStructure($r2,this._apply("srcElem"),68);this._appendStructure($r2,this._lookahead(function(){return this._forwardStructure(this._apply("srcElem"),72);}),70);$r2.value=$vars.s.value;return this._endStructure($r2);}),63);$vars.s=this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(79);$vars.r=this._appendStructure($r2,this._apply("expr"),82);this._appendStructure($r2,this._apply("sc"),84);$r2.value=["return",$vars.r.value];return this._endStructure($r2);},function(){return this._forwardStructure(this._apply("srcElem"),88);}),77);$r1.value=$vars.ss.value.push($vars.s.value);this._appendStructure($r1,this._applyWithArgs("token","}"),92);$r1.value=["send","call",["func",[],["begin"].concat($vars.ss.value)],["this"]];return this._endStructure($r1);}),43);return this._endStructure($r0);},
"semAction":function(){var $elf=this,$vars={},$r0=this._startStructure(96, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("curlySemAction"),99);},function(){var $r1=this._startStructure(101);$vars.r=this._appendStructure($r1,this._apply("primExpr"),104);this._appendStructure($r1,this._apply("spaces"),106);$r1.value=$vars.r.value;return this._endStructure($r1);}),97);return this._endStructure($r0);}});let BSOMetaParser=objectThatDelegatesTo(BaseStrParser,{
"space":function(){var $elf=this,$vars={},$r0=this._startStructure(111, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure(BaseStrParser._superApplyWithArgs(this,"space"),114);},function(){return this._forwardStructure(this._applyWithArgs("fromTo","//","\n"),116);},function(){return this._forwardStructure(this._applyWithArgs("fromTo","/*","*/"),120);}),112);return this._endStructure($r0);},
"nameFirst":function(){var $elf=this,$vars={},$r0=this._startStructure(124, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure(this.exactly("_"),127);},function(){return this._forwardStructure(this.exactly("$"),129);},function(){return this._forwardStructure(this._apply("letter"),131);}),125);return this._endStructure($r0);},
"nameRest":function(){var $elf=this,$vars={},$r0=this._startStructure(133, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("nameFirst"),136);},function(){return this._forwardStructure(this._apply("digit"),138);}),134);return this._endStructure($r0);},
"tsName":function(){var $elf=this,$vars={},$r0=this._startStructure(140, true);this._appendStructure($r0,this._consumedBy(function(){var $r1=this._startStructure(143);this._appendStructure($r1,this._apply("nameFirst"),145);this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("nameRest"),149);}),147);return this._endStructure($r1);}),141);return this._endStructure($r0);},
"name":function(){var $elf=this,$vars={},$r0=this._startStructure(151, true);this._appendStructure($r0,this._apply("spaces"),153);this._appendStructure($r0,this._apply("tsName"),155);return this._endStructure($r0);},
"hexDigit":function(){var $elf=this,$vars={},$r0=this._startStructure(157, true);$vars.x=this._appendStructure($r0,this._apply("char"),160);$vars.v=this._generateStructure($r0,this["hexDigits"].indexOf($vars.x.value.toLowerCase()),163);$r0.value=this._pred(($vars.v.value >= (0)));$r0.value=$vars.v.value;return this._endStructure($r0);},
"eChar":function(){var $elf=this,$vars={},$r0=this._startStructure(170, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(173);$vars.s=this._appendStructure($r1,this._consumedBy(function(){var $r2=this._startStructure(178);this._appendStructure($r2,this.exactly("\\"),180);this._appendStructure($r2,this._or(function(){var $r3=this._startStructure(184);this._appendStructure($r3,this.exactly("u"),186);this._appendStructure($r3,this._apply("hexDigit"),188);this._appendStructure($r3,this._apply("hexDigit"),190);this._appendStructure($r3,this._apply("hexDigit"),192);this._appendStructure($r3,this._apply("hexDigit"),194);return this._endStructure($r3);},function(){var $r3=this._startStructure(196);this._appendStructure($r3,this.exactly("x"),198);this._appendStructure($r3,this._apply("hexDigit"),200);this._appendStructure($r3,this._apply("hexDigit"),202);return this._endStructure($r3);},function(){return this._forwardStructure(this._apply("char"),204);}),182);return this._endStructure($r2);}),176);$r1.value=unescape($vars.s.value);return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("char"),208);}),171);return this._endStructure($r0);},
"tsString":function(){var $elf=this,$vars={},$r0=this._startStructure(210, true);this._appendStructure($r0,this.exactly("\'"),212);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(217);this._appendStructure($r1,this._not(function(){return this._forwardStructure(this.exactly("\'"),221);}),219);this._appendStructure($r1,this._apply("eChar"),223);return this._endStructure($r1);}),215);this._appendStructure($r0,this.exactly("\'"),225);$r0.value=$vars.xs.value.join("");return this._endStructure($r0);},
"characters":function(){var $elf=this,$vars={},$r0=this._startStructure(229, true);this._appendStructure($r0,this.exactly("`"),231);this._appendStructure($r0,this.exactly("`"),233);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(238);this._appendStructure($r1,this._not(function(){var $r2=this._startStructure(242);this._appendStructure($r2,this.exactly("\'"),244);this._appendStructure($r2,this.exactly("\'"),246);return this._endStructure($r2);}),240);this._appendStructure($r1,this._apply("eChar"),248);return this._endStructure($r1);}),236);this._appendStructure($r0,this.exactly("\'"),250);this._appendStructure($r0,this.exactly("\'"),252);$r0.value=[this._extractLocation($r0),"App","seq",jsValue("string",$vars.xs.value.join(""))];return this._endStructure($r0);},
"sCharacters":function(){var $elf=this,$vars={},$r0=this._startStructure(256, true);this._appendStructure($r0,this.exactly("\""),258);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(263);this._appendStructure($r1,this._not(function(){return this._forwardStructure(this.exactly("\""),267);}),265);this._appendStructure($r1,this._apply("eChar"),269);return this._endStructure($r1);}),261);this._appendStructure($r0,this.exactly("\""),271);$r0.value=[this._extractLocation($r0),"App","token",jsValue("string",$vars.xs.value.join(""))];return this._endStructure($r0);},
"string":function(){var $elf=this,$vars={},$r0=this._startStructure(275, true);$vars.xs=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(280);this._appendStructure($r1,this._or(function(){return this._forwardStructure(this.exactly("#"),284);},function(){return this._forwardStructure(this.exactly("`"),286);}),282);this._appendStructure($r1,this._apply("tsName"),288);return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("tsString"),290);}),278);$r0.value=[this._extractLocation($r0),"App","exactly",jsValue("string",$vars.xs.value)];return this._endStructure($r0);},
"number":function(){var $elf=this,$vars={},$r0=this._startStructure(294, true);$vars.n=this._appendStructure($r0,this._consumedBy(function(){var $r1=this._startStructure(299);this._appendStructure($r1,this._opt(function(){return this._forwardStructure(this.exactly("-"),303);}),301);this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("digit"),307);}),305);return this._endStructure($r1);}),297);$r0.value=[this._extractLocation($r0),"App","exactly",jsValue("number",$vars.n.value)];return this._endStructure($r0);},
"keyword":function(){var $elf=this,$vars={},$r0=this._startStructure(311, true);$vars.xs=this.anything();this._appendStructure($r0,this._applyWithArgs("token",$vars.xs.value),314);this._appendStructure($r0,this._not(function(){return this._forwardStructure(this._apply("letterOrDigit"),319);}),317);$r0.value=$vars.xs.value;return this._endStructure($r0);},
"args":function(){var $elf=this,$vars={},$r0=this._startStructure(323, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(326);this._appendStructure($r1,this.exactly("("),328);$vars.xs=this._appendStructure($r1,this._applyWithArgs("listOf","hostExpr",","),331);this._appendStructure($r1,this._applyWithArgs("token",")"),335);$r1.value=$vars.xs.value;return this._endStructure($r1);},function(){var $r1=this._startStructure(339);this._appendStructure($r1,this._apply("empty"),341);$r1.value=[];return this._endStructure($r1);}),324);return this._endStructure($r0);},
"application":function(){var $elf=this,$vars={},$r0=this._startStructure(345, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(348);this._appendStructure($r1,this._applyWithArgs("token","^"),350);$vars.rule=this._appendStructure($r1,this._apply("name"),353);$vars.as=this._appendStructure($r1,this._apply("args"),356);$r1.value=[this._extractLocation($r1),"App","super",jsValue("string",$vars.rule.value)].concat($vars.as.value);return this._endStructure($r1);},function(){var $r1=this._startStructure(360);$vars.grm=this._appendStructure($r1,this._apply("name"),363);this._appendStructure($r1,this._applyWithArgs("token","."),365);$vars.rule=this._appendStructure($r1,this._apply("name"),368);$vars.as=this._appendStructure($r1,this._apply("args"),371);$r1.value=[this._extractLocation($r1),"App","foreign",jsCode(this._extractLocation($r1),this["locals"],["get",$vars.grm.value]),jsValue("string",$vars.rule.value)].concat($vars.as.value);return this._endStructure($r1);},function(){var $r1=this._startStructure(375);$vars.rule=this._appendStructure($r1,this._apply("name"),378);$vars.as=this._appendStructure($r1,this._apply("args"),381);$r1.value=[this._extractLocation($r1),"App",$vars.rule.value].concat($vars.as.value);return this._endStructure($r1);}),346);return this._endStructure($r0);},
"hostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(385, true);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionParser,"expr"),388);$r0.value=jsCode(this._extractLocation($r0),this["locals"],$vars.r.value);return this._endStructure($r0);},
"curlyHostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(393, true);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionParser,"curlySemAction"),396);$r0.value=jsCode(this._extractLocation($r0),this["locals"],$vars.r.value);return this._endStructure($r0);},
"primHostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(401, true);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionParser,"semAction"),404);$r0.value=jsCode(this._extractLocation($r0),this["locals"],$vars.r.value);return this._endStructure($r0);},
"atomicHostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(409, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("curlyHostExpr"),412);},function(){return this._forwardStructure(this._apply("primHostExpr"),414);}),410);return this._endStructure($r0);},
"semAction":function(){var $elf=this,$vars={},$r0=this._startStructure(416, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("curlyHostExpr"),419);},function(){var $r1=this._startStructure(421);this._appendStructure($r1,this._applyWithArgs("token","!"),423);this._appendStructure($r1,this._apply("atomicHostExpr"),425);return this._endStructure($r1);}),417);return this._endStructure($r0);},
"arrSemAction":function(){var $elf=this,$vars={},$r0=this._startStructure(427, true);this._appendStructure($r0,this._applyWithArgs("token","->"),429);this._appendStructure($r0,this._apply("atomicHostExpr"),431);return this._endStructure($r0);},
"semPred":function(){var $elf=this,$vars={},$r0=this._startStructure(433, true);this._appendStructure($r0,this._applyWithArgs("token","?"),435);$vars.x=this._appendStructure($r0,this._apply("atomicHostExpr"),438);$r0.value=[this._extractLocation($r0),"Pred",$vars.x.value];return this._endStructure($r0);},
"expr":function(){var $elf=this,$vars={},$r0=this._startStructure(442, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(445);$vars.x=this._appendStructure($r1,this._applyWithArgs("expr5",true),448);$vars.xs=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(454);this._appendStructure($r2,this._applyWithArgs("token","|"),456);this._appendStructure($r2,this._applyWithArgs("expr5",true),458);return this._endStructure($r2);}),452);$r1.value=[this._extractLocation($r1),"Or",$vars.x.value].concat($vars.xs.value);return this._endStructure($r1);},function(){var $r1=this._startStructure(463);$vars.x=this._appendStructure($r1,this._applyWithArgs("expr5",true),466);$vars.xs=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(472);this._appendStructure($r2,this._applyWithArgs("token","||"),474);this._appendStructure($r2,this._applyWithArgs("expr5",true),476);return this._endStructure($r2);}),470);$r1.value=[this._extractLocation($r1),"XOr",$vars.x.value].concat($vars.xs.value);return this._endStructure($r1);},function(){return this._forwardStructure(this._applyWithArgs("expr5",false),481);}),443);return this._endStructure($r0);},
"expr5":function(){var $elf=this,$vars={},$r0=this._startStructure(484, true);$vars.ne=this.anything();this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(489);$vars.x=this._appendStructure($r1,this._apply("interleavePart"),492);$vars.xs=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(497);this._appendStructure($r2,this._applyWithArgs("token","&&"),499);this._appendStructure($r2,this._apply("interleavePart"),501);return this._endStructure($r2);}),495);$r1.value=[this._extractLocation($r1),"Interleave",$vars.x.value].concat($vars.xs.value);return this._endStructure($r1);},function(){return this._forwardStructure(this._applyWithArgs("expr4",$vars.ne.value),505);}),487);return this._endStructure($r0);},
"interleavePart":function(){var $elf=this,$vars={},$r0=this._startStructure(508, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(511);this._appendStructure($r1,this._applyWithArgs("token","("),513);$vars.part=this._appendStructure($r1,this._applyWithArgs("expr4",true),516);this._appendStructure($r1,this._applyWithArgs("token",")"),519);$r1.value=["1",$vars.part.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(523);$vars.part=this._appendStructure($r1,this._applyWithArgs("expr4",true),526);this._appendStructure($r1,this._applyWithArgs("modedIPart",$vars.part.value),529);return this._endStructure($r1);}),509);return this._endStructure($r0);},
"modedIPart":function(){var $elf=this,$vars={},$r0=this._startStructure(532, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(535);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(539);this._appendStructure($r2,this.exactly("And"),541);this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(545);this._appendStructure($r3,this.exactly("Many"),547);$vars.part=this.anything();return this._endStructure($r3);}),543);return this._endStructure($r2);}),537);$r1.value=["*",$vars.part.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(552);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(556);this._appendStructure($r2,this.exactly("And"),558);this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(562);this._appendStructure($r3,this.exactly("Many1"),564);$vars.part=this.anything();return this._endStructure($r3);}),560);return this._endStructure($r2);}),554);$r1.value=["+",$vars.part.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(569);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(573);this._appendStructure($r2,this.exactly("And"),575);this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(579);this._appendStructure($r3,this.exactly("Opt"),581);$vars.part=this.anything();return this._endStructure($r3);}),577);return this._endStructure($r2);}),571);$r1.value=["?",$vars.part.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(586);$vars.part=this.anything();$r1.value=["1",$vars.part.value];return this._endStructure($r1);}),533);return this._endStructure($r0);},
"expr4":function(){var $elf=this,$vars={},$r0=this._startStructure(591, true);$vars.ne=this.anything();this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(596);$vars.xs=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("expr3"),601);}),599);$vars.act=this._appendStructure($r1,this._apply("arrSemAction"),604);$r1.value=[this._extractLocation($r1),"And"].concat($vars.xs.value).concat([$vars.act.value]);return this._endStructure($r1);},function(){var $r1=this._startStructure(608);$r1.value=this._pred($vars.ne.value);$vars.xs=this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("expr3"),616);}),614);$r1.value=[this._extractLocation($r1),"And"].concat($vars.xs.value);return this._endStructure($r1);},function(){var $r1=this._startStructure(620);$r1.value=this._pred(($vars.ne.value == false));$vars.xs=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("expr3"),628);}),626);$r1.value=[this._extractLocation($r1),"And"].concat($vars.xs.value);return this._endStructure($r1);}),594);return this._endStructure($r0);},
"optIter":function(){var $elf=this,$vars={},$r0=this._startStructure(632, true);$vars.x=this.anything();this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(637);this._appendStructure($r1,this.exactly("*"),639);$r1.value=[mergeLocation(this._extractLocation($r1),$vars.x.value[(0)]),"Many",$vars.x.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(643);this._appendStructure($r1,this.exactly("+"),645);$r1.value=[mergeLocation(this._extractLocation($r1),$vars.x.value[(0)]),"Many1",$vars.x.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(649);this._appendStructure($r1,this.exactly("?"),651);$r1.value=[mergeLocation(this._extractLocation($r1),$vars.x.value[(0)]),"Opt",$vars.x.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(655);this._appendStructure($r1,this._apply("empty"),657);$r1.value=$vars.x.value;return this._endStructure($r1);}),635);return this._endStructure($r0);},
"optBind":function(){var $elf=this,$vars={},$r0=this._startStructure(661, true);$vars.x=this.anything();this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(666);this._appendStructure($r1,this.exactly(":"),668);$vars.n=this._appendStructure($r1,this._apply("name"),671);$r1.value=(function (){(this["locals"][$vars.n.value]=true);return [mergeLocation(this._extractLocation($r1),$vars.x.value[(0)]),"Set",$vars.n.value,$vars.x.value];}).call(this);return this._endStructure($r1);},function(){var $r1=this._startStructure(675);this._appendStructure($r1,this._apply("empty"),677);$r1.value=$vars.x.value;return this._endStructure($r1);}),664);return this._endStructure($r0);},
"expr3":function(){var $elf=this,$vars={},$r0=this._startStructure(681, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(684);this._appendStructure($r1,this._applyWithArgs("token",":"),686);$vars.n=this._appendStructure($r1,this._apply("name"),689);$r1.value=(function (){(this["locals"][$vars.n.value]=true);return [this._extractLocation($r1),"PopArg",$vars.n.value];}).call(this);return this._endStructure($r1);},function(){var $r1=this._startStructure(693);$vars.e=this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(698);$vars.x=this._appendStructure($r2,this._apply("expr2"),701);this._appendStructure($r2,this._applyWithArgs("optIter",$vars.x.value),703);return this._endStructure($r2);},function(){return this._forwardStructure(this._apply("semAction"),706);}),696);this._appendStructure($r1,this._applyWithArgs("optBind",$vars.e.value),708);return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("semPred"),711);}),682);return this._endStructure($r0);},
"expr2":function(){var $elf=this,$vars={},$r0=this._startStructure(713, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(716);this._appendStructure($r1,this._applyWithArgs("token","~"),718);$vars.x=this._appendStructure($r1,this._apply("expr2"),721);$r1.value=[this._extractLocation($r1),"Not",$vars.x.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(725);this._appendStructure($r1,this._applyWithArgs("token","&"),727);$vars.x=this._appendStructure($r1,this._apply("expr1"),730);$r1.value=[this._extractLocation($r1),"Lookahead",$vars.x.value];return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("expr1"),734);}),714);return this._endStructure($r0);},
"expr1":function(){var $elf=this,$vars={},$r0=this._startStructure(736, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("application"),739);},function(){var $r1=this._startStructure(741);$vars.x=this._appendStructure($r1,this._or(function(){return this._forwardStructure(this._applyWithArgs("keyword","undefined"),746);},function(){return this._forwardStructure(this._applyWithArgs("keyword","nil"),749);},function(){return this._forwardStructure(this._applyWithArgs("keyword","true"),752);},function(){return this._forwardStructure(this._applyWithArgs("keyword","false"),755);}),744);$r1.value=[this._extractLocation($r1),"App","exactly",$vars.x.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(760);this._appendStructure($r1,this._apply("spaces"),762);this._appendStructure($r1,this._or(function(){return this._forwardStructure(this._apply("characters"),766);},function(){return this._forwardStructure(this._apply("sCharacters"),768);},function(){return this._forwardStructure(this._apply("string"),770);},function(){return this._forwardStructure(this._apply("number"),772);}),764);return this._endStructure($r1);},function(){var $r1=this._startStructure(774);this._appendStructure($r1,this._applyWithArgs("token","["),776);$vars.x=this._appendStructure($r1,this._apply("expr"),779);this._appendStructure($r1,this._applyWithArgs("token","]"),781);$r1.value=[this._extractLocation($r1),"Form",$vars.x.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(785);this._appendStructure($r1,this._applyWithArgs("token","<"),787);$vars.x=this._appendStructure($r1,this._apply("expr"),790);this._appendStructure($r1,this._applyWithArgs("token",">"),792);$r1.value=[this._extractLocation($r1),"ConsBy",$vars.x.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(796);this._appendStructure($r1,this._applyWithArgs("token","@<"),798);$vars.x=this._appendStructure($r1,this._apply("expr"),801);this._appendStructure($r1,this._applyWithArgs("token",">"),803);$r1.value=[this._extractLocation($r1),"IdxConsBy",$vars.x.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(807);this._appendStructure($r1,this._applyWithArgs("token","("),809);$vars.x=this._appendStructure($r1,this._apply("expr"),812);this._appendStructure($r1,this._applyWithArgs("token",")"),814);$r1.value=$vars.x.value;return this._endStructure($r1);}),737);return this._endStructure($r0);},
"ruleName":function(){var $elf=this,$vars={},$r0=this._startStructure(818, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("name"),821);},function(){var $r1=this._startStructure(823);this._appendStructure($r1,this._apply("spaces"),825);this._appendStructure($r1,this._apply("tsString"),827);return this._endStructure($r1);}),819);return this._endStructure($r0);},
"rule":function(){var $elf=this,$vars={},$r0=this._startStructure(829, true);this._appendStructure($r0,this._lookahead(function(){return this._forwardStructure($vars.n=this._appendStructure($r0,this._apply("ruleName"),835),833);}),831);$r0.value=(this["locals"]=({}));$vars.x=this._appendStructure($r0,this._applyWithArgs("rulePart",$vars.n.value),840);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(846);this._appendStructure($r1,this._applyWithArgs("token",","),848);this._appendStructure($r1,this._applyWithArgs("rulePart",$vars.n.value),850);return this._endStructure($r1);}),844);$r0.value=[this._extractLocation($r0),"Rule",$vars.n.value,[this._extractLocation($r0),"Or",$vars.x.value].concat($vars.xs.value)];return this._endStructure($r0);},
"rulePart":function(){var $elf=this,$vars={},$r0=this._startStructure(855, true);$vars.rn=this.anything();$vars.n=this._appendStructure($r0,this._apply("ruleName"),859);$r0.value=this._pred(($vars.n.value == $vars.rn.value));$vars.b1=this._appendStructure($r0,this._applyWithArgs("expr4",false),865);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(870);this._appendStructure($r1,this._applyWithArgs("token","="),872);$vars.b2=this._appendStructure($r1,this._apply("expr"),875);$r1.value=[this._extractLocation($r1),"And",$vars.b1.value,$vars.b2.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(879);this._appendStructure($r1,this._apply("empty"),881);$r1.value=$vars.b1.value;return this._endStructure($r1);}),868);return this._endStructure($r0);},
"grammar":function(){var $elf=this,$vars={},$r0=this._startStructure(885, true);this._appendStructure($r0,this._applyWithArgs("keyword","ometa"),887);$vars.sn=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(893);this._appendStructure($r1,this._applyWithArgs("token","("),895);$vars.sni=this._appendStructure($r1,this._apply("name"),898);this._appendStructure($r1,this._applyWithArgs("token",")"),900);$r1.value=$vars.sni.value;return this._endStructure($r1);},function(){var $r1=this._startStructure(904);this._appendStructure($r1,this._apply("empty"),906);$r1.value="OMeta";return this._endStructure($r1);}),891);this._appendStructure($r0,this._applyWithArgs("token","{"),910);$vars.rs=this._appendStructure($r0,this._applyWithArgs("enum","rule",","),913);this._appendStructure($r0,this._applyWithArgs("token","}"),917);$r0.value=["OMetaGrammar",$vars.sn.value,$vars.rs.value];return this._endStructure($r0);}});(BSOMetaParser["hexDigits"]="0123456789abcdef");let BSSemActionTranslator=objectThatDelegatesTo(BSJSTranslator,{
"Location":function(){var $elf=this,$vars={},$r0=this._startStructure(922, true);$vars.n=this.anything();$vars.v=this._generateStructure($r0,(($vars.n.value === null)?("$r" + this["_storeVal"]):("$vars." + $vars.n.value)),926);$r0.value=["this._extractLocation(",$vars.v.value,")"].join("");return this._endStructure($r0);},
"get":function(){var $elf=this,$vars={},$r0=this._startStructure(930, true);$vars.n=this.anything();$r0.value=this._renameVariable($vars.n.value);return this._endStructure($r0);},
"name":function(){var $elf=this,$vars={},$r0=this._startStructure(935, true);$vars.n=this.anything();$r0.value=this._renameVariable($vars.n.value);return this._endStructure($r0);},
"jstrans":function(){var $elf=this,$vars={},$r0=this._startStructure(940, true);$vars.storeVal=this.anything();$vars.toRename=this.anything();$r0.value=(function (){(this["_storeVal"]=$vars.storeVal.value);return (this["_toRename"]=$vars.toRename.value);}).call(this);this._appendStructure($r0,this._apply("trans"),946);return this._endStructure($r0);}});(BSSemActionTranslator["_renameVariable"]=(function (name){if(((name != "$elf") && this["_toRename"][name])){return (("$vars." + name) + ".value");}else{undefined;}return name;}));let BSOMetaTranslator=objectThatDelegatesTo(OMeta,{
"App":function(){var $elf=this,$vars={},$r0=this._startStructure(949, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(952);this._appendStructure($r1,this.exactly("super"),954);$vars.args=this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("transFn"),959);}),957);$r1.value=[this["sName"],"._superApplyWithArgs(this,",$vars.args.value.join(","),")"].join("");return this._endStructure($r1);},function(){var $r1=this._startStructure(963);$vars.rule=this.anything();$vars.args=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("transFn"),969);}),967);this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(973);$r2.value=this._pred(this._optimizedCall($vars.rule.value,$vars.args.value));$r2.value=["this.",this["_callables"][$vars.rule.value]["name"],"(",$vars.args.value.join(","),")"].join("");return this._endStructure($r2);},function(){var $r2=this._startStructure(980);$r2.value=this._pred(($vars.args.value["length"] < (1)));$r2.value=["this._apply(\"",$vars.rule.value,"\")"].join("");return this._endStructure($r2);},function(){var $r2=this._startStructure(972);$r2.value=["this._applyWithArgs(\"",$vars.rule.value,"\",",$vars.args.value.join(","),")"].join("");return this._endStructure($r2);}),971);return this._endStructure($r1);}),950);return this._endStructure($r0);},
"Pred":function(){var $elf=this,$vars={},$r0=this._startStructure(988, true);$vars.expr=this._appendStructure($r0,this._apply("transFn"),991);$r0.value=["this._pred(",$vars.expr.value,")"].join("");return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(995, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("transFn"),1000);}),998);$r0.value=["this._or(",$vars.xs.value.join(","),")"].join("");return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(1004, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("transFn"),1009);}),1007);$r0.value=$vars.xs.value.unshift(this["rName"].toProgramString());$r0.value=["this._xor(",$vars.xs.value.join(","),")"].join("");return this._endStructure($r0);},
"And":function(){var $elf=this,$vars={},$r0=this._startStructure(1015, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(1018);$vars.xs=this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("transFn"),1023);}),1021);$r1.value=$vars.xs.value.join(";");return this._endStructure($r1);},function(){var $r1=this._startStructure(1017);$r1.value="undefined";return this._endStructure($r1);}),1016);return this._endStructure($r0);},
"Opt":function(){var $elf=this,$vars={},$r0=this._startStructure(1028, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1031);$r0.value=["this._opt(",$vars.x.value,")"].join("");return this._endStructure($r0);},
"Many":function(){var $elf=this,$vars={},$r0=this._startStructure(1035, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1038);$r0.value=["this._many(",$vars.x.value,")"].join("");return this._endStructure($r0);},
"Many1":function(){var $elf=this,$vars={},$r0=this._startStructure(1042, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1045);$r0.value=["this._many1(",$vars.x.value,")"].join("");return this._endStructure($r0);},
"Set":function(){var $elf=this,$vars={},$r0=this._startStructure(1049, true);$vars.n=this.anything();$vars.v=this._appendStructure($r0,this._apply("transFn"),1053);$r0.value=["$vars.",$vars.n.value,"=",$vars.v.value].join("");return this._endStructure($r0);},
"Not":function(){var $elf=this,$vars={},$r0=this._startStructure(1057, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1060);$r0.value=["this._not(",$vars.x.value,")"].join("");return this._endStructure($r0);},
"Lookahead":function(){var $elf=this,$vars={},$r0=this._startStructure(1064, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1067);$r0.value=["this._lookahead(",$vars.x.value,")"].join("");return this._endStructure($r0);},
"Form":function(){var $elf=this,$vars={},$r0=this._startStructure(1071, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1074);$r0.value=["this._form(",$vars.x.value,")"].join("");return this._endStructure($r0);},
"ConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(1078, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1081);$r0.value=["this._consumedBy(",$vars.x.value,")"].join("");return this._endStructure($r0);},
"IdxConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(1085, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1088);$r0.value=["this._idxConsumedBy(",$vars.x.value,")"].join("");return this._endStructure($r0);},
"JumpTable":function(){var $elf=this,$vars={},$r0=this._startStructure(1092, true);$r0.value=this["_storeVar"]++;$vars.cases=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("jtCase"),1099);}),1097);$r0.value=this["_storeVar"]--;$r0.value=this.jumpTableCode($vars.cases.value);return this._endStructure($r0);},
"Interleave":function(){var $elf=this,$vars={},$r0=this._startStructure(1105, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("intPart"),1110);}),1108);$r0.value=["this._interleave(",$vars.xs.value.join(","),")"].join("");return this._endStructure($r0);},
"Function":function(){var $elf=this,$vars={},$r0=this._startStructure(1114, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1117);$r0.value=["function(){",$vars.x.value,";}"].join("");return this._endStructure($r0);},
"FunctionStructure":function(){var $elf=this,$vars={},$r0=this._startStructure(1121, true);$r0.value=this["_storeVar"]++;$vars.xs=this._appendStructure($r0,this._many1(function(){return this._forwardStructure(this._apply("transFn"),1128);}),1126);$r0.value=this["_storeVar"]--;$r0.value=["function(){var $r",(this["_storeVar"] + (1)),"=this._startStructure(",this.getLocationId(),");",$vars.xs.value.join(";"),";return this._endStructure($r",(this["_storeVar"] + (1)),");}"].join("");return this._endStructure($r0);},
"SetReturn":function(){var $elf=this,$vars={},$r0=this._startStructure(1134, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1137);$r0.value=["$r",this["_storeVar"],".value=",$vars.x.value].join("");return this._endStructure($r0);},
"Return":function(){var $elf=this,$vars={},$r0=this._startStructure(1141, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1144);$r0.value=["return this._forwardStructure(",$vars.x.value,",",this.getLocationId(),")"].join("");return this._endStructure($r0);},
"Parenthesis":function(){var $elf=this,$vars={},$r0=this._startStructure(1148, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1151);$r0.value=["(",$vars.x.value,")"].join("");return this._endStructure($r0);},
"Store":function(){var $elf=this,$vars={},$r0=this._startStructure(1155, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1158);$r0.value=["this._appendStructure($r",this["_storeVar"],",",$vars.x.value,",",this.getLocationId(),")"].join("");return this._endStructure($r0);},
"Wrap":function(){var $elf=this,$vars={},$r0=this._startStructure(1162, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1165);$r0.value=["this._generateStructure($r",this["_storeVar"],",",$vars.x.value,",",this.getLocationId(),")"].join("");return this._endStructure($r0);},
"Js":function(){var $elf=this,$vars={},$r0=this._startStructure(1169, true);$vars.locals=this.anything();this._appendStructure($r0,this._applyWithArgs("transJs",$vars.locals.value),1172);return this._endStructure($r0);},
"PopArg":function(){var $elf=this,$vars={},$r0=this._startStructure(1175, true);$vars.n=this.anything();$r0.value=["$vars.",$vars.n.value,"=this.anything()"].join("");return this._endStructure($r0);},
"Rule":function(){var $elf=this,$vars={},$r0=this._startStructure(1180, true);$vars.name=this.anything();$r0.value=(function (){(this["rName"]=$vars.name.value);return (this["_storeVar"]=(0));}).call(this);$vars.body=this._appendStructure($r0,this._apply("trans"),1186);$r0.value=["\n\"",$vars.name.value,"\":function(){var $elf=this,","$vars={},","$r0=this._startStructure(",this.getLocationId(),", true);",$vars.body.value,";return this._endStructure($r0);}"].join("");return this._endStructure($r0);},
"Grammar":function(){var $elf=this,$vars={},$r0=this._startStructure(1190, true);$vars.sName=this.anything();$r0.value=(this["sName"]=$vars.sName.value);$vars.rules=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("trans"),1198);}),1196);$r0.value=["objectThatDelegatesTo(",$vars.sName.value,",{",$vars.rules.value.join(","),"})"].join("");return this._endStructure($r0);},
"intPart":function(){var $elf=this,$vars={},$r0=this._startStructure(1202, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(1206);$vars.mode=this.anything();$vars.part=this._appendStructure($r1,this._apply("transFn"),1210);return this._endStructure($r1);}),1204);$r0.value=(($vars.mode.value.toProgramString() + ",") + $vars.part.value);return this._endStructure($r0);},
"jtCase":function(){var $elf=this,$vars={},$r0=this._startStructure(1214, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(1218);$vars.x=this.anything();$vars.e=this._appendStructure($r1,this._apply("trans"),1222);return this._endStructure($r1);}),1216);$r0.value=[$vars.x.value.toProgramString(),$vars.e.value];return this._endStructure($r0);},
"transJs":function(){var $elf=this,$vars={},$r0=this._startStructure(1226, true);$vars.locals=this.anything();this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionTranslator,"jstrans",this["_storeVar"],$vars.locals.value),1229);return this._endStructure($r0);},
"trans":function(){var $elf=this,$vars={},$r0=this._startStructure(1234, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(1238);$vars.loc=this.anything();$vars.t=this.anything();$r1.value=this.pushLocation($vars.loc.value);$vars.ans=this._appendStructure($r1,this._apply($vars.t.value),1245);$r1.value=this.popLocation();return this._endStructure($r1);}),1236);$r0.value=$vars.ans.value;return this._endStructure($r0);},
"transFn":function(){var $elf=this,$vars={},$r0=this._startStructure(1252, true);$vars.x=this._appendStructure($r0,this._apply("trans"),1255);$r0.value=$vars.x.value;return this._endStructure($r0);}});(BSOMetaTranslator["_callables"]=({"anything": ({"name": "anything","nbArgs": (0)}),"apply": ({"name": "_apply","nbArgs": (1)}),"end": ({"name": "end","nbArgs": (0)}),"exactly": ({"name": "exactly","nbArgs": (1)}),"seq": ({"name": "seq","nbArgs": (1)})}));(BSOMetaTranslator["_optimizedCall"]=(function (rule,args){let c=this["_callables"][rule];return (c && (c["nbArgs"] == args["length"]));}));(BSOMetaTranslator["jumpTableCode"]=(function (cases){var buf=new StringBuffer();buf.nextPutAll((("(function(){var $r" + (this["_storeVar"] + (1))) + "=this._startStructure(-1);"));buf.nextPutAll((("switch(this._appendStructure($r" + (this["_storeVar"] + (1))) + ",this._apply(\'anything\'))){"));for(var i=(0);(i < cases["length"]);(i+=(1))){buf.nextPutAll((((("case " + cases[i][(0)]) + ":") + cases[i][(1)]) + ";break;"));}buf.nextPutAll((("default: throw fail}return this._endStructure($r" + (this["_storeVar"] + (1))) + ");}).call(this)"));return buf.contents();}));(BSOMetaTranslator["pushLocation"]=(function (location){if((location != null)){let locationId=createSourceMapId();addToSourseMap(locationId,location["start"],location["stop"]);this["_locations"].push(locationId);}else{this["_locations"].push(this["_locations"][(this["_locations"]["length"] - (1))]);};}));(BSOMetaTranslator["popLocation"]=(function (){this["_locations"].pop();}));(BSOMetaTranslator["getLocationId"]=(function (){return this["_locations"][(this["_locations"]["length"] - (1))];}));(BSOMetaTranslator["initialize"]=(function (){(this["_locations"]=[]);}))


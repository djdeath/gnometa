// This file was generated using Gnometa
// https://github.com/djdeath/gnometa
let BSSemActionParser=objectThatDelegatesTo(BSJSParser,{
"jsOmetaKeyword":function(){var $elf=this,$vars={},$r0=this._startStructure(1, true);$vars.k=this._getStructureValue(this.anything());this._appendStructure($r0,this._apply("spaces"),4);this._appendStructure($r0,this.exactly("@"),6);$vars.n=this._appendStructure($r0,this._apply("iName"),9);this._pred(($vars.k == $vars.n));$r0.value=$vars.k;return this._endStructure($r0);},
"primExprHd":function(){var $elf=this,$vars={},$r0=this._startStructure(14, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(17);this._appendStructure($r1,this._applyWithArgs("jsOmetaKeyword","location"),19);$r1.value=["Location"];return this._endStructure($r1);},function(){return this._forwardStructure(BSJSParser._superApplyWithArgs(this,"primExprHd"),23);}),15);return this._endStructure($r0);},
"curlySemAction":function(){var $elf=this,$vars={},$r0=this._startStructure(25, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(28);this._appendStructure($r1,this._applyWithArgs("token","{"),30);$vars.r=this._appendStructure($r1,this._apply("expr"),33);this._appendStructure($r1,this._apply("sc"),35);this._appendStructure($r1,this._applyWithArgs("token","}"),37);$r1.value=$vars.r;return this._endStructure($r1);},function(){var $r1=this._startStructure(40);this._appendStructure($r1,this._applyWithArgs("token","{"),42);$vars.ss=this._appendStructure($r1,this._many(function(){var $r2=this._startStructure(47);$vars.s=this._appendStructure($r2,this._apply("srcElem"),50);this._appendStructure($r2,this._lookahead(function(){return this._forwardStructure(this._apply("srcElem"),54);}),52);$r2.value=$vars.s;return this._endStructure($r2);}),45);$vars.s=this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(60);$vars.r=this._appendStructure($r2,this._apply("expr"),63);this._appendStructure($r2,this._apply("sc"),65);$r2.value=["return",$vars.r];return this._endStructure($r2);},function(){return this._forwardStructure(this._apply("srcElem"),68);}),58);$vars.ss.push($vars.s);this._appendStructure($r1,this._applyWithArgs("token","}"),71);$r1.value=["send","call",["func",[],["begin"].concat($vars.ss)],["this"]];return this._endStructure($r1);}),26);return this._endStructure($r0);},
"semAction":function(){var $elf=this,$vars={},$r0=this._startStructure(74, true);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("curlySemAction"),77);},function(){var $r1=this._startStructure(79);$vars.r=this._appendStructure($r1,this._apply("primExpr"),82);this._appendStructure($r1,this._apply("spaces"),84);$r1.value=$vars.r;return this._endStructure($r1);}),75);return this._endStructure($r0);}});let BSOMetaParser=objectThatDelegatesTo(BaseStrParser,{
"enum":function(){var $elf=this,$vars={},$r0=this._startStructure(88, true);$vars.r=this._getStructureValue(this.anything());$vars.d=this._getStructureValue(this.anything());$vars.v=this._appendStructure($r0,this._applyWithArgs("listOf",$vars.r,$vars.d),93);this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._applyWithArgs("token",","),99);},function(){return this._forwardStructure(this._apply("empty"),101);}),97);$r0.value=$vars.v;return this._endStructure($r0);},
"space":function(){var $elf=this,$vars={},$r0=this._startStructure(104, true);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(BaseStrParser._superApplyWithArgs(this,"space"),107);},function(){return this._forwardStructure(this._applyWithArgs("fromTo","//","\n"),109);},function(){return this._forwardStructure(this._applyWithArgs("fromTo","/*","*/"),113);}),105);return this._endStructure($r0);},
"nameFirst":function(){var $elf=this,$vars={},$r0=this._startStructure(117, true);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this.exactly("_"),120);},function(){return this._forwardStructure(this.exactly("$"),122);},function(){return this._forwardStructure(this._apply("letter"),124);}),118);return this._endStructure($r0);},
"nameRest":function(){var $elf=this,$vars={},$r0=this._startStructure(126, true);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("nameFirst"),129);},function(){return this._forwardStructure(this._apply("digit"),131);}),127);return this._endStructure($r0);},
"tsName":function(){var $elf=this,$vars={},$r0=this._startStructure(133, true);$r0.value=this._appendStructure($r0,this._consumedBy(function(){var $r1=this._startStructure(136);this._appendStructure($r1,this._apply("nameFirst"),138);$r1.value=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("nameRest"),142);}),140);return this._endStructure($r1);}),134);return this._endStructure($r0);},
"name":function(){var $elf=this,$vars={},$r0=this._startStructure(144, true);this._appendStructure($r0,this._apply("spaces"),146);$r0.value=this._appendStructure($r0,this._apply("tsName"),148);return this._endStructure($r0);},
"hexDigit":function(){var $elf=this,$vars={},$r0=this._startStructure(150, true);$vars.x=this._appendStructure($r0,this._apply("char"),153);$vars.v=this["hexDigits"].indexOf($vars.x.toLowerCase());this._pred(($vars.v >= (0)));$r0.value=$vars.v;return this._endStructure($r0);},
"eChar":function(){var $elf=this,$vars={},$r0=this._startStructure(160, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(163);$vars.s=this._appendStructure($r1,this._consumedBy(function(){var $r2=this._startStructure(168);this._appendStructure($r2,this.exactly("\\"),170);$r2.value=this._appendStructure($r2,this._or(function(){var $r3=this._startStructure(174);this._appendStructure($r3,this.exactly("u"),176);this._appendStructure($r3,this._apply("hexDigit"),178);this._appendStructure($r3,this._apply("hexDigit"),180);this._appendStructure($r3,this._apply("hexDigit"),182);$r3.value=this._appendStructure($r3,this._apply("hexDigit"),184);return this._endStructure($r3);},function(){var $r3=this._startStructure(186);this._appendStructure($r3,this.exactly("x"),188);this._appendStructure($r3,this._apply("hexDigit"),190);$r3.value=this._appendStructure($r3,this._apply("hexDigit"),192);return this._endStructure($r3);},function(){return this._forwardStructure(this._apply("char"),194);}),172);return this._endStructure($r2);}),166);$r1.value=unescape($vars.s);return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("char"),197);}),161);return this._endStructure($r0);},
"tsString":function(){var $elf=this,$vars={},$r0=this._startStructure(199, true);this._appendStructure($r0,this.exactly("\'"),201);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(206);this._appendStructure($r1,this._not(function(){return this._forwardStructure(this.exactly("\'"),210);}),208);$r1.value=this._appendStructure($r1,this._apply("eChar"),212);return this._endStructure($r1);}),204);this._appendStructure($r0,this.exactly("\'"),214);$r0.value=$vars.xs.join("");return this._endStructure($r0);},
"characters":function(){var $elf=this,$vars={},$r0=this._startStructure(217, true);this._appendStructure($r0,this.exactly("`"),219);this._appendStructure($r0,this.exactly("`"),221);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(226);this._appendStructure($r1,this._not(function(){var $r2=this._startStructure(230);this._appendStructure($r2,this.exactly("\'"),232);$r2.value=this._appendStructure($r2,this.exactly("\'"),234);return this._endStructure($r2);}),228);$r1.value=this._appendStructure($r1,this._apply("eChar"),236);return this._endStructure($r1);}),224);this._appendStructure($r0,this.exactly("\'"),238);this._appendStructure($r0,this.exactly("\'"),240);$r0.value=[this._extractLocation($r0),"App","seq",jsValue("string",$vars.xs.join(""))];return this._endStructure($r0);},
"sCharacters":function(){var $elf=this,$vars={},$r0=this._startStructure(243, true);this._appendStructure($r0,this.exactly("\""),245);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(250);this._appendStructure($r1,this._not(function(){return this._forwardStructure(this.exactly("\""),254);}),252);$r1.value=this._appendStructure($r1,this._apply("eChar"),256);return this._endStructure($r1);}),248);this._appendStructure($r0,this.exactly("\""),258);$r0.value=[this._extractLocation($r0),"App","token",jsValue("string",$vars.xs.join(""))];return this._endStructure($r0);},
"string":function(){var $elf=this,$vars={},$r0=this._startStructure(261, true);$vars.xs=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(266);this._appendStructure($r1,this._or(function(){return this._forwardStructure(this.exactly("#"),270);},function(){return this._forwardStructure(this.exactly("`"),272);}),268);$r1.value=this._appendStructure($r1,this._apply("tsName"),274);return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("tsString"),276);}),264);$r0.value=[this._extractLocation($r0),"App","exactly",jsValue("string",$vars.xs)];return this._endStructure($r0);},
"number":function(){var $elf=this,$vars={},$r0=this._startStructure(279, true);$vars.n=this._appendStructure($r0,this._consumedBy(function(){var $r1=this._startStructure(284);this._appendStructure($r1,this._opt(function(){return this._forwardStructure(this.exactly("-"),288);}),286);$r1.value=this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("digit"),292);}),290);return this._endStructure($r1);}),282);$r0.value=[this._extractLocation($r0),"App","exactly",jsValue("number",$vars.n)];return this._endStructure($r0);},
"keyword":function(){var $elf=this,$vars={},$r0=this._startStructure(295, true);$vars.xs=this._getStructureValue(this.anything());this._appendStructure($r0,this._applyWithArgs("token",$vars.xs),298);this._appendStructure($r0,this._not(function(){return this._forwardStructure(this._apply("letterOrDigit"),303);}),301);$r0.value=$vars.xs;return this._endStructure($r0);},
"args":function(){var $elf=this,$vars={},$r0=this._startStructure(306, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(309);this._appendStructure($r1,this.exactly("("),311);$vars.xs=this._appendStructure($r1,this._applyWithArgs("listOf","hostExpr",","),314);this._appendStructure($r1,this._applyWithArgs("token",")"),318);$r1.value=$vars.xs;return this._endStructure($r1);},function(){var $r1=this._startStructure(321);this._appendStructure($r1,this._apply("empty"),323);$r1.value=[];return this._endStructure($r1);}),307);return this._endStructure($r0);},
"application":function(){var $elf=this,$vars={},$r0=this._startStructure(326, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(329);this._appendStructure($r1,this._applyWithArgs("token","^"),331);$vars.rule=this._appendStructure($r1,this._apply("name"),334);$vars.as=this._appendStructure($r1,this._apply("args"),337);$r1.value=[this._extractLocation($r1),"App","super",jsValue("string",$vars.rule)].concat($vars.as);return this._endStructure($r1);},function(){var $r1=this._startStructure(340);$vars.grm=this._appendStructure($r1,this._apply("name"),343);this._appendStructure($r1,this._applyWithArgs("token","."),345);$vars.rule=this._appendStructure($r1,this._apply("name"),348);$vars.as=this._appendStructure($r1,this._apply("args"),351);$r1.value=[this._extractLocation($r1),"App","foreign",jsCode(this._extractLocation($r1),this["locals"],["get",$vars.grm]),jsValue("string",$vars.rule)].concat($vars.as);return this._endStructure($r1);},function(){var $r1=this._startStructure(354);$vars.rule=this._appendStructure($r1,this._apply("name"),357);$vars.as=this._appendStructure($r1,this._apply("args"),360);$r1.value=[this._extractLocation($r1),"App",$vars.rule].concat($vars.as);return this._endStructure($r1);}),327);return this._endStructure($r0);},
"hostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(363, true);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionParser,"expr"),366);$r0.value=jsCode(this._extractLocation($r0),this["locals"],$vars.r);return this._endStructure($r0);},
"curlyHostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(370, true);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionParser,"curlySemAction"),373);$r0.value=jsCode(this._extractLocation($r0),this["locals"],$vars.r);return this._endStructure($r0);},
"primHostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(377, true);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionParser,"semAction"),380);$r0.value=jsCode(this._extractLocation($r0),this["locals"],$vars.r);return this._endStructure($r0);},
"atomicHostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(384, true);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("curlyHostExpr"),387);},function(){return this._forwardStructure(this._apply("primHostExpr"),389);}),385);return this._endStructure($r0);},
"semAction":function(){var $elf=this,$vars={},$r0=this._startStructure(391, true);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("curlyHostExpr"),394);},function(){var $r1=this._startStructure(396);this._appendStructure($r1,this._applyWithArgs("token","!"),398);$r1.value=this._appendStructure($r1,this._apply("atomicHostExpr"),400);return this._endStructure($r1);}),392);return this._endStructure($r0);},
"arrSemAction":function(){var $elf=this,$vars={},$r0=this._startStructure(402, true);this._appendStructure($r0,this._applyWithArgs("token","->"),404);$r0.value=this._appendStructure($r0,this._apply("atomicHostExpr"),406);return this._endStructure($r0);},
"semPred":function(){var $elf=this,$vars={},$r0=this._startStructure(408, true);this._appendStructure($r0,this._applyWithArgs("token","?"),410);$vars.x=this._appendStructure($r0,this._apply("atomicHostExpr"),413);$r0.value=[this._extractLocation($r0),"Pred",$vars.x];return this._endStructure($r0);},
"expr":function(){var $elf=this,$vars={},$r0=this._startStructure(416, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(419);$vars.x=this._appendStructure($r1,this._applyWithArgs("expr5",true),422);$vars.xs=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(428);this._appendStructure($r2,this._applyWithArgs("token","|"),430);$r2.value=this._appendStructure($r2,this._applyWithArgs("expr5",true),432);return this._endStructure($r2);}),426);$r1.value=[this._extractLocation($r1),"Or",$vars.x].concat($vars.xs);return this._endStructure($r1);},function(){var $r1=this._startStructure(436);$vars.x=this._appendStructure($r1,this._applyWithArgs("expr5",true),439);$vars.xs=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(445);this._appendStructure($r2,this._applyWithArgs("token","||"),447);$r2.value=this._appendStructure($r2,this._applyWithArgs("expr5",true),449);return this._endStructure($r2);}),443);$r1.value=[this._extractLocation($r1),"XOr",$vars.x].concat($vars.xs);return this._endStructure($r1);},function(){return this._forwardStructure(this._applyWithArgs("expr5",false),453);}),417);return this._endStructure($r0);},
"expr5":function(){var $elf=this,$vars={},$r0=this._startStructure(456, true);$vars.ne=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(461);$vars.x=this._appendStructure($r1,this._apply("interleavePart"),464);$vars.xs=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(469);this._appendStructure($r2,this._applyWithArgs("token","&&"),471);$r2.value=this._appendStructure($r2,this._apply("interleavePart"),473);return this._endStructure($r2);}),467);$r1.value=[this._extractLocation($r1),"Interleave",$vars.x].concat($vars.xs);return this._endStructure($r1);},function(){return this._forwardStructure(this._applyWithArgs("expr4",$vars.ne),476);}),459);return this._endStructure($r0);},
"interleavePart":function(){var $elf=this,$vars={},$r0=this._startStructure(479, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(482);this._appendStructure($r1,this._applyWithArgs("token","("),484);$vars.part=this._appendStructure($r1,this._applyWithArgs("expr4",true),487);this._appendStructure($r1,this._applyWithArgs("token",")"),490);$r1.value=["1",$vars.part];return this._endStructure($r1);},function(){var $r1=this._startStructure(493);$vars.part=this._appendStructure($r1,this._applyWithArgs("expr4",true),496);$r1.value=this._appendStructure($r1,this._applyWithArgs("modedIPart",$vars.part),499);return this._endStructure($r1);}),480);return this._endStructure($r0);},
"modedIPart":function(){var $elf=this,$vars={},$r0=this._startStructure(502, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(505);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(509);this._appendStructure($r2,this.exactly("And"),511);$r2.value=this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(515);this._appendStructure($r3,this.exactly("Many"),517);$r3.value=($vars.part=this._getStructureValue(this.anything()));return this._endStructure($r3);}),513);return this._endStructure($r2);}),507);$r1.value=["*",$vars.part];return this._endStructure($r1);},function(){var $r1=this._startStructure(522);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(526);this._appendStructure($r2,this.exactly("And"),528);$r2.value=this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(532);this._appendStructure($r3,this.exactly("Many1"),534);$r3.value=($vars.part=this._getStructureValue(this.anything()));return this._endStructure($r3);}),530);return this._endStructure($r2);}),524);$r1.value=["+",$vars.part];return this._endStructure($r1);},function(){var $r1=this._startStructure(539);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(543);this._appendStructure($r2,this.exactly("And"),545);$r2.value=this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(549);this._appendStructure($r3,this.exactly("Opt"),551);$r3.value=($vars.part=this._getStructureValue(this.anything()));return this._endStructure($r3);}),547);return this._endStructure($r2);}),541);$r1.value=["?",$vars.part];return this._endStructure($r1);},function(){var $r1=this._startStructure(556);$vars.part=this._getStructureValue(this.anything());$r1.value=["1",$vars.part];return this._endStructure($r1);}),503);return this._endStructure($r0);},
"expr4":function(){var $elf=this,$vars={},$r0=this._startStructure(560, true);$vars.ne=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(565);$vars.xs=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("expr3"),570);}),568);$vars.act=this._appendStructure($r1,this._apply("arrSemAction"),573);$r1.value=[this._extractLocation($r1),"And"].concat($vars.xs).concat([$vars.act]);return this._endStructure($r1);},function(){var $r1=this._startStructure(576);this._pred($vars.ne);$vars.xs=this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("expr3"),583);}),581);$r1.value=[this._extractLocation($r1),"And"].concat($vars.xs);return this._endStructure($r1);},function(){var $r1=this._startStructure(586);this._pred(($vars.ne == false));$vars.xs=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("expr3"),593);}),591);$r1.value=[this._extractLocation($r1),"And"].concat($vars.xs);return this._endStructure($r1);}),563);return this._endStructure($r0);},
"optIter":function(){var $elf=this,$vars={},$r0=this._startStructure(596, true);$vars.x=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(601);this._appendStructure($r1,this.exactly("*"),603);$r1.value=[mergeLocation(this._extractLocation($r1),$vars.x[(0)]),"Many",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(606);this._appendStructure($r1,this.exactly("+"),608);$r1.value=[mergeLocation(this._extractLocation($r1),$vars.x[(0)]),"Many1",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(611);this._appendStructure($r1,this.exactly("?"),613);$r1.value=[mergeLocation(this._extractLocation($r1),$vars.x[(0)]),"Opt",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(616);this._appendStructure($r1,this._apply("empty"),618);$r1.value=$vars.x;return this._endStructure($r1);}),599);return this._endStructure($r0);},
"optBind":function(){var $elf=this,$vars={},$r0=this._startStructure(621, true);$vars.x=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(626);this._appendStructure($r1,this.exactly(":"),628);$vars.n=this._appendStructure($r1,this._apply("name"),631);$r1.value=(function (){(this["locals"][$vars.n]=true);return [mergeLocation(this._extractLocation($r1),$vars.x[(0)]),"Set",$vars.n,$vars.x];}).call(this);return this._endStructure($r1);},function(){var $r1=this._startStructure(634);this._appendStructure($r1,this._apply("empty"),636);$r1.value=$vars.x;return this._endStructure($r1);}),624);return this._endStructure($r0);},
"expr3":function(){var $elf=this,$vars={},$r0=this._startStructure(639, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(642);this._appendStructure($r1,this._applyWithArgs("token",":"),644);$vars.n=this._appendStructure($r1,this._apply("name"),647);$r1.value=(function (){(this["locals"][$vars.n]=true);return [this._extractLocation($r1),"Set",$vars.n,[null,"PopArg"]];}).call(this);return this._endStructure($r1);},function(){var $r1=this._startStructure(650);$vars.e=this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(655);$vars.x=this._appendStructure($r2,this._apply("expr2"),658);$r2.value=this._appendStructure($r2,this._applyWithArgs("optIter",$vars.x),660);return this._endStructure($r2);},function(){return this._forwardStructure(this._apply("semAction"),663);}),653);$r1.value=this._appendStructure($r1,this._applyWithArgs("optBind",$vars.e),665);return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("semPred"),668);}),640);return this._endStructure($r0);},
"expr2":function(){var $elf=this,$vars={},$r0=this._startStructure(670, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(673);this._appendStructure($r1,this._applyWithArgs("token","~"),675);$vars.x=this._appendStructure($r1,this._apply("expr2"),678);$r1.value=[this._extractLocation($r1),"Not",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(681);this._appendStructure($r1,this._applyWithArgs("token","&"),683);$vars.x=this._appendStructure($r1,this._apply("expr1"),686);$r1.value=[this._extractLocation($r1),"Lookahead",$vars.x];return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("expr1"),689);}),671);return this._endStructure($r0);},
"expr1":function(){var $elf=this,$vars={},$r0=this._startStructure(691, true);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("application"),694);},function(){var $r1=this._startStructure(696);$vars.x=this._appendStructure($r1,this._or(function(){return this._forwardStructure(this._applyWithArgs("keyword","undefined"),701);},function(){return this._forwardStructure(this._applyWithArgs("keyword","nil"),704);},function(){return this._forwardStructure(this._applyWithArgs("keyword","true"),707);},function(){return this._forwardStructure(this._applyWithArgs("keyword","false"),710);}),699);$r1.value=[this._extractLocation($r1),"App","exactly",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(714);this._appendStructure($r1,this._apply("spaces"),716);$r1.value=this._appendStructure($r1,this._or(function(){return this._forwardStructure(this._apply("characters"),720);},function(){return this._forwardStructure(this._apply("sCharacters"),722);},function(){return this._forwardStructure(this._apply("string"),724);},function(){return this._forwardStructure(this._apply("number"),726);}),718);return this._endStructure($r1);},function(){var $r1=this._startStructure(728);this._appendStructure($r1,this._applyWithArgs("token","["),730);$vars.x=this._appendStructure($r1,this._apply("expr"),733);this._appendStructure($r1,this._applyWithArgs("token","]"),735);$r1.value=[this._extractLocation($r1),"Form",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(738);this._appendStructure($r1,this._applyWithArgs("token","<"),740);$vars.x=this._appendStructure($r1,this._apply("expr"),743);this._appendStructure($r1,this._applyWithArgs("token",">"),745);$r1.value=[this._extractLocation($r1),"ConsBy",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(748);this._appendStructure($r1,this._applyWithArgs("token","@<"),750);$vars.x=this._appendStructure($r1,this._apply("expr"),753);this._appendStructure($r1,this._applyWithArgs("token",">"),755);$r1.value=[this._extractLocation($r1),"IdxConsBy",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(758);this._appendStructure($r1,this._applyWithArgs("token","("),760);$vars.x=this._appendStructure($r1,this._apply("expr"),763);this._appendStructure($r1,this._applyWithArgs("token",")"),765);$r1.value=$vars.x;return this._endStructure($r1);}),692);return this._endStructure($r0);},
"ruleName":function(){var $elf=this,$vars={},$r0=this._startStructure(768, true);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("name"),771);},function(){var $r1=this._startStructure(773);this._appendStructure($r1,this._apply("spaces"),775);$r1.value=this._appendStructure($r1,this._apply("tsString"),777);return this._endStructure($r1);}),769);return this._endStructure($r0);},
"rule":function(){var $elf=this,$vars={},$r0=this._startStructure(779, true);this._appendStructure($r0,this._lookahead(function(){var $r1=this._startStructure(782);$r1.value=($vars.n=this._appendStructure($r1,this._apply("ruleName"),785));return this._endStructure($r1);}),781);(this["locals"]=({}));$vars.x=this._appendStructure($r0,this._applyWithArgs("rulePart",$vars.n),789);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(795);this._appendStructure($r1,this._applyWithArgs("token",","),797);$r1.value=this._appendStructure($r1,this._applyWithArgs("rulePart",$vars.n),799);return this._endStructure($r1);}),793);$r0.value=[this._extractLocation($r0),"Rule",$vars.n,[this._extractLocation($r0),"Or",$vars.x].concat($vars.xs)];return this._endStructure($r0);},
"rulePart":function(){var $elf=this,$vars={},$r0=this._startStructure(803, true);$vars.rn=this._getStructureValue(this.anything());$vars.n=this._appendStructure($r0,this._apply("ruleName"),807);this._pred(($vars.n == $vars.rn));$vars.b1=this._appendStructure($r0,this._applyWithArgs("expr4",false),812);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(817);this._appendStructure($r1,this._applyWithArgs("token","="),819);$vars.b2=this._appendStructure($r1,this._apply("expr"),822);$r1.value=[this._extractLocation($r1),"And",$vars.b1,$vars.b2];return this._endStructure($r1);},function(){var $r1=this._startStructure(825);this._appendStructure($r1,this._apply("empty"),827);$r1.value=$vars.b1;return this._endStructure($r1);}),815);return this._endStructure($r0);},
"grammar":function(){var $elf=this,$vars={},$r0=this._startStructure(830, true);this._appendStructure($r0,this._applyWithArgs("keyword","ometa"),832);$vars.sn=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(838);this._appendStructure($r1,this._applyWithArgs("token","("),840);$vars.sni=this._appendStructure($r1,this._apply("name"),843);this._appendStructure($r1,this._applyWithArgs("token",")"),845);$r1.value=$vars.sni;return this._endStructure($r1);},function(){var $r1=this._startStructure(848);this._appendStructure($r1,this._apply("empty"),850);$r1.value="OMeta";return this._endStructure($r1);}),836);this._appendStructure($r0,this._applyWithArgs("token","{"),853);$vars.rs=this._appendStructure($r0,this._applyWithArgs("enum","rule",","),856);this._appendStructure($r0,this._applyWithArgs("token","}"),860);$r0.value=["OMetaGrammar",$vars.sn,$vars.rs];return this._endStructure($r0);}});(BSOMetaParser["hexDigits"]="0123456789abcdef");let BSSemActionTranslator=objectThatDelegatesTo(BSJSTranslator,{
"Location":function(){var $elf=this,$vars={},$r0=this._startStructure(864, true);$r0.value=["this._extractLocation($r",this["_storeVal"],")"].join("");return this._endStructure($r0);},
"get":function(){var $elf=this,$vars={},$r0=this._startStructure(866, true);$vars.n=this._getStructureValue(this.anything());$r0.value=this._renameVariable($vars.n);return this._endStructure($r0);},
"name":function(){var $elf=this,$vars={},$r0=this._startStructure(870, true);$vars.n=this._getStructureValue(this.anything());$r0.value=this._renameVariable($vars.n);return this._endStructure($r0);},
"jstrans":function(){var $elf=this,$vars={},$r0=this._startStructure(874, true);$vars.storeVal=this._getStructureValue(this.anything());$vars.toRename=this._getStructureValue(this.anything());(function (){(this["_storeVal"]=$vars.storeVal);return (this["_toRename"]=$vars.toRename);}).call(this);$r0.value=this._appendStructure($r0,this._apply("trans"),879);return this._endStructure($r0);}});(BSSemActionTranslator["_renameVariable"]=(function (name){if(((name != "$elf") && this["_toRename"][name])){return ("$vars." + name);}else{undefined;}return name;}));let BSOMetaTranslator=objectThatDelegatesTo(OMeta,{
"App":function(){var $elf=this,$vars={},$r0=this._startStructure(882, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(885);this._appendStructure($r1,this.exactly("super"),887);$vars.args=this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("transFn"),892);}),890);$r1.value=[this["sName"],"._superApplyWithArgs(this,",$vars.args.join(","),")"].join("");return this._endStructure($r1);},function(){var $r1=this._startStructure(895);$vars.rule=this._getStructureValue(this.anything());$vars.args=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("transFn"),901);}),899);$r1.value=this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(905);this._pred(this._optimizedCall($vars.rule,$vars.args));$r2.value=["this.",this["_callables"][$vars.rule]["name"],"(",$vars.args.join(","),")"].join("");return this._endStructure($r2);},function(){var $r2=this._startStructure(910);this._pred(($vars.args["length"] < (1)));$r2.value=["this._apply(\"",$vars.rule,"\")"].join("");return this._endStructure($r2);},function(){var $r2=this._startStructure(904);$r2.value=["this._applyWithArgs(\"",$vars.rule,"\",",$vars.args.join(","),")"].join("");return this._endStructure($r2);}),903);return this._endStructure($r1);}),883);return this._endStructure($r0);},
"Pred":function(){var $elf=this,$vars={},$r0=this._startStructure(916, true);$vars.expr=this._appendStructure($r0,this._apply("transFn"),919);$r0.value=["this._pred(",$vars.expr,")"].join("");return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(922, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("transFn"),927);}),925);$r0.value=["this._or(",$vars.xs.join(","),")"].join("");return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(930, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("transFn"),935);}),933);$vars.xs.unshift(this["rName"].toProgramString());$r0.value=["this._xor(",$vars.xs.join(","),")"].join("");return this._endStructure($r0);},
"And":function(){var $elf=this,$vars={},$r0=this._startStructure(939, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(942);$vars.xs=this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("transFn"),947);}),945);$r1.value=$vars.xs.join(";");return this._endStructure($r1);},function(){var $r1=this._startStructure(941);$r1.value="undefined";return this._endStructure($r1);}),940);return this._endStructure($r0);},
"Opt":function(){var $elf=this,$vars={},$r0=this._startStructure(951, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),954);$r0.value=["this._opt(",$vars.x,")"].join("");return this._endStructure($r0);},
"Many":function(){var $elf=this,$vars={},$r0=this._startStructure(957, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),960);$r0.value=["this._many(",$vars.x,")"].join("");return this._endStructure($r0);},
"Many1":function(){var $elf=this,$vars={},$r0=this._startStructure(963, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),966);$r0.value=["this._many1(",$vars.x,")"].join("");return this._endStructure($r0);},
"Set":function(){var $elf=this,$vars={},$r0=this._startStructure(969, true);$vars.n=this._getStructureValue(this.anything());$vars.v=this._appendStructure($r0,this._apply("transFn"),973);$r0.value=["$vars.",$vars.n,"=",$vars.v].join("");return this._endStructure($r0);},
"Not":function(){var $elf=this,$vars={},$r0=this._startStructure(976, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),979);$r0.value=["this._not(",$vars.x,")"].join("");return this._endStructure($r0);},
"Lookahead":function(){var $elf=this,$vars={},$r0=this._startStructure(982, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),985);$r0.value=["this._lookahead(",$vars.x,")"].join("");return this._endStructure($r0);},
"Form":function(){var $elf=this,$vars={},$r0=this._startStructure(988, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),991);$r0.value=["this._form(",$vars.x,")"].join("");return this._endStructure($r0);},
"ConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(994, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),997);$r0.value=["this._consumedBy(",$vars.x,")"].join("");return this._endStructure($r0);},
"IdxConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(1000, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1003);$r0.value=["this._idxConsumedBy(",$vars.x,")"].join("");return this._endStructure($r0);},
"JumpTable":function(){var $elf=this,$vars={},$r0=this._startStructure(1006, true);this["_storeVar"]++;$vars.cases=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("jtCase"),1012);}),1010);this["_storeVar"]--;$r0.value=this.jumpTableCode($vars.cases);return this._endStructure($r0);},
"Interleave":function(){var $elf=this,$vars={},$r0=this._startStructure(1016, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("intPart"),1021);}),1019);$r0.value=["this._interleave(",$vars.xs.join(","),")"].join("");return this._endStructure($r0);},
"Function":function(){var $elf=this,$vars={},$r0=this._startStructure(1024, true);this["_storeVar"]++;$vars.x=this._appendStructure($r0,this._apply("transFn"),1028);this["_storeVar"]--;$r0.value=["function(){",$vars.x,";}"].join("");return this._endStructure($r0);},
"FunctionStructure":function(){var $elf=this,$vars={},$r0=this._startStructure(1032, true);this["_storeVar"]++;$vars.xs=this._appendStructure($r0,this._many1(function(){return this._forwardStructure(this._apply("transFn"),1038);}),1036);this["_storeVar"]--;$r0.value=["function(){var $r",(this["_storeVar"] + (1)),"=this._startStructure(",this.getLocationId(),");",$vars.xs.join(";"),";return this._endStructure($r",(this["_storeVar"] + (1)),");}"].join("");return this._endStructure($r0);},
"ReturnStructure":function(){var $elf=this,$vars={},$r0=this._startStructure(1042, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1045);$r0.value=["$r",this["_storeVar"],".value=",$vars.x].join("");return this._endStructure($r0);},
"Return":function(){var $elf=this,$vars={},$r0=this._startStructure(1048, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1051);$r0.value=["return this._forwardStructure(",$vars.x,",",this.getLocationId(),")"].join("");return this._endStructure($r0);},
"Parenthesis":function(){var $elf=this,$vars={},$r0=this._startStructure(1054, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1057);$r0.value=["(",$vars.x,")"].join("");return this._endStructure($r0);},
"Store":function(){var $elf=this,$vars={},$r0=this._startStructure(1060, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1063);$r0.value=["this._appendStructure($r",this["_storeVar"],",",$vars.x,",",this.getLocationId(),")"].join("");return this._endStructure($r0);},
"Js":function(){var $elf=this,$vars={},$r0=this._startStructure(1066, true);$vars.locals=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._applyWithArgs("transJs",$vars.locals),1069);return this._endStructure($r0);},
"PopArg":function(){var $elf=this,$vars={},$r0=this._startStructure(1072, true);$r0.value="this._getStructureValue(this.anything())";return this._endStructure($r0);},
"Rule":function(){var $elf=this,$vars={},$r0=this._startStructure(1074, true);$vars.name=this._getStructureValue(this.anything());(function (){(this["rName"]=$vars.name);return (this["_storeVar"]=(0));}).call(this);$vars.body=this._appendStructure($r0,this._apply("trans"),1079);$r0.value=["\n\"",$vars.name,"\":function(){var $elf=this,","$vars={},","$r0=this._startStructure(",this.getLocationId(),", true);",$vars.body,";return this._endStructure($r0);}"].join("");return this._endStructure($r0);},
"Grammar":function(){var $elf=this,$vars={},$r0=this._startStructure(1082, true);$vars.sName=this._getStructureValue(this.anything());(this["sName"]=$vars.sName);$vars.rules=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("trans"),1089);}),1087);$r0.value=["objectThatDelegatesTo(",$vars.sName,",{",$vars.rules.join(","),"})"].join("");return this._endStructure($r0);},
"intPart":function(){var $elf=this,$vars={},$r0=this._startStructure(1092, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(1096);$vars.mode=this._getStructureValue(this.anything());$r1.value=($vars.part=this._appendStructure($r1,this._apply("transFn"),1101));return this._endStructure($r1);}),1094);$r0.value=(($vars.mode.toProgramString() + ",") + $vars.part);return this._endStructure($r0);},
"jtCase":function(){var $elf=this,$vars={},$r0=this._startStructure(1104, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(1108);$vars.x=this._getStructureValue(this.anything());$r1.value=($vars.e=this._appendStructure($r1,this._apply("trans"),1113));return this._endStructure($r1);}),1106);$r0.value=[$vars.x.toProgramString(),$vars.e];return this._endStructure($r0);},
"transJs":function(){var $elf=this,$vars={},$r0=this._startStructure(1116, true);$vars.locals=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionTranslator,"jstrans",this["_storeVar"],$vars.locals),1119);return this._endStructure($r0);},
"trans":function(){var $elf=this,$vars={},$r0=this._startStructure(1124, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(1128);$vars.loc=this._getStructureValue(this.anything());$vars.t=this._getStructureValue(this.anything());this.pushLocation($vars.loc);$vars.ans=this._appendStructure($r1,this._apply($vars.t),1134);$r1.value=this.popLocation();return this._endStructure($r1);}),1126);$r0.value=$vars.ans;return this._endStructure($r0);},
"transFn":function(){var $elf=this,$vars={},$r0=this._startStructure(1139, true);$vars.x=this._appendStructure($r0,this._apply("trans"),1142);$r0.value=$vars.x;return this._endStructure($r0);}});(BSOMetaTranslator["_callables"]=({"anything": ({"name": "anything","nbArgs": (0)}),"apply": ({"name": "_apply","nbArgs": (1)}),"end": ({"name": "end","nbArgs": (0)}),"exactly": ({"name": "exactly","nbArgs": (1)}),"seq": ({"name": "seq","nbArgs": (1)})}));(BSOMetaTranslator["_optimizedCall"]=(function (rule,args){let c=this["_callables"][rule];return (c && (c["nbArgs"] == args["length"]));}));(BSOMetaTranslator["jumpTableCode"]=(function (cases){var buf=new StringBuffer();buf.nextPutAll((("(function(){var $r" + (this["_storeVar"] + (1))) + "=this._startStructure(-1);"));buf.nextPutAll((("switch(this._appendStructure($r" + (this["_storeVar"] + (1))) + ",this._apply(\'anything\'))){"));for(var i=(0);(i < cases["length"]);(i+=(1))){buf.nextPutAll((((("case " + cases[i][(0)]) + ":") + cases[i][(1)]) + ";break;"));}buf.nextPutAll((("default: throw fail}return this._endStructure($r" + (this["_storeVar"] + (1))) + ");}).call(this)"));return buf.contents();}));(BSOMetaTranslator["pushLocation"]=(function (location){if((location != null)){let locationId=createSourceMapId();addToSourseMap(locationId,location["start"],location["stop"]);this["_locations"].push(locationId);}else{this["_locations"].push(this["_locations"][(this["_locations"]["length"] - (1))]);};}));(BSOMetaTranslator["popLocation"]=(function (){this["_locations"].pop();}));(BSOMetaTranslator["getLocationId"]=(function (){return this["_locations"][(this["_locations"]["length"] - (1))];}));(BSOMetaTranslator["initialize"]=(function (){(this["_locations"]=[]);}))


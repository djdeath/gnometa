// This file was generated using Gnometa
// https://github.com/djdeath/gnometa
let BSSemActionParser=objectThatDelegatesTo(BSJSParser,{
"jsOmetaKeyword":function(){var $elf=this,$vars={},$r0=this._startStructure(0);$vars.k=this._getStructureValue(this.anything());this._appendStructure($r0,this._apply("spaces"),3);this._appendStructure($r0,this.exactly("@"),5);$vars.n=this._appendStructure($r0,this._apply("iName"),8);this._pred(($vars.k == $vars.n));$r0.value=$vars.k;return this._endStructure($r0);},
"primExprHd":function(){var $elf=this,$vars={},$r0=this._startStructure(11);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(14);this._appendStructure($r1,this._applyWithArgs("jsOmetaKeyword","location"),16);$r1.value=["Location"];return this._endStructure($r1);},function(){return this._forwardStructure(BSJSParser._superApplyWithArgs(this,"primExprHd"),18);}),12);return this._endStructure($r0);},
"curlySemAction":function(){var $elf=this,$vars={},$r0=this._startStructure(20);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(23);this._appendStructure($r1,this._applyWithArgs("token","{"),25);$vars.r=this._appendStructure($r1,this._apply("expr"),28);this._appendStructure($r1,this._apply("sc"),30);this._appendStructure($r1,this._applyWithArgs("token","}"),32);$r1.value=$vars.r;return this._endStructure($r1);},function(){var $r1=this._startStructure(34);this._appendStructure($r1,this._applyWithArgs("token","{"),36);$vars.ss=this._appendStructure($r1,this._many(function(){var $r2=this._startStructure(41);$vars.s=this._appendStructure($r2,this._apply("srcElem"),44);this._appendStructure($r2,this._lookahead(function(){return this._forwardStructure(this._apply("srcElem"),48);}),46);$r2.value=$vars.s;return this._endStructure($r2);}),39);$vars.s=this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(53);$vars.r=this._appendStructure($r2,this._apply("expr"),56);this._appendStructure($r2,this._apply("sc"),58);$r2.value=["return",$vars.r];return this._endStructure($r2);},function(){return this._forwardStructure(this._apply("srcElem"),60);}),51);$vars.ss.push($vars.s);this._appendStructure($r1,this._applyWithArgs("token","}"),62);$r1.value=["send","call",["func",[],["begin"].concat($vars.ss)],["this"]];return this._endStructure($r1);}),21);return this._endStructure($r0);},
"semAction":function(){var $elf=this,$vars={},$r0=this._startStructure(64);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("curlySemAction"),67);},function(){var $r1=this._startStructure(69);$vars.r=this._appendStructure($r1,this._apply("primExpr"),72);this._appendStructure($r1,this._apply("spaces"),74);$r1.value=$vars.r;return this._endStructure($r1);}),65);return this._endStructure($r0);}});let BSOMetaParser=objectThatDelegatesTo(BaseStrParser,{
"enum":function(){var $elf=this,$vars={},$r0=this._startStructure(76);$vars.r=this._getStructureValue(this.anything());$vars.d=this._getStructureValue(this.anything());$vars.v=this._appendStructure($r0,this._applyWithArgs("listOf",$vars.r,$vars.d),81);this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._applyWithArgs("token",","),85);},function(){return this._forwardStructure(this._apply("empty"),87);}),83);$r0.value=$vars.v;return this._endStructure($r0);},
"space":function(){var $elf=this,$vars={},$r0=this._startStructure(89);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(BaseStrParser._superApplyWithArgs(this,"space"),92);},function(){return this._forwardStructure(this._applyWithArgs("fromTo","//","\n"),94);},function(){return this._forwardStructure(this._applyWithArgs("fromTo","/*","*/"),96);}),90);return this._endStructure($r0);},
"nameFirst":function(){var $elf=this,$vars={},$r0=this._startStructure(98);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this.exactly("_"),101);},function(){return this._forwardStructure(this.exactly("$"),103);},function(){return this._forwardStructure(this._apply("letter"),105);}),99);return this._endStructure($r0);},
"nameRest":function(){var $elf=this,$vars={},$r0=this._startStructure(107);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("nameFirst"),110);},function(){return this._forwardStructure(this._apply("digit"),112);}),108);return this._endStructure($r0);},
"tsName":function(){var $elf=this,$vars={},$r0=this._startStructure(114);$r0.value=this._appendStructure($r0,this._consumedBy(function(){var $r1=this._startStructure(117);this._appendStructure($r1,this._apply("nameFirst"),119);$r1.value=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("nameRest"),123);}),121);return this._endStructure($r1);}),115);return this._endStructure($r0);},
"name":function(){var $elf=this,$vars={},$r0=this._startStructure(125);this._appendStructure($r0,this._apply("spaces"),127);$r0.value=this._appendStructure($r0,this._apply("tsName"),129);return this._endStructure($r0);},
"hexDigit":function(){var $elf=this,$vars={},$r0=this._startStructure(131);$vars.x=this._appendStructure($r0,this._apply("char"),134);$vars.v=this["hexDigits"].indexOf($vars.x.toLowerCase());this._pred(($vars.v >= (0)));$r0.value=$vars.v;return this._endStructure($r0);},
"eChar":function(){var $elf=this,$vars={},$r0=this._startStructure(138);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(141);$vars.s=this._appendStructure($r1,this._consumedBy(function(){var $r2=this._startStructure(146);this._appendStructure($r2,this.exactly("\\"),148);$r2.value=this._appendStructure($r2,this._or(function(){var $r3=this._startStructure(152);this._appendStructure($r3,this.exactly("u"),154);this._appendStructure($r3,this._apply("hexDigit"),156);this._appendStructure($r3,this._apply("hexDigit"),158);this._appendStructure($r3,this._apply("hexDigit"),160);$r3.value=this._appendStructure($r3,this._apply("hexDigit"),162);return this._endStructure($r3);},function(){var $r3=this._startStructure(164);this._appendStructure($r3,this.exactly("x"),166);this._appendStructure($r3,this._apply("hexDigit"),168);$r3.value=this._appendStructure($r3,this._apply("hexDigit"),170);return this._endStructure($r3);},function(){return this._forwardStructure(this._apply("char"),172);}),150);return this._endStructure($r2);}),144);$r1.value=unescape($vars.s);return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("char"),174);}),139);return this._endStructure($r0);},
"tsString":function(){var $elf=this,$vars={},$r0=this._startStructure(176);this._appendStructure($r0,this.exactly("\'"),178);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(183);this._appendStructure($r1,this._not(function(){return this._forwardStructure(this.exactly("\'"),187);}),185);$r1.value=this._appendStructure($r1,this._apply("eChar"),189);return this._endStructure($r1);}),181);this._appendStructure($r0,this.exactly("\'"),191);$r0.value=$vars.xs.join("");return this._endStructure($r0);},
"characters":function(){var $elf=this,$vars={},$r0=this._startStructure(193);this._appendStructure($r0,this.exactly("`"),195);this._appendStructure($r0,this.exactly("`"),197);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(202);this._appendStructure($r1,this._not(function(){var $r2=this._startStructure(206);this._appendStructure($r2,this.exactly("\'"),208);$r2.value=this._appendStructure($r2,this.exactly("\'"),210);return this._endStructure($r2);}),204);$r1.value=this._appendStructure($r1,this._apply("eChar"),212);return this._endStructure($r1);}),200);this._appendStructure($r0,this.exactly("\'"),214);this._appendStructure($r0,this.exactly("\'"),216);$r0.value=[this._extractLocation($r0),"App","seq",jsValue("string",$vars.xs.join(""))];return this._endStructure($r0);},
"sCharacters":function(){var $elf=this,$vars={},$r0=this._startStructure(218);this._appendStructure($r0,this.exactly("\""),220);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(225);this._appendStructure($r1,this._not(function(){return this._forwardStructure(this.exactly("\""),229);}),227);$r1.value=this._appendStructure($r1,this._apply("eChar"),231);return this._endStructure($r1);}),223);this._appendStructure($r0,this.exactly("\""),233);$r0.value=[this._extractLocation($r0),"App","token",jsValue("string",$vars.xs.join(""))];return this._endStructure($r0);},
"string":function(){var $elf=this,$vars={},$r0=this._startStructure(235);$vars.xs=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(240);this._appendStructure($r1,this._or(function(){return this._forwardStructure(this.exactly("#"),244);},function(){return this._forwardStructure(this.exactly("`"),246);}),242);$r1.value=this._appendStructure($r1,this._apply("tsName"),248);return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("tsString"),250);}),238);$r0.value=[this._extractLocation($r0),"App","exactly",jsValue("string",$vars.xs)];return this._endStructure($r0);},
"number":function(){var $elf=this,$vars={},$r0=this._startStructure(252);$vars.n=this._appendStructure($r0,this._consumedBy(function(){var $r1=this._startStructure(257);this._appendStructure($r1,this._opt(function(){return this._forwardStructure(this.exactly("-"),261);}),259);$r1.value=this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("digit"),265);}),263);return this._endStructure($r1);}),255);$r0.value=[this._extractLocation($r0),"App","exactly",jsValue("number",$vars.n)];return this._endStructure($r0);},
"keyword":function(){var $elf=this,$vars={},$r0=this._startStructure(267);$vars.xs=this._getStructureValue(this.anything());this._appendStructure($r0,this._applyWithArgs("token",$vars.xs),270);this._appendStructure($r0,this._not(function(){return this._forwardStructure(this._apply("letterOrDigit"),274);}),272);$r0.value=$vars.xs;return this._endStructure($r0);},
"args":function(){var $elf=this,$vars={},$r0=this._startStructure(276);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(279);this._appendStructure($r1,this.exactly("("),281);$vars.xs=this._appendStructure($r1,this._applyWithArgs("listOf","hostExpr",","),284);this._appendStructure($r1,this._applyWithArgs("token",")"),286);$r1.value=$vars.xs;return this._endStructure($r1);},function(){var $r1=this._startStructure(288);this._appendStructure($r1,this._apply("empty"),290);$r1.value=[];return this._endStructure($r1);}),277);return this._endStructure($r0);},
"application":function(){var $elf=this,$vars={},$r0=this._startStructure(292);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(295);this._appendStructure($r1,this._applyWithArgs("token","^"),297);$vars.rule=this._appendStructure($r1,this._apply("name"),300);$vars.as=this._appendStructure($r1,this._apply("args"),303);$r1.value=[this._extractLocation($r1),"App","super",jsValue("string",$vars.rule)].concat($vars.as);return this._endStructure($r1);},function(){var $r1=this._startStructure(305);$vars.grm=this._appendStructure($r1,this._apply("name"),308);this._appendStructure($r1,this._applyWithArgs("token","."),310);$vars.rule=this._appendStructure($r1,this._apply("name"),313);$vars.as=this._appendStructure($r1,this._apply("args"),316);$r1.value=[this._extractLocation($r1),"App","foreign",jsCode(this["locals"],["get",$vars.grm]),jsValue("string",$vars.rule)].concat($vars.as);return this._endStructure($r1);},function(){var $r1=this._startStructure(318);$vars.rule=this._appendStructure($r1,this._apply("name"),321);$vars.as=this._appendStructure($r1,this._apply("args"),324);$r1.value=[this._extractLocation($r1),"App",$vars.rule].concat($vars.as);return this._endStructure($r1);}),293);return this._endStructure($r0);},
"hostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(326);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionParser,"expr"),329);$r0.value=jsCode(this["locals"],$vars.r);return this._endStructure($r0);},
"curlyHostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(331);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionParser,"curlySemAction"),334);$r0.value=jsCode(this["locals"],$vars.r);return this._endStructure($r0);},
"primHostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(336);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionParser,"semAction"),339);$r0.value=jsCode(this["locals"],$vars.r);return this._endStructure($r0);},
"atomicHostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(341);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("curlyHostExpr"),344);},function(){return this._forwardStructure(this._apply("primHostExpr"),346);}),342);return this._endStructure($r0);},
"semAction":function(){var $elf=this,$vars={},$r0=this._startStructure(348);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(350);$r1.value=($vars.x=this._appendStructure($r1,this._apply("curlyHostExpr"),353));return this._endStructure($r1);},function(){var $r1=this._startStructure(355);this._appendStructure($r1,this._applyWithArgs("token","!"),357);$r1.value=($vars.x=this._appendStructure($r1,this._apply("atomicHostExpr"),361));return this._endStructure($r1);}),349);return this._endStructure($r0);},
"arrSemAction":function(){var $elf=this,$vars={},$r0=this._startStructure(363);this._appendStructure($r0,this._applyWithArgs("token","->"),365);$r0.value=($vars.x=this._appendStructure($r0,this._apply("atomicHostExpr"),369));return this._endStructure($r0);},
"semPred":function(){var $elf=this,$vars={},$r0=this._startStructure(371);this._appendStructure($r0,this._applyWithArgs("token","?"),373);$vars.x=this._appendStructure($r0,this._apply("atomicHostExpr"),376);$r0.value=[this._extractLocation($r0),"Pred",$vars.x];return this._endStructure($r0);},
"expr":function(){var $elf=this,$vars={},$r0=this._startStructure(378);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(381);$vars.x=this._appendStructure($r1,this._applyWithArgs("expr5",true),384);$vars.xs=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(389);this._appendStructure($r2,this._applyWithArgs("token","|"),391);$r2.value=this._appendStructure($r2,this._applyWithArgs("expr5",true),393);return this._endStructure($r2);}),387);$r1.value=[this._extractLocation($r1),"Or",$vars.x].concat($vars.xs);return this._endStructure($r1);},function(){var $r1=this._startStructure(395);$vars.x=this._appendStructure($r1,this._applyWithArgs("expr5",true),398);$vars.xs=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(403);this._appendStructure($r2,this._applyWithArgs("token","||"),405);$r2.value=this._appendStructure($r2,this._applyWithArgs("expr5",true),407);return this._endStructure($r2);}),401);$r1.value=[this._extractLocation($r1),"XOr",$vars.x].concat($vars.xs);return this._endStructure($r1);},function(){return this._forwardStructure(this._applyWithArgs("expr5",false),409);}),379);return this._endStructure($r0);},
"expr5":function(){var $elf=this,$vars={},$r0=this._startStructure(411);$vars.ne=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(416);$vars.x=this._appendStructure($r1,this._apply("interleavePart"),419);$vars.xs=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(424);this._appendStructure($r2,this._applyWithArgs("token","&&"),426);$r2.value=this._appendStructure($r2,this._apply("interleavePart"),428);return this._endStructure($r2);}),422);$r1.value=[this._extractLocation($r1),"Interleave",$vars.x].concat($vars.xs);return this._endStructure($r1);},function(){return this._forwardStructure(this._applyWithArgs("expr4",$vars.ne),430);}),414);return this._endStructure($r0);},
"interleavePart":function(){var $elf=this,$vars={},$r0=this._startStructure(432);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(435);this._appendStructure($r1,this._applyWithArgs("token","("),437);$vars.part=this._appendStructure($r1,this._applyWithArgs("expr4",true),440);this._appendStructure($r1,this._applyWithArgs("token",")"),442);$r1.value=["1",$vars.part];return this._endStructure($r1);},function(){var $r1=this._startStructure(444);$vars.part=this._appendStructure($r1,this._applyWithArgs("expr4",true),447);$r1.value=this._appendStructure($r1,this._applyWithArgs("modedIPart",$vars.part),449);return this._endStructure($r1);}),433);return this._endStructure($r0);},
"modedIPart":function(){var $elf=this,$vars={},$r0=this._startStructure(451);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(454);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(458);this._appendStructure($r2,this.exactly("And"),460);$r2.value=this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(464);this._appendStructure($r3,this.exactly("Many"),466);$r3.value=($vars.part=this._getStructureValue(this.anything()));return this._endStructure($r3);}),462);return this._endStructure($r2);}),456);$r1.value=["*",$vars.part];return this._endStructure($r1);},function(){var $r1=this._startStructure(470);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(474);this._appendStructure($r2,this.exactly("And"),476);$r2.value=this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(480);this._appendStructure($r3,this.exactly("Many1"),482);$r3.value=($vars.part=this._getStructureValue(this.anything()));return this._endStructure($r3);}),478);return this._endStructure($r2);}),472);$r1.value=["+",$vars.part];return this._endStructure($r1);},function(){var $r1=this._startStructure(486);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(490);this._appendStructure($r2,this.exactly("And"),492);$r2.value=this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(496);this._appendStructure($r3,this.exactly("Opt"),498);$r3.value=($vars.part=this._getStructureValue(this.anything()));return this._endStructure($r3);}),494);return this._endStructure($r2);}),488);$r1.value=["?",$vars.part];return this._endStructure($r1);},function(){var $r1=this._startStructure(502);$vars.part=this._getStructureValue(this.anything());$r1.value=["1",$vars.part];return this._endStructure($r1);}),452);return this._endStructure($r0);},
"expr4":function(){var $elf=this,$vars={},$r0=this._startStructure(505);$vars.ne=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(510);$vars.xs=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("expr3"),515);}),513);$vars.act=this._appendStructure($r1,this._apply("arrSemAction"),518);$r1.value=[this._extractLocation($r1),"And"].concat($vars.xs).concat([$vars.act]);return this._endStructure($r1);},function(){var $r1=this._startStructure(520);this._pred($vars.ne);$vars.xs=this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("expr3"),526);}),524);$r1.value=[this._extractLocation($r1),"And"].concat($vars.xs);return this._endStructure($r1);},function(){var $r1=this._startStructure(528);this._pred(($vars.ne == false));$vars.xs=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("expr3"),534);}),532);$r1.value=[this._extractLocation($r1),"And"].concat($vars.xs);return this._endStructure($r1);}),508);return this._endStructure($r0);},
"optIter":function(){var $elf=this,$vars={},$r0=this._startStructure(536);$vars.x=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(541);this._appendStructure($r1,this.exactly("*"),543);$r1.value=[this._extractLocation($r1),"Many",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(545);this._appendStructure($r1,this.exactly("+"),547);$r1.value=[this._extractLocation($r1),"Many1",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(549);this._appendStructure($r1,this.exactly("?"),551);$r1.value=[this._extractLocation($r1),"Opt",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(553);this._appendStructure($r1,this._apply("empty"),555);$r1.value=$vars.x;return this._endStructure($r1);}),539);return this._endStructure($r0);},
"optBind":function(){var $elf=this,$vars={},$r0=this._startStructure(557);$vars.x=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(562);this._appendStructure($r1,this.exactly(":"),564);$vars.n=this._appendStructure($r1,this._apply("name"),567);$r1.value=(function (){(this["locals"][$vars.n]=true);return [this._extractLocation($r1),"Set",$vars.n,$vars.x];}).call(this);return this._endStructure($r1);},function(){var $r1=this._startStructure(569);this._appendStructure($r1,this._apply("empty"),571);$r1.value=$vars.x;return this._endStructure($r1);}),560);return this._endStructure($r0);},
"expr3":function(){var $elf=this,$vars={},$r0=this._startStructure(573);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(576);this._appendStructure($r1,this._applyWithArgs("token",":"),578);$vars.n=this._appendStructure($r1,this._apply("name"),581);$r1.value=(function (){(this["locals"][$vars.n]=true);return [this._extractLocation($r1),"Set",$vars.n,[null,"PopArg"]];}).call(this);return this._endStructure($r1);},function(){var $r1=this._startStructure(583);$vars.e=this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(588);$vars.x=this._appendStructure($r2,this._apply("expr2"),591);$r2.value=this._appendStructure($r2,this._applyWithArgs("optIter",$vars.x),593);return this._endStructure($r2);},function(){return this._forwardStructure(this._apply("semAction"),595);}),586);$r1.value=this._appendStructure($r1,this._applyWithArgs("optBind",$vars.e),597);return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("semPred"),599);}),574);return this._endStructure($r0);},
"expr2":function(){var $elf=this,$vars={},$r0=this._startStructure(601);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(604);this._appendStructure($r1,this._applyWithArgs("token","~"),606);$vars.x=this._appendStructure($r1,this._apply("expr2"),609);$r1.value=[this._extractLocation($r1),"Not",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(611);this._appendStructure($r1,this._applyWithArgs("token","&"),613);$vars.x=this._appendStructure($r1,this._apply("expr1"),616);$r1.value=[this._extractLocation($r1),"Lookahead",$vars.x];return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("expr1"),618);}),602);return this._endStructure($r0);},
"expr1":function(){var $elf=this,$vars={},$r0=this._startStructure(620);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("application"),623);},function(){var $r1=this._startStructure(625);$vars.x=this._appendStructure($r1,this._or(function(){return this._forwardStructure(this._applyWithArgs("keyword","undefined"),630);},function(){return this._forwardStructure(this._applyWithArgs("keyword","nil"),632);},function(){return this._forwardStructure(this._applyWithArgs("keyword","true"),634);},function(){return this._forwardStructure(this._applyWithArgs("keyword","false"),636);}),628);$r1.value=[this._extractLocation($r1),"App","exactly",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(638);this._appendStructure($r1,this._apply("spaces"),640);$r1.value=this._appendStructure($r1,this._or(function(){return this._forwardStructure(this._apply("characters"),644);},function(){return this._forwardStructure(this._apply("sCharacters"),646);},function(){return this._forwardStructure(this._apply("string"),648);},function(){return this._forwardStructure(this._apply("number"),650);}),642);return this._endStructure($r1);},function(){var $r1=this._startStructure(652);this._appendStructure($r1,this._applyWithArgs("token","["),654);$vars.x=this._appendStructure($r1,this._apply("expr"),657);this._appendStructure($r1,this._applyWithArgs("token","]"),659);$r1.value=[this._extractLocation($r1),"Form",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(661);this._appendStructure($r1,this._applyWithArgs("token","<"),663);$vars.x=this._appendStructure($r1,this._apply("expr"),666);this._appendStructure($r1,this._applyWithArgs("token",">"),668);$r1.value=[this._extractLocation($r1),"ConsBy",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(670);this._appendStructure($r1,this._applyWithArgs("token","@<"),672);$vars.x=this._appendStructure($r1,this._apply("expr"),675);this._appendStructure($r1,this._applyWithArgs("token",">"),677);$r1.value=[this._extractLocation($r1),"IdxConsBy",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(679);this._appendStructure($r1,this._applyWithArgs("token","("),681);$vars.x=this._appendStructure($r1,this._apply("expr"),684);this._appendStructure($r1,this._applyWithArgs("token",")"),686);$r1.value=$vars.x;return this._endStructure($r1);}),621);return this._endStructure($r0);},
"ruleName":function(){var $elf=this,$vars={},$r0=this._startStructure(688);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("name"),691);},function(){var $r1=this._startStructure(693);this._appendStructure($r1,this._apply("spaces"),695);$r1.value=this._appendStructure($r1,this._apply("tsString"),697);return this._endStructure($r1);}),689);return this._endStructure($r0);},
"rule":function(){var $elf=this,$vars={},$r0=this._startStructure(699);this._appendStructure($r0,this._lookahead(function(){var $r1=this._startStructure(702);$r1.value=($vars.n=this._appendStructure($r1,this._apply("ruleName"),705));return this._endStructure($r1);}),701);(this["locals"]=({}));$vars.x=this._appendStructure($r0,this._applyWithArgs("rulePart",$vars.n),708);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(713);this._appendStructure($r1,this._applyWithArgs("token",","),715);$r1.value=this._appendStructure($r1,this._applyWithArgs("rulePart",$vars.n),717);return this._endStructure($r1);}),711);$r0.value=[this._extractLocation($r0),"Rule",$vars.n,[this._extractLocation($r0),"Or",$vars.x].concat($vars.xs)];return this._endStructure($r0);},
"rulePart":function(){var $elf=this,$vars={},$r0=this._startStructure(719);$vars.rn=this._getStructureValue(this.anything());$vars.n=this._appendStructure($r0,this._apply("ruleName"),723);this._pred(($vars.n == $vars.rn));$vars.b1=this._appendStructure($r0,this._applyWithArgs("expr4",false),727);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(731);this._appendStructure($r1,this._applyWithArgs("token","="),733);$vars.b2=this._appendStructure($r1,this._apply("expr"),736);$r1.value=[this._extractLocation($r1),"And",$vars.b1,$vars.b2];return this._endStructure($r1);},function(){var $r1=this._startStructure(738);this._appendStructure($r1,this._apply("empty"),740);$r1.value=$vars.b1;return this._endStructure($r1);}),729);return this._endStructure($r0);},
"grammar":function(){var $elf=this,$vars={},$r0=this._startStructure(742);this._appendStructure($r0,this._applyWithArgs("keyword","ometa"),744);$vars.sn=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(749);this._appendStructure($r1,this._applyWithArgs("token","("),751);$vars.sni=this._appendStructure($r1,this._apply("name"),754);this._appendStructure($r1,this._applyWithArgs("token",")"),756);$r1.value=$vars.sni;return this._endStructure($r1);},function(){var $r1=this._startStructure(758);this._appendStructure($r1,this._apply("empty"),760);$r1.value="OMeta";return this._endStructure($r1);}),747);this._appendStructure($r0,this._applyWithArgs("token","{"),762);$vars.rs=this._appendStructure($r0,this._applyWithArgs("enum","rule",","),765);this._appendStructure($r0,this._applyWithArgs("token","}"),767);$r0.value=this._appendStructure($r0,this._applyWithArgs("foreign",BSOMetaOptimizer,"optimizeGrammar",["Grammar",$vars.sn].concat($vars.rs)),769);return this._endStructure($r0);}});(BSOMetaParser["hexDigits"]="0123456789abcdef");let BSSemActionTranslator=objectThatDelegatesTo(BSJSTranslator,{
"Location":function(){var $elf=this,$vars={},$r0=this._startStructure(771);$r0.value=["this._extractLocation($r",this["_storeVal"],")"].join("");return this._endStructure($r0);},
"get":function(){var $elf=this,$vars={},$r0=this._startStructure(773);$vars.n=this._getStructureValue(this.anything());$r0.value=this._renameVariable($vars.n);return this._endStructure($r0);},
"name":function(){var $elf=this,$vars={},$r0=this._startStructure(776);$vars.n=this._getStructureValue(this.anything());$r0.value=this._renameVariable($vars.n);return this._endStructure($r0);},
"jstrans":function(){var $elf=this,$vars={},$r0=this._startStructure(779);$vars.storeVal=this._getStructureValue(this.anything());$vars.toRename=this._getStructureValue(this.anything());(function (){(this["_storeVal"]=$vars.storeVal);return (this["_toRename"]=$vars.toRename);}).call(this);$r0.value=this._appendStructure($r0,this._apply("trans"),783);return this._endStructure($r0);}});(BSSemActionTranslator["_renameVariable"]=(function (name){if(((name != "$elf") && this["_toRename"][name])){return ("$vars." + name);}else{undefined;}return name;}));let BSOMetaTranslator=objectThatDelegatesTo(OMeta,{
"App":function(){var $elf=this,$vars={},$r0=this._startStructure(785);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(788);this._appendStructure($r1,this.exactly("super"),790);$vars.args=this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("transFn"),795);}),793);$r1.value=[this["sName"],"._superApplyWithArgs(this,",$vars.args.join(","),")"].join("");return this._endStructure($r1);},function(){var $r1=this._startStructure(797);$vars.rule=this._getStructureValue(this.anything());$vars.args=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("transFn"),803);}),801);$r1.value=this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(807);this._pred(this._optimizedCall($vars.rule,$vars.args));$r2.value=["this.",this["_callables"][$vars.rule]["name"],"(",$vars.args.join(","),")"].join("");return this._endStructure($r2);},function(){var $r2=this._startStructure(810);this._pred(($vars.args["length"] < (1)));$r2.value=["this._apply(\"",$vars.rule,"\")"].join("");return this._endStructure($r2);},function(){var $r2=this._startStructure(806);$r2.value=["this._applyWithArgs(\"",$vars.rule,"\",",$vars.args.join(","),")"].join("");return this._endStructure($r2);}),805);return this._endStructure($r1);}),786);return this._endStructure($r0);},
"Pred":function(){var $elf=this,$vars={},$r0=this._startStructure(814);$vars.expr=this._appendStructure($r0,this._apply("transFn"),817);$r0.value=["this._pred(",$vars.expr,")"].join("");return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(819);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("transFn"),824);}),822);$r0.value=["this._or(",$vars.xs.join(","),")"].join("");return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(826);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("transFn"),831);}),829);$vars.xs.unshift(this["rName"].toProgramString());$r0.value=["this._xor(",$vars.xs.join(","),")"].join("");return this._endStructure($r0);},
"And":function(){var $elf=this,$vars={},$r0=this._startStructure(833);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(836);$vars.xs=this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("transFn"),841);}),839);$r1.value=$vars.xs.join(";");return this._endStructure($r1);},function(){var $r1=this._startStructure(835);$r1.value="undefined";return this._endStructure($r1);}),834);return this._endStructure($r0);},
"Opt":function(){var $elf=this,$vars={},$r0=this._startStructure(844);$vars.x=this._appendStructure($r0,this._apply("transFn"),847);$r0.value=["this._opt(",$vars.x,")"].join("");return this._endStructure($r0);},
"Many":function(){var $elf=this,$vars={},$r0=this._startStructure(849);$vars.x=this._appendStructure($r0,this._apply("transFn"),852);$r0.value=["this._many(",$vars.x,")"].join("");return this._endStructure($r0);},
"Many1":function(){var $elf=this,$vars={},$r0=this._startStructure(854);$vars.x=this._appendStructure($r0,this._apply("transFn"),857);$r0.value=["this._many1(",$vars.x,")"].join("");return this._endStructure($r0);},
"Set":function(){var $elf=this,$vars={},$r0=this._startStructure(859);$vars.n=this._getStructureValue(this.anything());$vars.v=this._appendStructure($r0,this._apply("transFn"),863);$r0.value=["$vars.",$vars.n,"=",$vars.v].join("");return this._endStructure($r0);},
"Not":function(){var $elf=this,$vars={},$r0=this._startStructure(865);$vars.x=this._appendStructure($r0,this._apply("transFn"),868);$r0.value=["this._not(",$vars.x,")"].join("");return this._endStructure($r0);},
"Lookahead":function(){var $elf=this,$vars={},$r0=this._startStructure(870);$vars.x=this._appendStructure($r0,this._apply("transFn"),873);$r0.value=["this._lookahead(",$vars.x,")"].join("");return this._endStructure($r0);},
"Form":function(){var $elf=this,$vars={},$r0=this._startStructure(875);$vars.x=this._appendStructure($r0,this._apply("transFn"),878);$r0.value=["this._form(",$vars.x,")"].join("");return this._endStructure($r0);},
"ConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(880);$vars.x=this._appendStructure($r0,this._apply("transFn"),883);$r0.value=["this._consumedBy(",$vars.x,")"].join("");return this._endStructure($r0);},
"IdxConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(885);$vars.x=this._appendStructure($r0,this._apply("transFn"),888);$r0.value=["this._idxConsumedBy(",$vars.x,")"].join("");return this._endStructure($r0);},
"JumpTable":function(){var $elf=this,$vars={},$r0=this._startStructure(890);this["_storeVar"]++;$vars.cases=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("jtCase"),895);}),893);this["_storeVar"]--;$r0.value=this.jumpTableCode($vars.cases);return this._endStructure($r0);},
"Interleave":function(){var $elf=this,$vars={},$r0=this._startStructure(897);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("intPart"),902);}),900);$r0.value=["this._interleave(",$vars.xs.join(","),")"].join("");return this._endStructure($r0);},
"Function":function(){var $elf=this,$vars={},$r0=this._startStructure(904);this["_storeVar"]++;$vars.x=this._appendStructure($r0,this._apply("transFn"),907);this["_storeVar"]--;$r0.value=["function(){",$vars.x,";}"].join("");return this._endStructure($r0);},
"FunctionStructure":function(){var $elf=this,$vars={},$r0=this._startStructure(909);this["_storeVar"]++;$vars.xs=this._appendStructure($r0,this._many1(function(){return this._forwardStructure(this._apply("transFn"),914);}),912);this["_storeVar"]--;$r0.value=["function(){var $r",(this["_storeVar"] + (1)),"=this._startStructure(",this.getLocationId(),");",$vars.xs.join(";"),";return this._endStructure($r",(this["_storeVar"] + (1)),");}"].join("");return this._endStructure($r0);},
"ReturnStructure":function(){var $elf=this,$vars={},$r0=this._startStructure(916);$vars.x=this._appendStructure($r0,this._apply("transFn"),919);$r0.value=["$r",this["_storeVar"],".value=",$vars.x].join("");return this._endStructure($r0);},
"Return":function(){var $elf=this,$vars={},$r0=this._startStructure(921);$vars.x=this._appendStructure($r0,this._apply("transFn"),924);$r0.value=["return this._forwardStructure(",$vars.x,",",this.getLocationId(),")"].join("");return this._endStructure($r0);},
"Parenthesis":function(){var $elf=this,$vars={},$r0=this._startStructure(926);$vars.x=this._appendStructure($r0,this._apply("transFn"),929);$r0.value=["(",$vars.x,")"].join("");return this._endStructure($r0);},
"Store":function(){var $elf=this,$vars={},$r0=this._startStructure(931);$vars.x=this._appendStructure($r0,this._apply("transFn"),934);$r0.value=["this._appendStructure($r",this["_storeVar"],",",$vars.x,",",this.getLocationId(),")"].join("");return this._endStructure($r0);},
"Js":function(){var $elf=this,$vars={},$r0=this._startStructure(936);$vars.locals=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._applyWithArgs("transJs",$vars.locals),939);return this._endStructure($r0);},
"PopArg":function(){var $elf=this,$vars={},$r0=this._startStructure(941);$r0.value="this._getStructureValue(this.anything())";return this._endStructure($r0);},
"Rule":function(){var $elf=this,$vars={},$r0=this._startStructure(943);$vars.name=this._getStructureValue(this.anything());(function (){(this["rName"]=$vars.name);return (this["_storeVar"]=(0));}).call(this);$vars.body=this._appendStructure($r0,this._apply("trans"),947);$r0.value=["\n\"",$vars.name,"\":function(){var $elf=this,","$vars={},","$r0=this._startStructure(",this.getLocationId(),");",$vars.body,";return this._endStructure($r0);}"].join("");return this._endStructure($r0);},
"Grammar":function(){var $elf=this,$vars={},$r0=this._startStructure(949);$vars.sName=this._getStructureValue(this.anything());(function (){(this["sName"]=$vars.sName);return (this["_locations"]=[]);}).call(this);$vars.rules=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("trans"),955);}),953);$r0.value=["objectThatDelegatesTo(",$vars.sName,",{",$vars.rules.join(","),"})"].join("");return this._endStructure($r0);},
"intPart":function(){var $elf=this,$vars={},$r0=this._startStructure(957);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(961);$vars.mode=this._getStructureValue(this.anything());$r1.value=($vars.part=this._appendStructure($r1,this._apply("transFn"),966));return this._endStructure($r1);}),959);$r0.value=(($vars.mode.toProgramString() + ",") + $vars.part);return this._endStructure($r0);},
"jtCase":function(){var $elf=this,$vars={},$r0=this._startStructure(968);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(972);$vars.x=this._getStructureValue(this.anything());$r1.value=($vars.e=this._appendStructure($r1,this._apply("trans"),977));return this._endStructure($r1);}),970);$r0.value=[$vars.x.toProgramString(),$vars.e];return this._endStructure($r0);},
"transJs":function(){var $elf=this,$vars={},$r0=this._startStructure(979);$vars.locals=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionTranslator,"jstrans",this["_storeVar"],$vars.locals),982);return this._endStructure($r0);},
"trans":function(){var $elf=this,$vars={},$r0=this._startStructure(984);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(988);$vars.loc=this._getStructureValue(this.anything());$vars.t=this._getStructureValue(this.anything());this.pushLocation($vars.loc);$vars.ans=this._appendStructure($r1,this._apply($vars.t),993);$r1.value=this.popLocation();return this._endStructure($r1);}),986);$r0.value=$vars.ans;return this._endStructure($r0);},
"transFn":function(){var $elf=this,$vars={},$r0=this._startStructure(995);$vars.x=this._appendStructure($r0,this._apply("trans"),998);$r0.value=$vars.x;return this._endStructure($r0);}});(BSOMetaTranslator["_callables"]=({"anything": ({"name": "anything","nbArgs": (0)}),"apply": ({"name": "_apply","nbArgs": (1)}),"end": ({"name": "end","nbArgs": (0)}),"exactly": ({"name": "exactly","nbArgs": (1)}),"seq": ({"name": "seq","nbArgs": (1)})}));(BSOMetaTranslator["_optimizedCall"]=(function (rule,args){let c=this["_callables"][rule];return (c && (c["nbArgs"] == args["length"]));}));(BSOMetaTranslator["jumpTableCode"]=(function (cases){var buf=new StringBuffer();buf.nextPutAll((("(function(){var $r" + (this["_storeVar"] + (1))) + "=this._startStructure(-1);"));buf.nextPutAll((("switch(this._appendStructure($r" + (this["_storeVar"] + (1))) + ",this._apply(\'anything\'))){"));for(var i=(0);(i < cases["length"]);(i+=(1))){buf.nextPutAll((((("case " + cases[i][(0)]) + ":") + cases[i][(1)]) + ";break;"));}buf.nextPutAll((("default: throw fail}return this._endStructure($r" + (this["_storeVar"] + (1))) + ");}).call(this)"));return buf.contents();}));(BSOMetaTranslator["pushLocation"]=(function (location){if((location != null)){let locationId=createSourceMapId();addToSourseMap(locationId,location["start"],location["stop"]);this["_locations"].push(locationId);}else{this["_locations"].push(this["_locations"][(this["_locations"]["length"] - (1))]);};}));(BSOMetaTranslator["popLocation"]=(function (){this["_locations"].pop();}));(BSOMetaTranslator["getLocationId"]=(function (){return this["_locations"][(this["_locations"]["length"] - (1))];}))


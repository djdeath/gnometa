// This file was generated using Gnometa
// https://github.com/djdeath/gnometa
let BSSemActionParser=objectThatDelegatesTo(BSJSParser,{
"jsOmetaKeyword":function(){var $elf=this,$vars={},$r0=this._startStructure(1, true);$vars.k=this._getStructureValue(this.anything());this._appendStructure($r0,this._apply("spaces"),4);this._appendStructure($r0,this.exactly("@"),6);$vars.n=this._appendStructure($r0,this._apply("iName"),9);this._pred(($vars.k == $vars.n));$r0.value=$vars.k;return this._endStructure($r0);},
"primExprHd":function(){var $elf=this,$vars={},$r0=this._startStructure(14, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(17);this._appendStructure($r1,this._applyWithArgs("jsOmetaKeyword","location"),19);$r1.value=["Location"];return this._endStructure($r1);},function(){return this._forwardStructure(BSJSParser._superApplyWithArgs(this,"primExprHd"),23);}),15);return this._endStructure($r0);},
"curlySemAction":function(){var $elf=this,$vars={},$r0=this._startStructure(25, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(28);this._appendStructure($r1,this._applyWithArgs("token","{"),30);$vars.r=this._appendStructure($r1,this._apply("expr"),33);this._appendStructure($r1,this._apply("sc"),35);this._appendStructure($r1,this._applyWithArgs("token","}"),37);$r1.value=$vars.r;return this._endStructure($r1);},function(){var $r1=this._startStructure(40);this._appendStructure($r1,this._applyWithArgs("token","{"),42);$vars.ss=this._appendStructure($r1,this._many(function(){var $r2=this._startStructure(47);$vars.s=this._appendStructure($r2,this._apply("srcElem"),50);this._appendStructure($r2,this._lookahead(function(){return this._forwardStructure(this._apply("srcElem"),54);}),52);$r2.value=$vars.s;return this._endStructure($r2);}),45);$vars.s=this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(60);$vars.r=this._appendStructure($r2,this._apply("expr"),63);this._appendStructure($r2,this._apply("sc"),65);$r2.value=["return",$vars.r];return this._endStructure($r2);},function(){return this._forwardStructure(this._apply("srcElem"),68);}),58);$vars.ss.push($vars.s);this._appendStructure($r1,this._applyWithArgs("token","}"),71);$r1.value=["send","call",["func",[],["begin"].concat($vars.ss)],["this"]];return this._endStructure($r1);}),26);return this._endStructure($r0);},
"semAction":function(){var $elf=this,$vars={},$r0=this._startStructure(74, true);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("curlySemAction"),77);},function(){var $r1=this._startStructure(79);$vars.r=this._appendStructure($r1,this._apply("primExpr"),82);this._appendStructure($r1,this._apply("spaces"),84);$r1.value=$vars.r;return this._endStructure($r1);}),75);return this._endStructure($r0);}});let BSOMetaParser=objectThatDelegatesTo(BaseStrParser,{
"space":function(){var $elf=this,$vars={},$r0=this._startStructure(88, true);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(BaseStrParser._superApplyWithArgs(this,"space"),91);},function(){return this._forwardStructure(this._applyWithArgs("fromTo","//","\n"),93);},function(){return this._forwardStructure(this._applyWithArgs("fromTo","/*","*/"),97);}),89);return this._endStructure($r0);},
"nameFirst":function(){var $elf=this,$vars={},$r0=this._startStructure(101, true);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this.exactly("_"),104);},function(){return this._forwardStructure(this.exactly("$"),106);},function(){return this._forwardStructure(this._apply("letter"),108);}),102);return this._endStructure($r0);},
"nameRest":function(){var $elf=this,$vars={},$r0=this._startStructure(110, true);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("nameFirst"),113);},function(){return this._forwardStructure(this._apply("digit"),115);}),111);return this._endStructure($r0);},
"tsName":function(){var $elf=this,$vars={},$r0=this._startStructure(117, true);$r0.value=this._appendStructure($r0,this._consumedBy(function(){var $r1=this._startStructure(120);this._appendStructure($r1,this._apply("nameFirst"),122);$r1.value=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("nameRest"),126);}),124);return this._endStructure($r1);}),118);return this._endStructure($r0);},
"name":function(){var $elf=this,$vars={},$r0=this._startStructure(128, true);this._appendStructure($r0,this._apply("spaces"),130);$r0.value=this._appendStructure($r0,this._apply("tsName"),132);return this._endStructure($r0);},
"hexDigit":function(){var $elf=this,$vars={},$r0=this._startStructure(134, true);$vars.x=this._appendStructure($r0,this._apply("char"),137);$vars.v=this["hexDigits"].indexOf($vars.x.toLowerCase());this._pred(($vars.v >= (0)));$r0.value=$vars.v;return this._endStructure($r0);},
"eChar":function(){var $elf=this,$vars={},$r0=this._startStructure(144, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(147);$vars.s=this._appendStructure($r1,this._consumedBy(function(){var $r2=this._startStructure(152);this._appendStructure($r2,this.exactly("\\"),154);$r2.value=this._appendStructure($r2,this._or(function(){var $r3=this._startStructure(158);this._appendStructure($r3,this.exactly("u"),160);this._appendStructure($r3,this._apply("hexDigit"),162);this._appendStructure($r3,this._apply("hexDigit"),164);this._appendStructure($r3,this._apply("hexDigit"),166);$r3.value=this._appendStructure($r3,this._apply("hexDigit"),168);return this._endStructure($r3);},function(){var $r3=this._startStructure(170);this._appendStructure($r3,this.exactly("x"),172);this._appendStructure($r3,this._apply("hexDigit"),174);$r3.value=this._appendStructure($r3,this._apply("hexDigit"),176);return this._endStructure($r3);},function(){return this._forwardStructure(this._apply("char"),178);}),156);return this._endStructure($r2);}),150);$r1.value=unescape($vars.s);return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("char"),181);}),145);return this._endStructure($r0);},
"tsString":function(){var $elf=this,$vars={},$r0=this._startStructure(183, true);this._appendStructure($r0,this.exactly("\'"),185);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(190);this._appendStructure($r1,this._not(function(){return this._forwardStructure(this.exactly("\'"),194);}),192);$r1.value=this._appendStructure($r1,this._apply("eChar"),196);return this._endStructure($r1);}),188);this._appendStructure($r0,this.exactly("\'"),198);$r0.value=$vars.xs.join("");return this._endStructure($r0);},
"characters":function(){var $elf=this,$vars={},$r0=this._startStructure(201, true);this._appendStructure($r0,this.exactly("`"),203);this._appendStructure($r0,this.exactly("`"),205);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(210);this._appendStructure($r1,this._not(function(){var $r2=this._startStructure(214);this._appendStructure($r2,this.exactly("\'"),216);$r2.value=this._appendStructure($r2,this.exactly("\'"),218);return this._endStructure($r2);}),212);$r1.value=this._appendStructure($r1,this._apply("eChar"),220);return this._endStructure($r1);}),208);this._appendStructure($r0,this.exactly("\'"),222);this._appendStructure($r0,this.exactly("\'"),224);$r0.value=[this._extractLocation($r0),"App","seq",jsValue("string",$vars.xs.join(""))];return this._endStructure($r0);},
"sCharacters":function(){var $elf=this,$vars={},$r0=this._startStructure(227, true);this._appendStructure($r0,this.exactly("\""),229);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(234);this._appendStructure($r1,this._not(function(){return this._forwardStructure(this.exactly("\""),238);}),236);$r1.value=this._appendStructure($r1,this._apply("eChar"),240);return this._endStructure($r1);}),232);this._appendStructure($r0,this.exactly("\""),242);$r0.value=[this._extractLocation($r0),"App","token",jsValue("string",$vars.xs.join(""))];return this._endStructure($r0);},
"string":function(){var $elf=this,$vars={},$r0=this._startStructure(245, true);$vars.xs=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(250);this._appendStructure($r1,this._or(function(){return this._forwardStructure(this.exactly("#"),254);},function(){return this._forwardStructure(this.exactly("`"),256);}),252);$r1.value=this._appendStructure($r1,this._apply("tsName"),258);return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("tsString"),260);}),248);$r0.value=[this._extractLocation($r0),"App","exactly",jsValue("string",$vars.xs)];return this._endStructure($r0);},
"number":function(){var $elf=this,$vars={},$r0=this._startStructure(263, true);$vars.n=this._appendStructure($r0,this._consumedBy(function(){var $r1=this._startStructure(268);this._appendStructure($r1,this._opt(function(){return this._forwardStructure(this.exactly("-"),272);}),270);$r1.value=this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("digit"),276);}),274);return this._endStructure($r1);}),266);$r0.value=[this._extractLocation($r0),"App","exactly",jsValue("number",$vars.n)];return this._endStructure($r0);},
"keyword":function(){var $elf=this,$vars={},$r0=this._startStructure(279, true);$vars.xs=this._getStructureValue(this.anything());this._appendStructure($r0,this._applyWithArgs("token",$vars.xs),282);this._appendStructure($r0,this._not(function(){return this._forwardStructure(this._apply("letterOrDigit"),287);}),285);$r0.value=$vars.xs;return this._endStructure($r0);},
"args":function(){var $elf=this,$vars={},$r0=this._startStructure(290, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(293);this._appendStructure($r1,this.exactly("("),295);$vars.xs=this._appendStructure($r1,this._applyWithArgs("listOf","hostExpr",","),298);this._appendStructure($r1,this._applyWithArgs("token",")"),302);$r1.value=$vars.xs;return this._endStructure($r1);},function(){var $r1=this._startStructure(305);this._appendStructure($r1,this._apply("empty"),307);$r1.value=[];return this._endStructure($r1);}),291);return this._endStructure($r0);},
"application":function(){var $elf=this,$vars={},$r0=this._startStructure(310, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(313);this._appendStructure($r1,this._applyWithArgs("token","^"),315);$vars.rule=this._appendStructure($r1,this._apply("name"),318);$vars.as=this._appendStructure($r1,this._apply("args"),321);$r1.value=[this._extractLocation($r1),"App","super",jsValue("string",$vars.rule)].concat($vars.as);return this._endStructure($r1);},function(){var $r1=this._startStructure(324);$vars.grm=this._appendStructure($r1,this._apply("name"),327);this._appendStructure($r1,this._applyWithArgs("token","."),329);$vars.rule=this._appendStructure($r1,this._apply("name"),332);$vars.as=this._appendStructure($r1,this._apply("args"),335);$r1.value=[this._extractLocation($r1),"App","foreign",jsCode(this._extractLocation($r1),this["locals"],["get",$vars.grm]),jsValue("string",$vars.rule)].concat($vars.as);return this._endStructure($r1);},function(){var $r1=this._startStructure(338);$vars.rule=this._appendStructure($r1,this._apply("name"),341);$vars.as=this._appendStructure($r1,this._apply("args"),344);$r1.value=[this._extractLocation($r1),"App",$vars.rule].concat($vars.as);return this._endStructure($r1);}),311);return this._endStructure($r0);},
"hostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(347, true);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionParser,"expr"),350);$r0.value=jsCode(this._extractLocation($r0),this["locals"],$vars.r);return this._endStructure($r0);},
"curlyHostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(354, true);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionParser,"curlySemAction"),357);$r0.value=jsCode(this._extractLocation($r0),this["locals"],$vars.r);return this._endStructure($r0);},
"primHostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(361, true);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionParser,"semAction"),364);$r0.value=jsCode(this._extractLocation($r0),this["locals"],$vars.r);return this._endStructure($r0);},
"atomicHostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(368, true);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("curlyHostExpr"),371);},function(){return this._forwardStructure(this._apply("primHostExpr"),373);}),369);return this._endStructure($r0);},
"semAction":function(){var $elf=this,$vars={},$r0=this._startStructure(375, true);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("curlyHostExpr"),378);},function(){var $r1=this._startStructure(380);this._appendStructure($r1,this._applyWithArgs("token","!"),382);$r1.value=this._appendStructure($r1,this._apply("atomicHostExpr"),384);return this._endStructure($r1);}),376);return this._endStructure($r0);},
"arrSemAction":function(){var $elf=this,$vars={},$r0=this._startStructure(386, true);this._appendStructure($r0,this._applyWithArgs("token","->"),388);$r0.value=this._appendStructure($r0,this._apply("atomicHostExpr"),390);return this._endStructure($r0);},
"semPred":function(){var $elf=this,$vars={},$r0=this._startStructure(392, true);this._appendStructure($r0,this._applyWithArgs("token","?"),394);$vars.x=this._appendStructure($r0,this._apply("atomicHostExpr"),397);$r0.value=[this._extractLocation($r0),"Pred",$vars.x];return this._endStructure($r0);},
"expr":function(){var $elf=this,$vars={},$r0=this._startStructure(400, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(403);$vars.x=this._appendStructure($r1,this._applyWithArgs("expr5",true),406);$vars.xs=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(412);this._appendStructure($r2,this._applyWithArgs("token","|"),414);$r2.value=this._appendStructure($r2,this._applyWithArgs("expr5",true),416);return this._endStructure($r2);}),410);$r1.value=[this._extractLocation($r1),"Or",$vars.x].concat($vars.xs);return this._endStructure($r1);},function(){var $r1=this._startStructure(420);$vars.x=this._appendStructure($r1,this._applyWithArgs("expr5",true),423);$vars.xs=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(429);this._appendStructure($r2,this._applyWithArgs("token","||"),431);$r2.value=this._appendStructure($r2,this._applyWithArgs("expr5",true),433);return this._endStructure($r2);}),427);$r1.value=[this._extractLocation($r1),"XOr",$vars.x].concat($vars.xs);return this._endStructure($r1);},function(){return this._forwardStructure(this._applyWithArgs("expr5",false),437);}),401);return this._endStructure($r0);},
"expr5":function(){var $elf=this,$vars={},$r0=this._startStructure(440, true);$vars.ne=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(445);$vars.x=this._appendStructure($r1,this._apply("interleavePart"),448);$vars.xs=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(453);this._appendStructure($r2,this._applyWithArgs("token","&&"),455);$r2.value=this._appendStructure($r2,this._apply("interleavePart"),457);return this._endStructure($r2);}),451);$r1.value=[this._extractLocation($r1),"Interleave",$vars.x].concat($vars.xs);return this._endStructure($r1);},function(){return this._forwardStructure(this._applyWithArgs("expr4",$vars.ne),460);}),443);return this._endStructure($r0);},
"interleavePart":function(){var $elf=this,$vars={},$r0=this._startStructure(463, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(466);this._appendStructure($r1,this._applyWithArgs("token","("),468);$vars.part=this._appendStructure($r1,this._applyWithArgs("expr4",true),471);this._appendStructure($r1,this._applyWithArgs("token",")"),474);$r1.value=["1",$vars.part];return this._endStructure($r1);},function(){var $r1=this._startStructure(477);$vars.part=this._appendStructure($r1,this._applyWithArgs("expr4",true),480);$r1.value=this._appendStructure($r1,this._applyWithArgs("modedIPart",$vars.part),483);return this._endStructure($r1);}),464);return this._endStructure($r0);},
"modedIPart":function(){var $elf=this,$vars={},$r0=this._startStructure(486, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(489);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(493);this._appendStructure($r2,this.exactly("And"),495);$r2.value=this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(499);this._appendStructure($r3,this.exactly("Many"),501);$r3.value=($vars.part=this._getStructureValue(this.anything()));return this._endStructure($r3);}),497);return this._endStructure($r2);}),491);$r1.value=["*",$vars.part];return this._endStructure($r1);},function(){var $r1=this._startStructure(506);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(510);this._appendStructure($r2,this.exactly("And"),512);$r2.value=this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(516);this._appendStructure($r3,this.exactly("Many1"),518);$r3.value=($vars.part=this._getStructureValue(this.anything()));return this._endStructure($r3);}),514);return this._endStructure($r2);}),508);$r1.value=["+",$vars.part];return this._endStructure($r1);},function(){var $r1=this._startStructure(523);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(527);this._appendStructure($r2,this.exactly("And"),529);$r2.value=this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(533);this._appendStructure($r3,this.exactly("Opt"),535);$r3.value=($vars.part=this._getStructureValue(this.anything()));return this._endStructure($r3);}),531);return this._endStructure($r2);}),525);$r1.value=["?",$vars.part];return this._endStructure($r1);},function(){var $r1=this._startStructure(540);$vars.part=this._getStructureValue(this.anything());$r1.value=["1",$vars.part];return this._endStructure($r1);}),487);return this._endStructure($r0);},
"expr4":function(){var $elf=this,$vars={},$r0=this._startStructure(544, true);$vars.ne=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(549);$vars.xs=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("expr3"),554);}),552);$vars.act=this._appendStructure($r1,this._apply("arrSemAction"),557);$r1.value=[this._extractLocation($r1),"And"].concat($vars.xs).concat([$vars.act]);return this._endStructure($r1);},function(){var $r1=this._startStructure(560);this._pred($vars.ne);$vars.xs=this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("expr3"),567);}),565);$r1.value=[this._extractLocation($r1),"And"].concat($vars.xs);return this._endStructure($r1);},function(){var $r1=this._startStructure(570);this._pred(($vars.ne == false));$vars.xs=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("expr3"),577);}),575);$r1.value=[this._extractLocation($r1),"And"].concat($vars.xs);return this._endStructure($r1);}),547);return this._endStructure($r0);},
"optIter":function(){var $elf=this,$vars={},$r0=this._startStructure(580, true);$vars.x=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(585);this._appendStructure($r1,this.exactly("*"),587);$r1.value=[mergeLocation(this._extractLocation($r1),$vars.x[(0)]),"Many",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(590);this._appendStructure($r1,this.exactly("+"),592);$r1.value=[mergeLocation(this._extractLocation($r1),$vars.x[(0)]),"Many1",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(595);this._appendStructure($r1,this.exactly("?"),597);$r1.value=[mergeLocation(this._extractLocation($r1),$vars.x[(0)]),"Opt",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(600);this._appendStructure($r1,this._apply("empty"),602);$r1.value=$vars.x;return this._endStructure($r1);}),583);return this._endStructure($r0);},
"optBind":function(){var $elf=this,$vars={},$r0=this._startStructure(605, true);$vars.x=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(610);this._appendStructure($r1,this.exactly(":"),612);$vars.n=this._appendStructure($r1,this._apply("name"),615);$r1.value=(function (){(this["locals"][$vars.n]=true);return [mergeLocation(this._extractLocation($r1),$vars.x[(0)]),"Set",$vars.n,$vars.x];}).call(this);return this._endStructure($r1);},function(){var $r1=this._startStructure(618);this._appendStructure($r1,this._apply("empty"),620);$r1.value=$vars.x;return this._endStructure($r1);}),608);return this._endStructure($r0);},
"expr3":function(){var $elf=this,$vars={},$r0=this._startStructure(623, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(626);this._appendStructure($r1,this._applyWithArgs("token",":"),628);$vars.n=this._appendStructure($r1,this._apply("name"),631);$r1.value=(function (){(this["locals"][$vars.n]=true);return [this._extractLocation($r1),"Set",$vars.n,[null,"PopArg"]];}).call(this);return this._endStructure($r1);},function(){var $r1=this._startStructure(634);$vars.e=this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(639);$vars.x=this._appendStructure($r2,this._apply("expr2"),642);$r2.value=this._appendStructure($r2,this._applyWithArgs("optIter",$vars.x),644);return this._endStructure($r2);},function(){return this._forwardStructure(this._apply("semAction"),647);}),637);$r1.value=this._appendStructure($r1,this._applyWithArgs("optBind",$vars.e),649);return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("semPred"),652);}),624);return this._endStructure($r0);},
"expr2":function(){var $elf=this,$vars={},$r0=this._startStructure(654, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(657);this._appendStructure($r1,this._applyWithArgs("token","~"),659);$vars.x=this._appendStructure($r1,this._apply("expr2"),662);$r1.value=[this._extractLocation($r1),"Not",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(665);this._appendStructure($r1,this._applyWithArgs("token","&"),667);$vars.x=this._appendStructure($r1,this._apply("expr1"),670);$r1.value=[this._extractLocation($r1),"Lookahead",$vars.x];return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("expr1"),673);}),655);return this._endStructure($r0);},
"expr1":function(){var $elf=this,$vars={},$r0=this._startStructure(675, true);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("application"),678);},function(){var $r1=this._startStructure(680);$vars.x=this._appendStructure($r1,this._or(function(){return this._forwardStructure(this._applyWithArgs("keyword","undefined"),685);},function(){return this._forwardStructure(this._applyWithArgs("keyword","nil"),688);},function(){return this._forwardStructure(this._applyWithArgs("keyword","true"),691);},function(){return this._forwardStructure(this._applyWithArgs("keyword","false"),694);}),683);$r1.value=[this._extractLocation($r1),"App","exactly",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(698);this._appendStructure($r1,this._apply("spaces"),700);$r1.value=this._appendStructure($r1,this._or(function(){return this._forwardStructure(this._apply("characters"),704);},function(){return this._forwardStructure(this._apply("sCharacters"),706);},function(){return this._forwardStructure(this._apply("string"),708);},function(){return this._forwardStructure(this._apply("number"),710);}),702);return this._endStructure($r1);},function(){var $r1=this._startStructure(712);this._appendStructure($r1,this._applyWithArgs("token","["),714);$vars.x=this._appendStructure($r1,this._apply("expr"),717);this._appendStructure($r1,this._applyWithArgs("token","]"),719);$r1.value=[this._extractLocation($r1),"Form",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(722);this._appendStructure($r1,this._applyWithArgs("token","<"),724);$vars.x=this._appendStructure($r1,this._apply("expr"),727);this._appendStructure($r1,this._applyWithArgs("token",">"),729);$r1.value=[this._extractLocation($r1),"ConsBy",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(732);this._appendStructure($r1,this._applyWithArgs("token","@<"),734);$vars.x=this._appendStructure($r1,this._apply("expr"),737);this._appendStructure($r1,this._applyWithArgs("token",">"),739);$r1.value=[this._extractLocation($r1),"IdxConsBy",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(742);this._appendStructure($r1,this._applyWithArgs("token","("),744);$vars.x=this._appendStructure($r1,this._apply("expr"),747);this._appendStructure($r1,this._applyWithArgs("token",")"),749);$r1.value=$vars.x;return this._endStructure($r1);}),676);return this._endStructure($r0);},
"ruleName":function(){var $elf=this,$vars={},$r0=this._startStructure(752, true);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("name"),755);},function(){var $r1=this._startStructure(757);this._appendStructure($r1,this._apply("spaces"),759);$r1.value=this._appendStructure($r1,this._apply("tsString"),761);return this._endStructure($r1);}),753);return this._endStructure($r0);},
"rule":function(){var $elf=this,$vars={},$r0=this._startStructure(763, true);this._appendStructure($r0,this._lookahead(function(){var $r1=this._startStructure(766);$r1.value=($vars.n=this._appendStructure($r1,this._apply("ruleName"),769));return this._endStructure($r1);}),765);(this["locals"]=({}));$vars.x=this._appendStructure($r0,this._applyWithArgs("rulePart",$vars.n),773);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(779);this._appendStructure($r1,this._applyWithArgs("token",","),781);$r1.value=this._appendStructure($r1,this._applyWithArgs("rulePart",$vars.n),783);return this._endStructure($r1);}),777);$r0.value=[this._extractLocation($r0),"Rule",$vars.n,[this._extractLocation($r0),"Or",$vars.x].concat($vars.xs)];return this._endStructure($r0);},
"rulePart":function(){var $elf=this,$vars={},$r0=this._startStructure(787, true);$vars.rn=this._getStructureValue(this.anything());$vars.n=this._appendStructure($r0,this._apply("ruleName"),791);this._pred(($vars.n == $vars.rn));$vars.b1=this._appendStructure($r0,this._applyWithArgs("expr4",false),796);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(801);this._appendStructure($r1,this._applyWithArgs("token","="),803);$vars.b2=this._appendStructure($r1,this._apply("expr"),806);$r1.value=[this._extractLocation($r1),"And",$vars.b1,$vars.b2];return this._endStructure($r1);},function(){var $r1=this._startStructure(809);this._appendStructure($r1,this._apply("empty"),811);$r1.value=$vars.b1;return this._endStructure($r1);}),799);return this._endStructure($r0);},
"grammar":function(){var $elf=this,$vars={},$r0=this._startStructure(814, true);this._appendStructure($r0,this._applyWithArgs("keyword","ometa"),816);$vars.sn=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(822);this._appendStructure($r1,this._applyWithArgs("token","("),824);$vars.sni=this._appendStructure($r1,this._apply("name"),827);this._appendStructure($r1,this._applyWithArgs("token",")"),829);$r1.value=$vars.sni;return this._endStructure($r1);},function(){var $r1=this._startStructure(832);this._appendStructure($r1,this._apply("empty"),834);$r1.value="OMeta";return this._endStructure($r1);}),820);this._appendStructure($r0,this._applyWithArgs("token","{"),837);$vars.rs=this._appendStructure($r0,this._applyWithArgs("enum","rule",","),840);this._appendStructure($r0,this._applyWithArgs("token","}"),844);$r0.value=["OMetaGrammar",$vars.sn,$vars.rs];return this._endStructure($r0);}});(BSOMetaParser["hexDigits"]="0123456789abcdef");let BSSemActionTranslator=objectThatDelegatesTo(BSJSTranslator,{
"Location":function(){var $elf=this,$vars={},$r0=this._startStructure(848, true);$r0.value=["this._extractLocation($r",this["_storeVal"],")"].join("");return this._endStructure($r0);},
"get":function(){var $elf=this,$vars={},$r0=this._startStructure(850, true);$vars.n=this._getStructureValue(this.anything());$r0.value=this._renameVariable($vars.n);return this._endStructure($r0);},
"name":function(){var $elf=this,$vars={},$r0=this._startStructure(854, true);$vars.n=this._getStructureValue(this.anything());$r0.value=this._renameVariable($vars.n);return this._endStructure($r0);},
"jstrans":function(){var $elf=this,$vars={},$r0=this._startStructure(858, true);$vars.storeVal=this._getStructureValue(this.anything());$vars.toRename=this._getStructureValue(this.anything());(function (){(this["_storeVal"]=$vars.storeVal);return (this["_toRename"]=$vars.toRename);}).call(this);$r0.value=this._appendStructure($r0,this._apply("trans"),863);return this._endStructure($r0);}});(BSSemActionTranslator["_renameVariable"]=(function (name){if(((name != "$elf") && this["_toRename"][name])){return ("$vars." + name);}else{undefined;}return name;}));let BSOMetaTranslator=objectThatDelegatesTo(OMeta,{
"App":function(){var $elf=this,$vars={},$r0=this._startStructure(866, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(869);this._appendStructure($r1,this.exactly("super"),871);$vars.args=this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("transFn"),876);}),874);$r1.value=[this["sName"],"._superApplyWithArgs(this,",$vars.args.join(","),")"].join("");return this._endStructure($r1);},function(){var $r1=this._startStructure(879);$vars.rule=this._getStructureValue(this.anything());$vars.args=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("transFn"),885);}),883);$r1.value=this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(889);this._pred(this._optimizedCall($vars.rule,$vars.args));$r2.value=["this.",this["_callables"][$vars.rule]["name"],"(",$vars.args.join(","),")"].join("");return this._endStructure($r2);},function(){var $r2=this._startStructure(894);this._pred(($vars.args["length"] < (1)));$r2.value=["this._apply(\"",$vars.rule,"\")"].join("");return this._endStructure($r2);},function(){var $r2=this._startStructure(888);$r2.value=["this._applyWithArgs(\"",$vars.rule,"\",",$vars.args.join(","),")"].join("");return this._endStructure($r2);}),887);return this._endStructure($r1);}),867);return this._endStructure($r0);},
"Pred":function(){var $elf=this,$vars={},$r0=this._startStructure(900, true);$vars.expr=this._appendStructure($r0,this._apply("transFn"),903);$r0.value=["this._pred(",$vars.expr,")"].join("");return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(906, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("transFn"),911);}),909);$r0.value=["this._or(",$vars.xs.join(","),")"].join("");return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(914, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("transFn"),919);}),917);$vars.xs.unshift(this["rName"].toProgramString());$r0.value=["this._xor(",$vars.xs.join(","),")"].join("");return this._endStructure($r0);},
"And":function(){var $elf=this,$vars={},$r0=this._startStructure(923, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(926);$vars.xs=this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("transFn"),931);}),929);$r1.value=$vars.xs.join(";");return this._endStructure($r1);},function(){var $r1=this._startStructure(925);$r1.value="undefined";return this._endStructure($r1);}),924);return this._endStructure($r0);},
"Opt":function(){var $elf=this,$vars={},$r0=this._startStructure(935, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),938);$r0.value=["this._opt(",$vars.x,")"].join("");return this._endStructure($r0);},
"Many":function(){var $elf=this,$vars={},$r0=this._startStructure(941, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),944);$r0.value=["this._many(",$vars.x,")"].join("");return this._endStructure($r0);},
"Many1":function(){var $elf=this,$vars={},$r0=this._startStructure(947, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),950);$r0.value=["this._many1(",$vars.x,")"].join("");return this._endStructure($r0);},
"Set":function(){var $elf=this,$vars={},$r0=this._startStructure(953, true);$vars.n=this._getStructureValue(this.anything());$vars.v=this._appendStructure($r0,this._apply("transFn"),957);$r0.value=["$vars.",$vars.n,"=",$vars.v].join("");return this._endStructure($r0);},
"Not":function(){var $elf=this,$vars={},$r0=this._startStructure(960, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),963);$r0.value=["this._not(",$vars.x,")"].join("");return this._endStructure($r0);},
"Lookahead":function(){var $elf=this,$vars={},$r0=this._startStructure(966, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),969);$r0.value=["this._lookahead(",$vars.x,")"].join("");return this._endStructure($r0);},
"Form":function(){var $elf=this,$vars={},$r0=this._startStructure(972, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),975);$r0.value=["this._form(",$vars.x,")"].join("");return this._endStructure($r0);},
"ConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(978, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),981);$r0.value=["this._consumedBy(",$vars.x,")"].join("");return this._endStructure($r0);},
"IdxConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(984, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),987);$r0.value=["this._idxConsumedBy(",$vars.x,")"].join("");return this._endStructure($r0);},
"JumpTable":function(){var $elf=this,$vars={},$r0=this._startStructure(990, true);this["_storeVar"]++;$vars.cases=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("jtCase"),996);}),994);this["_storeVar"]--;$r0.value=this.jumpTableCode($vars.cases);return this._endStructure($r0);},
"Interleave":function(){var $elf=this,$vars={},$r0=this._startStructure(1000, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("intPart"),1005);}),1003);$r0.value=["this._interleave(",$vars.xs.join(","),")"].join("");return this._endStructure($r0);},
"Function":function(){var $elf=this,$vars={},$r0=this._startStructure(1008, true);this["_storeVar"]++;$vars.x=this._appendStructure($r0,this._apply("transFn"),1012);this["_storeVar"]--;$r0.value=["function(){",$vars.x,";}"].join("");return this._endStructure($r0);},
"FunctionStructure":function(){var $elf=this,$vars={},$r0=this._startStructure(1016, true);this["_storeVar"]++;$vars.xs=this._appendStructure($r0,this._many1(function(){return this._forwardStructure(this._apply("transFn"),1022);}),1020);this["_storeVar"]--;$r0.value=["function(){var $r",(this["_storeVar"] + (1)),"=this._startStructure(",this.getLocationId(),");",$vars.xs.join(";"),";return this._endStructure($r",(this["_storeVar"] + (1)),");}"].join("");return this._endStructure($r0);},
"SetReturn":function(){var $elf=this,$vars={},$r0=this._startStructure(1026, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1029);$r0.value=["$r",this["_storeVar"],".value=",$vars.x].join("");return this._endStructure($r0);},
"Return":function(){var $elf=this,$vars={},$r0=this._startStructure(1032, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1035);$r0.value=["return this._forwardStructure(",$vars.x,",",this.getLocationId(),")"].join("");return this._endStructure($r0);},
"Parenthesis":function(){var $elf=this,$vars={},$r0=this._startStructure(1038, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1041);$r0.value=["(",$vars.x,")"].join("");return this._endStructure($r0);},
"Store":function(){var $elf=this,$vars={},$r0=this._startStructure(1044, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1047);$r0.value=["this._appendStructure($r",this["_storeVar"],",",$vars.x,",",this.getLocationId(),")"].join("");return this._endStructure($r0);},
"Js":function(){var $elf=this,$vars={},$r0=this._startStructure(1050, true);$vars.locals=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._applyWithArgs("transJs",$vars.locals),1053);return this._endStructure($r0);},
"PopArg":function(){var $elf=this,$vars={},$r0=this._startStructure(1056, true);$r0.value="this._getStructureValue(this.anything())";return this._endStructure($r0);},
"Rule":function(){var $elf=this,$vars={},$r0=this._startStructure(1058, true);$vars.name=this._getStructureValue(this.anything());(function (){(this["rName"]=$vars.name);return (this["_storeVar"]=(0));}).call(this);$vars.body=this._appendStructure($r0,this._apply("trans"),1063);$r0.value=["\n\"",$vars.name,"\":function(){var $elf=this,","$vars={},","$r0=this._startStructure(",this.getLocationId(),", true);",$vars.body,";return this._endStructure($r0);}"].join("");return this._endStructure($r0);},
"Grammar":function(){var $elf=this,$vars={},$r0=this._startStructure(1066, true);$vars.sName=this._getStructureValue(this.anything());(this["sName"]=$vars.sName);$vars.rules=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("trans"),1073);}),1071);$r0.value=["objectThatDelegatesTo(",$vars.sName,",{",$vars.rules.join(","),"})"].join("");return this._endStructure($r0);},
"intPart":function(){var $elf=this,$vars={},$r0=this._startStructure(1076, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(1080);$vars.mode=this._getStructureValue(this.anything());$r1.value=($vars.part=this._appendStructure($r1,this._apply("transFn"),1085));return this._endStructure($r1);}),1078);$r0.value=(($vars.mode.toProgramString() + ",") + $vars.part);return this._endStructure($r0);},
"jtCase":function(){var $elf=this,$vars={},$r0=this._startStructure(1088, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(1092);$vars.x=this._getStructureValue(this.anything());$r1.value=($vars.e=this._appendStructure($r1,this._apply("trans"),1097));return this._endStructure($r1);}),1090);$r0.value=[$vars.x.toProgramString(),$vars.e];return this._endStructure($r0);},
"transJs":function(){var $elf=this,$vars={},$r0=this._startStructure(1100, true);$vars.locals=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionTranslator,"jstrans",this["_storeVar"],$vars.locals),1103);return this._endStructure($r0);},
"trans":function(){var $elf=this,$vars={},$r0=this._startStructure(1108, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(1112);$vars.loc=this._getStructureValue(this.anything());$vars.t=this._getStructureValue(this.anything());this.pushLocation($vars.loc);$vars.ans=this._appendStructure($r1,this._apply($vars.t),1118);$r1.value=this.popLocation();return this._endStructure($r1);}),1110);$r0.value=$vars.ans;return this._endStructure($r0);},
"transFn":function(){var $elf=this,$vars={},$r0=this._startStructure(1123, true);$vars.x=this._appendStructure($r0,this._apply("trans"),1126);$r0.value=$vars.x;return this._endStructure($r0);}});(BSOMetaTranslator["_callables"]=({"anything": ({"name": "anything","nbArgs": (0)}),"apply": ({"name": "_apply","nbArgs": (1)}),"end": ({"name": "end","nbArgs": (0)}),"exactly": ({"name": "exactly","nbArgs": (1)}),"seq": ({"name": "seq","nbArgs": (1)})}));(BSOMetaTranslator["_optimizedCall"]=(function (rule,args){let c=this["_callables"][rule];return (c && (c["nbArgs"] == args["length"]));}));(BSOMetaTranslator["jumpTableCode"]=(function (cases){var buf=new StringBuffer();buf.nextPutAll((("(function(){var $r" + (this["_storeVar"] + (1))) + "=this._startStructure(-1);"));buf.nextPutAll((("switch(this._appendStructure($r" + (this["_storeVar"] + (1))) + ",this._apply(\'anything\'))){"));for(var i=(0);(i < cases["length"]);(i+=(1))){buf.nextPutAll((((("case " + cases[i][(0)]) + ":") + cases[i][(1)]) + ";break;"));}buf.nextPutAll((("default: throw fail}return this._endStructure($r" + (this["_storeVar"] + (1))) + ");}).call(this)"));return buf.contents();}));(BSOMetaTranslator["pushLocation"]=(function (location){if((location != null)){let locationId=createSourceMapId();addToSourseMap(locationId,location["start"],location["stop"]);this["_locations"].push(locationId);}else{this["_locations"].push(this["_locations"][(this["_locations"]["length"] - (1))]);};}));(BSOMetaTranslator["popLocation"]=(function (){this["_locations"].pop();}));(BSOMetaTranslator["getLocationId"]=(function (){return this["_locations"][(this["_locations"]["length"] - (1))];}));(BSOMetaTranslator["initialize"]=(function (){(this["_locations"]=[]);}))


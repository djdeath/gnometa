// This file was generated using Gnometa
// https://github.com/djdeath/gnometa
let BSSemActionParser=objectThatDelegatesTo(BSJSParser,{
"jsOmetaKeyword":function(){var $elf=this,$vars={},$r0=this._startStructure(1, true);this._appendStructure($r0,(function(){var $r1=this._startStructure(-1);switch(this._appendStructure($r1,this._apply('anything')).value){case "i":this._appendStructure($r1,this.exactly("n"),4);this._appendStructure($r1,this.exactly("p"),4);this._appendStructure($r1,this.exactly("u"),4);this._appendStructure($r1,this.exactly("t"),4);$r1.value="input";$r1.value="Input";break;case "l":this._appendStructure($r1,this.exactly("o"),7);this._appendStructure($r1,this.exactly("c"),7);this._appendStructure($r1,this.exactly("a"),7);this._appendStructure($r1,this.exactly("t"),7);this._appendStructure($r1,this.exactly("i"),7);this._appendStructure($r1,this.exactly("o"),7);this._appendStructure($r1,this.exactly("n"),7);$r1.value="location";$r1.value="Location";break;default: throw fail;}return this._endStructure($r1);}).call(this),2);return this._endStructure($r0);},
"jsOmetaExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(10, true);this._appendStructure($r0,this._apply("spaces"),12);this._appendStructure($r0,this.exactly("@"),14);$vars.k=this._appendStructure($r0,this._apply("jsOmetaKeyword"),17);$vars.v=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(22);this._appendStructure($r1,this._applyWithArgs("token","("),24);$vars.n=this._appendStructure($r1,this._apply("iName"),27);this._appendStructure($r1,this._applyWithArgs("token",")"),29);$r1.value=$vars.n.value;return this._endStructure($r1);},function(){var $r1=this._startStructure(21);$r1.value=null;return this._endStructure($r1);}),20);$r0.value=[$vars.k.value,$vars.v.value];return this._endStructure($r0);},
"primExprHd":function(){var $elf=this,$vars={},$r0=this._startStructure(36, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("jsOmetaExpr"),39);},function(){return this._forwardStructure(BSJSParser._superApplyWithArgs(this,"primExprHd"),41);}),37);return this._endStructure($r0);},
"curlySemAction":function(){var $elf=this,$vars={},$r0=this._startStructure(43, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(46);this._appendStructure($r1,this._applyWithArgs("token","{"),48);$vars.r=this._appendStructure($r1,this._apply("expr"),51);this._appendStructure($r1,this._apply("sc"),53);this._appendStructure($r1,this._applyWithArgs("token","}"),55);$r1.value=$vars.r.value;return this._endStructure($r1);},function(){var $r1=this._startStructure(59);this._appendStructure($r1,this._applyWithArgs("token","{"),61);$vars.ss=this._appendStructure($r1,this._many(function(){var $r2=this._startStructure(66);$vars.s=this._appendStructure($r2,this._apply("srcElem"),69);this._appendStructure($r2,this._lookahead(function(){return this._forwardStructure(this._apply("srcElem"),73);}),71);$r2.value=$vars.s.value;return this._endStructure($r2);}),64);$vars.s=this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(80);$vars.r=this._appendStructure($r2,this._apply("expr"),83);this._appendStructure($r2,this._apply("sc"),85);$r2.value=["return",$vars.r.value];return this._endStructure($r2);},function(){return this._forwardStructure(this._apply("srcElem"),89);}),78);$r1.value=$vars.ss.value.push($vars.s.value);this._appendStructure($r1,this._applyWithArgs("token","}"),93);$r1.value=["send","call",["func",[],["begin"].concat($vars.ss.value)],["this"]];return this._endStructure($r1);}),44);return this._endStructure($r0);},
"semAction":function(){var $elf=this,$vars={},$r0=this._startStructure(97, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("curlySemAction"),100);},function(){var $r1=this._startStructure(102);$vars.r=this._appendStructure($r1,this._apply("primExpr"),105);this._appendStructure($r1,this._apply("spaces"),107);$r1.value=$vars.r.value;return this._endStructure($r1);}),98);return this._endStructure($r0);}});let BSOMetaParser=objectThatDelegatesTo(BaseStrParser,{
"space":function(){var $elf=this,$vars={},$r0=this._startStructure(112, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure(BaseStrParser._superApplyWithArgs(this,"space"),115);},function(){return this._forwardStructure(this._applyWithArgs("fromTo","//","\n"),117);},function(){return this._forwardStructure(this._applyWithArgs("fromTo","/*","*/"),121);}),113);return this._endStructure($r0);},
"nameFirst":function(){var $elf=this,$vars={},$r0=this._startStructure(125, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure((function(){var $r1=this._startStructure(-1);switch(this._appendStructure($r1,this._apply('anything')).value){case "_":$r1.value="_";break;case "$":$r1.value="$";break;default: throw fail;}return this._endStructure($r1);}).call(this),128);},function(){return this._forwardStructure(this._apply("letter"),130);}),126);return this._endStructure($r0);},
"nameRest":function(){var $elf=this,$vars={},$r0=this._startStructure(132, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("nameFirst"),135);},function(){return this._forwardStructure(this._apply("digit"),137);}),133);return this._endStructure($r0);},
"tsName":function(){var $elf=this,$vars={},$r0=this._startStructure(139, true);this._appendStructure($r0,this._consumedBy(function(){var $r1=this._startStructure(142);this._appendStructure($r1,this._apply("nameFirst"),144);this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("nameRest"),148);}),146);return this._endStructure($r1);}),140);return this._endStructure($r0);},
"name":function(){var $elf=this,$vars={},$r0=this._startStructure(150, true);this._appendStructure($r0,this._apply("spaces"),152);this._appendStructure($r0,this._apply("tsName"),154);return this._endStructure($r0);},
"hexDigit":function(){var $elf=this,$vars={},$r0=this._startStructure(156, true);$vars.x=this._appendStructure($r0,this._apply("char"),159);$vars.v=this._generateStructure($r0,this["hexDigits"].indexOf($vars.x.value.toLowerCase()),162);$r0.value=this._pred(($vars.v.value >= (0)));$r0.value=$vars.v.value;return this._endStructure($r0);},
"eChar":function(){var $elf=this,$vars={},$r0=this._startStructure(169, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(172);$vars.s=this._appendStructure($r1,this._consumedBy(function(){var $r2=this._startStructure(177);this._appendStructure($r2,this.exactly("\\"),179);this._appendStructure($r2,this._or(function(){return this._forwardStructure((function(){var $r3=this._startStructure(-1);switch(this._appendStructure($r3,this._apply('anything')).value){case "u":this._appendStructure($r3,this._apply("hexDigit"),186);this._appendStructure($r3,this._apply("hexDigit"),188);this._appendStructure($r3,this._apply("hexDigit"),190);this._appendStructure($r3,this._apply("hexDigit"),192);break;case "x":this._appendStructure($r3,this._apply("hexDigit"),195);this._appendStructure($r3,this._apply("hexDigit"),197);break;default: throw fail;}return this._endStructure($r3);}).call(this),183);},function(){return this._forwardStructure(this._apply("char"),199);}),181);return this._endStructure($r2);}),175);$r1.value=unescape($vars.s.value);return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("char"),203);}),170);return this._endStructure($r0);},
"tsString":function(){var $elf=this,$vars={},$r0=this._startStructure(205, true);this._appendStructure($r0,this.exactly("\'"),207);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(212);this._appendStructure($r1,this._not(function(){return this._forwardStructure(this.exactly("\'"),216);}),214);this._appendStructure($r1,this._apply("eChar"),218);return this._endStructure($r1);}),210);this._appendStructure($r0,this.exactly("\'"),220);$r0.value=$vars.xs.value.join("");return this._endStructure($r0);},
"characters":function(){var $elf=this,$vars={},$r0=this._startStructure(224, true);this._appendStructure($r0,this.exactly("`"),226);this._appendStructure($r0,this.exactly("`"),228);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(233);this._appendStructure($r1,this._not(function(){var $r2=this._startStructure(237);this._appendStructure($r2,this.exactly("\'"),239);this._appendStructure($r2,this.exactly("\'"),241);return this._endStructure($r2);}),235);this._appendStructure($r1,this._apply("eChar"),243);return this._endStructure($r1);}),231);this._appendStructure($r0,this.exactly("\'"),245);this._appendStructure($r0,this.exactly("\'"),247);$r0.value=[this._extractLocation($r0),"App","seq",jsValue("string",$vars.xs.value.join(""))];return this._endStructure($r0);},
"sCharacters":function(){var $elf=this,$vars={},$r0=this._startStructure(251, true);this._appendStructure($r0,this.exactly("\""),253);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(258);this._appendStructure($r1,this._not(function(){return this._forwardStructure(this.exactly("\""),262);}),260);this._appendStructure($r1,this._apply("eChar"),264);return this._endStructure($r1);}),256);this._appendStructure($r0,this.exactly("\""),266);$r0.value=[this._extractLocation($r0),"App","token",jsValue("string",$vars.xs.value.join(""))];return this._endStructure($r0);},
"string":function(){var $elf=this,$vars={},$r0=this._startStructure(270, true);$vars.xs=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(275);this._appendStructure($r1,(function(){var $r2=this._startStructure(-1);switch(this._appendStructure($r2,this._apply('anything')).value){case "#":$r2.value="#";break;case "`":$r2.value="`";break;default: throw fail;}return this._endStructure($r2);}).call(this),277);this._appendStructure($r1,this._apply("tsName"),279);return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("tsString"),281);}),273);$r0.value=[this._extractLocation($r0),"App","exactly",jsValue("string",$vars.xs.value)];return this._endStructure($r0);},
"number":function(){var $elf=this,$vars={},$r0=this._startStructure(285, true);$vars.n=this._appendStructure($r0,this._consumedBy(function(){var $r1=this._startStructure(290);this._appendStructure($r1,this._opt(function(){return this._forwardStructure(this.exactly("-"),294);}),292);this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("digit"),298);}),296);return this._endStructure($r1);}),288);$r0.value=[this._extractLocation($r0),"App","exactly",jsValue("number",$vars.n.value)];return this._endStructure($r0);},
"keyword":function(){var $elf=this,$vars={},$r0=this._startStructure(302, true);$vars.xs=this.anything();this._appendStructure($r0,this._applyWithArgs("token",$vars.xs.value),305);this._appendStructure($r0,this._not(function(){return this._forwardStructure(this._apply("letterOrDigit"),310);}),308);$r0.value=$vars.xs.value;return this._endStructure($r0);},
"args":function(){var $elf=this,$vars={},$r0=this._startStructure(314, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure((function(){var $r1=this._startStructure(-1);switch(this._appendStructure($r1,this._apply('anything')).value){case "(":$vars.xs=this._appendStructure($r1,this._applyWithArgs("listOf","hostExpr",","),321);this._appendStructure($r1,this._applyWithArgs("token",")"),325);$r1.value=$vars.xs.value;break;default: throw fail;}return this._endStructure($r1);}).call(this),317);},function(){var $r1=this._startStructure(329);this._appendStructure($r1,this._apply("empty"),331);$r1.value=[];return this._endStructure($r1);}),315);return this._endStructure($r0);},
"application":function(){var $elf=this,$vars={},$r0=this._startStructure(335, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(338);this._appendStructure($r1,this._applyWithArgs("token","^"),340);$vars.rule=this._appendStructure($r1,this._apply("name"),343);$vars.as=this._appendStructure($r1,this._apply("args"),346);$r1.value=[this._extractLocation($r1),"App","super",jsValue("string",$vars.rule.value)].concat($vars.as.value);return this._endStructure($r1);},function(){var $r1=this._startStructure(350);$vars.grm=this._appendStructure($r1,this._apply("name"),353);this._appendStructure($r1,this._applyWithArgs("token","."),355);$vars.rule=this._appendStructure($r1,this._apply("name"),358);$vars.as=this._appendStructure($r1,this._apply("args"),361);$r1.value=[this._extractLocation($r1),"App","foreign",jsCode(this._extractLocation($r1),this["locals"],["get",$vars.grm.value]),jsValue("string",$vars.rule.value)].concat($vars.as.value);return this._endStructure($r1);},function(){var $r1=this._startStructure(365);$vars.rule=this._appendStructure($r1,this._apply("name"),368);$vars.as=this._appendStructure($r1,this._apply("args"),371);$r1.value=[this._extractLocation($r1),"App",$vars.rule.value].concat($vars.as.value);return this._endStructure($r1);}),336);return this._endStructure($r0);},
"hostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(375, true);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionParser,"expr"),378);$r0.value=jsCode(this._extractLocation($r0),this["locals"],$vars.r.value);return this._endStructure($r0);},
"curlyHostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(383, true);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionParser,"curlySemAction"),386);$r0.value=jsCode(this._extractLocation($r0),this["locals"],$vars.r.value);return this._endStructure($r0);},
"primHostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(391, true);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionParser,"semAction"),394);$r0.value=jsCode(this._extractLocation($r0),this["locals"],$vars.r.value);return this._endStructure($r0);},
"atomicHostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(399, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("curlyHostExpr"),402);},function(){return this._forwardStructure(this._apply("primHostExpr"),404);}),400);return this._endStructure($r0);},
"semAction":function(){var $elf=this,$vars={},$r0=this._startStructure(406, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("curlyHostExpr"),409);},function(){var $r1=this._startStructure(411);this._appendStructure($r1,this._applyWithArgs("token","!"),413);this._appendStructure($r1,this._apply("atomicHostExpr"),415);return this._endStructure($r1);}),407);return this._endStructure($r0);},
"arrSemAction":function(){var $elf=this,$vars={},$r0=this._startStructure(417, true);this._appendStructure($r0,this._applyWithArgs("token","->"),419);this._appendStructure($r0,this._apply("atomicHostExpr"),421);return this._endStructure($r0);},
"semPred":function(){var $elf=this,$vars={},$r0=this._startStructure(423, true);this._appendStructure($r0,this._applyWithArgs("token","?"),425);$vars.x=this._appendStructure($r0,this._apply("atomicHostExpr"),428);$r0.value=[this._extractLocation($r0),"Pred",$vars.x.value];return this._endStructure($r0);},
"expr":function(){var $elf=this,$vars={},$r0=this._startStructure(432, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(435);$vars.x=this._appendStructure($r1,this._applyWithArgs("expr5",true),438);$vars.xs=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(444);this._appendStructure($r2,this._applyWithArgs("token","|"),446);this._appendStructure($r2,this._applyWithArgs("expr5",true),448);return this._endStructure($r2);}),442);$r1.value=[this._extractLocation($r1),"Or",$vars.x.value].concat($vars.xs.value);return this._endStructure($r1);},function(){var $r1=this._startStructure(453);$vars.x=this._appendStructure($r1,this._applyWithArgs("expr5",true),456);$vars.xs=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(462);this._appendStructure($r2,this._applyWithArgs("token","||"),464);this._appendStructure($r2,this._applyWithArgs("expr5",true),466);return this._endStructure($r2);}),460);$r1.value=[this._extractLocation($r1),"XOr",$vars.x.value].concat($vars.xs.value);return this._endStructure($r1);},function(){return this._forwardStructure(this._applyWithArgs("expr5",false),471);}),433);return this._endStructure($r0);},
"expr5":function(){var $elf=this,$vars={},$r0=this._startStructure(474, true);$vars.ne=this.anything();this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(479);$vars.x=this._appendStructure($r1,this._apply("interleavePart"),482);$vars.xs=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(487);this._appendStructure($r2,this._applyWithArgs("token","&&"),489);this._appendStructure($r2,this._apply("interleavePart"),491);return this._endStructure($r2);}),485);$r1.value=[this._extractLocation($r1),"Interleave",$vars.x.value].concat($vars.xs.value);return this._endStructure($r1);},function(){return this._forwardStructure(this._applyWithArgs("expr4",$vars.ne.value),495);}),477);return this._endStructure($r0);},
"interleavePart":function(){var $elf=this,$vars={},$r0=this._startStructure(498, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(501);this._appendStructure($r1,this._applyWithArgs("token","("),503);$vars.part=this._appendStructure($r1,this._applyWithArgs("expr4",true),506);this._appendStructure($r1,this._applyWithArgs("token",")"),509);$r1.value=["1",$vars.part.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(513);$vars.part=this._appendStructure($r1,this._applyWithArgs("expr4",true),516);this._appendStructure($r1,this._applyWithArgs("modedIPart",$vars.part.value),519);return this._endStructure($r1);}),499);return this._endStructure($r0);},
"modedIPart":function(){var $elf=this,$vars={},$r0=this._startStructure(522, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(525);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(529);this._appendStructure($r2,this.exactly("And"),531);this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(535);this._appendStructure($r3,this.exactly("Many"),537);$vars.part=this.anything();return this._endStructure($r3);}),533);return this._endStructure($r2);}),527);$r1.value=["*",$vars.part.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(542);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(546);this._appendStructure($r2,this.exactly("And"),548);this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(552);this._appendStructure($r3,this.exactly("Many1"),554);$vars.part=this.anything();return this._endStructure($r3);}),550);return this._endStructure($r2);}),544);$r1.value=["+",$vars.part.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(559);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(563);this._appendStructure($r2,this.exactly("And"),565);this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(569);this._appendStructure($r3,this.exactly("Opt"),571);$vars.part=this.anything();return this._endStructure($r3);}),567);return this._endStructure($r2);}),561);$r1.value=["?",$vars.part.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(576);$vars.part=this.anything();$r1.value=["1",$vars.part.value];return this._endStructure($r1);}),523);return this._endStructure($r0);},
"expr4":function(){var $elf=this,$vars={},$r0=this._startStructure(581, true);$vars.ne=this.anything();this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(586);$vars.xs=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("expr3"),591);}),589);$vars.act=this._appendStructure($r1,this._apply("arrSemAction"),594);$r1.value=[this._extractLocation($r1),"And"].concat($vars.xs.value).concat([$vars.act.value]);return this._endStructure($r1);},function(){var $r1=this._startStructure(598);$r1.value=this._pred($vars.ne.value);$vars.xs=this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("expr3"),606);}),604);$r1.value=[this._extractLocation($r1),"And"].concat($vars.xs.value);return this._endStructure($r1);},function(){var $r1=this._startStructure(610);$r1.value=this._pred(($vars.ne.value == false));$vars.xs=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("expr3"),618);}),616);$r1.value=[this._extractLocation($r1),"And"].concat($vars.xs.value);return this._endStructure($r1);}),584);return this._endStructure($r0);},
"optIter":function(){var $elf=this,$vars={},$r0=this._startStructure(622, true);$vars.x=this.anything();this._appendStructure($r0,this._or(function(){return this._forwardStructure((function(){var $r1=this._startStructure(-1);switch(this._appendStructure($r1,this._apply('anything')).value){case "*":$r1.value=[mergeLocation(this._extractLocation($r1),$vars.x.value[(0)]),"Many",$vars.x.value];break;case "+":$r1.value=[mergeLocation(this._extractLocation($r1),$vars.x.value[(0)]),"Many1",$vars.x.value];break;case "?":$r1.value=[mergeLocation(this._extractLocation($r1),$vars.x.value[(0)]),"Opt",$vars.x.value];break;default: throw fail;}return this._endStructure($r1);}).call(this),627);},function(){var $r1=this._startStructure(632);this._appendStructure($r1,this._apply("empty"),634);$r1.value=$vars.x.value;return this._endStructure($r1);}),625);return this._endStructure($r0);},
"optBind":function(){var $elf=this,$vars={},$r0=this._startStructure(638, true);$vars.x=this.anything();this._appendStructure($r0,this._or(function(){return this._forwardStructure((function(){var $r1=this._startStructure(-1);switch(this._appendStructure($r1,this._apply('anything')).value){case ":":$vars.n=this._appendStructure($r1,this._apply("name"),647);$r1.value=(function (){(this["locals"][$vars.n.value]=true);return [mergeLocation(this._extractLocation($r1),$vars.x.value[(0)]),"Set",$vars.n.value,$vars.x.value];}).call(this);break;default: throw fail;}return this._endStructure($r1);}).call(this),643);},function(){var $r1=this._startStructure(651);this._appendStructure($r1,this._apply("empty"),653);$r1.value=$vars.x.value;return this._endStructure($r1);}),641);return this._endStructure($r0);},
"expr3":function(){var $elf=this,$vars={},$r0=this._startStructure(657, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(660);this._appendStructure($r1,this._applyWithArgs("token",":"),662);$vars.n=this._appendStructure($r1,this._apply("name"),665);$r1.value=(function (){(this["locals"][$vars.n.value]=true);return [this._extractLocation($r1),"PopArg",$vars.n.value];}).call(this);return this._endStructure($r1);},function(){var $r1=this._startStructure(669);$vars.e=this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(674);$vars.x=this._appendStructure($r2,this._apply("expr2"),677);this._appendStructure($r2,this._applyWithArgs("optIter",$vars.x.value),679);return this._endStructure($r2);},function(){return this._forwardStructure(this._apply("semAction"),682);}),672);this._appendStructure($r1,this._applyWithArgs("optBind",$vars.e.value),684);return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("semPred"),687);}),658);return this._endStructure($r0);},
"expr2":function(){var $elf=this,$vars={},$r0=this._startStructure(689, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(692);this._appendStructure($r1,this._applyWithArgs("token","~"),694);$vars.x=this._appendStructure($r1,this._apply("expr2"),697);$r1.value=[this._extractLocation($r1),"Not",$vars.x.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(701);this._appendStructure($r1,this._applyWithArgs("token","&"),703);$vars.x=this._appendStructure($r1,this._apply("expr1"),706);$r1.value=[this._extractLocation($r1),"Lookahead",$vars.x.value];return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("expr1"),710);}),690);return this._endStructure($r0);},
"expr1":function(){var $elf=this,$vars={},$r0=this._startStructure(712, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("application"),715);},function(){var $r1=this._startStructure(717);$vars.x=this._appendStructure($r1,this._or(function(){return this._forwardStructure(this._applyWithArgs("keyword","undefined"),722);},function(){return this._forwardStructure(this._applyWithArgs("keyword","nil"),725);},function(){return this._forwardStructure(this._applyWithArgs("keyword","true"),728);},function(){return this._forwardStructure(this._applyWithArgs("keyword","false"),731);}),720);$r1.value=[this._extractLocation($r1),"App","exactly",$vars.x.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(736);this._appendStructure($r1,this._apply("spaces"),738);this._appendStructure($r1,this._or(function(){return this._forwardStructure(this._apply("characters"),742);},function(){return this._forwardStructure(this._apply("sCharacters"),744);},function(){return this._forwardStructure(this._apply("string"),746);},function(){return this._forwardStructure(this._apply("number"),748);}),740);return this._endStructure($r1);},function(){var $r1=this._startStructure(750);this._appendStructure($r1,this._applyWithArgs("token","["),752);$vars.x=this._appendStructure($r1,this._apply("expr"),755);this._appendStructure($r1,this._applyWithArgs("token","]"),757);$r1.value=[this._extractLocation($r1),"Form",$vars.x.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(761);this._appendStructure($r1,this._applyWithArgs("token","<"),763);$vars.x=this._appendStructure($r1,this._apply("expr"),766);this._appendStructure($r1,this._applyWithArgs("token",">"),768);$r1.value=[this._extractLocation($r1),"ConsBy",$vars.x.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(772);this._appendStructure($r1,this._applyWithArgs("token","@<"),774);$vars.x=this._appendStructure($r1,this._apply("expr"),777);this._appendStructure($r1,this._applyWithArgs("token",">"),779);$r1.value=[this._extractLocation($r1),"IdxConsBy",$vars.x.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(783);this._appendStructure($r1,this._applyWithArgs("token","("),785);$vars.x=this._appendStructure($r1,this._apply("expr"),788);this._appendStructure($r1,this._applyWithArgs("token",")"),790);$r1.value=$vars.x.value;return this._endStructure($r1);}),713);return this._endStructure($r0);},
"ruleName":function(){var $elf=this,$vars={},$r0=this._startStructure(794, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("name"),797);},function(){var $r1=this._startStructure(799);this._appendStructure($r1,this._apply("spaces"),801);this._appendStructure($r1,this._apply("tsString"),803);return this._endStructure($r1);}),795);return this._endStructure($r0);},
"rule":function(){var $elf=this,$vars={},$r0=this._startStructure(805, true);this._appendStructure($r0,this._lookahead(function(){return this._forwardStructure($vars.n=this._appendStructure($r0,this._apply("ruleName"),811),809);}),807);$r0.value=(this["locals"]=({}));$vars.x=this._appendStructure($r0,this._applyWithArgs("rulePart",$vars.n.value),816);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(822);this._appendStructure($r1,this._applyWithArgs("token",","),824);this._appendStructure($r1,this._applyWithArgs("rulePart",$vars.n.value),826);return this._endStructure($r1);}),820);$r0.value=[this._extractLocation($r0),"Rule",$vars.n.value,[this._extractLocation($r0),"Or",$vars.x.value].concat($vars.xs.value)];return this._endStructure($r0);},
"rulePart":function(){var $elf=this,$vars={},$r0=this._startStructure(831, true);$vars.rn=this.anything();$vars.n=this._appendStructure($r0,this._apply("ruleName"),835);$r0.value=this._pred(($vars.n.value == $vars.rn.value));$vars.b1=this._appendStructure($r0,this._applyWithArgs("expr4",false),841);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(846);this._appendStructure($r1,this._applyWithArgs("token","="),848);$vars.b2=this._appendStructure($r1,this._apply("expr"),851);$r1.value=[this._extractLocation($r1),"And",$vars.b1.value,$vars.b2.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(855);this._appendStructure($r1,this._apply("empty"),857);$r1.value=$vars.b1.value;return this._endStructure($r1);}),844);return this._endStructure($r0);},
"grammar":function(){var $elf=this,$vars={},$r0=this._startStructure(861, true);this._appendStructure($r0,this._applyWithArgs("keyword","ometa"),863);$vars.sn=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(869);this._appendStructure($r1,this._applyWithArgs("token","("),871);$vars.sni=this._appendStructure($r1,this._apply("name"),874);this._appendStructure($r1,this._applyWithArgs("token",")"),876);$r1.value=$vars.sni.value;return this._endStructure($r1);},function(){var $r1=this._startStructure(880);this._appendStructure($r1,this._apply("empty"),882);$r1.value="OMeta";return this._endStructure($r1);}),867);this._appendStructure($r0,this._applyWithArgs("token","{"),886);$vars.rs=this._appendStructure($r0,this._applyWithArgs("enum","rule",","),889);this._appendStructure($r0,this._applyWithArgs("token","}"),893);$r0.value=["OMetaGrammar",$vars.sn.value,$vars.rs.value];return this._endStructure($r0);}});(BSOMetaParser["hexDigits"]="0123456789abcdef");let BSSemActionTranslator=objectThatDelegatesTo(BSJSTranslator,{
"Location":function(){var $elf=this,$vars={},$r0=this._startStructure(898, true);$vars.n=this.anything();$vars.v=this._generateStructure($r0,(($vars.n.value === null)?("$r" + this["_storeVal"]):("$vars." + $vars.n.value)),902);$r0.value=["this._extractLocation(",$vars.v.value,")"].join("");return this._endStructure($r0);},
"Input":function(){var $elf=this,$vars={},$r0=this._startStructure(906, true);$vars.n=this.anything();$vars.v=this._generateStructure($r0,(($vars.n.value === null)?("$r" + this["_storeVal"]):("$vars." + $vars.n.value)),910);$r0.value=["this._extractInput(",$vars.v.value,")"].join("");return this._endStructure($r0);},
"get":function(){var $elf=this,$vars={},$r0=this._startStructure(914, true);$vars.n=this.anything();$r0.value=this._renameVariable($vars.n.value);return this._endStructure($r0);},
"name":function(){var $elf=this,$vars={},$r0=this._startStructure(919, true);$vars.n=this.anything();$r0.value=this._renameVariable($vars.n.value);return this._endStructure($r0);},
"jstrans":function(){var $elf=this,$vars={},$r0=this._startStructure(924, true);$vars.storeVal=this.anything();$vars.toRename=this.anything();$r0.value=(function (){(this["_storeVal"]=$vars.storeVal.value);return (this["_toRename"]=$vars.toRename.value);}).call(this);this._appendStructure($r0,this._apply("trans"),930);return this._endStructure($r0);}});(BSSemActionTranslator["_renameVariable"]=(function (name){if(((name != "$elf") && this["_toRename"][name])){return (("$vars." + name) + ".value");}else{undefined;}return name;}));let BSOMetaTranslator=objectThatDelegatesTo(OMeta,{
"App":function(){var $elf=this,$vars={},$r0=this._startStructure(933, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure((function(){var $r1=this._startStructure(-1);switch(this._appendStructure($r1,this._apply('anything')).value){case "super":$vars.args=this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("transFn"),942);}),940);$r1.value=[this["sName"],"._superApplyWithArgs(this,",$vars.args.value.join(","),")"].join("");break;default: throw fail;}return this._endStructure($r1);}).call(this),936);},function(){var $r1=this._startStructure(946);$vars.rule=this.anything();$vars.args=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("transFn"),952);}),950);this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(956);$r2.value=this._pred(this._optimizedCall($vars.rule.value,$vars.args.value));$r2.value=["this.",this["_callables"][$vars.rule.value]["name"],"(",$vars.args.value.join(","),")"].join("");return this._endStructure($r2);},function(){var $r2=this._startStructure(963);$r2.value=this._pred(($vars.args.value["length"] < (1)));$r2.value=["this._apply(\"",$vars.rule.value,"\")"].join("");return this._endStructure($r2);},function(){var $r2=this._startStructure(955);$r2.value=["this._applyWithArgs(\"",$vars.rule.value,"\",",$vars.args.value.join(","),")"].join("");return this._endStructure($r2);}),954);return this._endStructure($r1);}),934);return this._endStructure($r0);},
"Pred":function(){var $elf=this,$vars={},$r0=this._startStructure(971, true);$vars.expr=this._appendStructure($r0,this._apply("transFn"),974);$r0.value=["this._pred(",$vars.expr.value,")"].join("");return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(978, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("transFn"),983);}),981);$r0.value=["this._or(",$vars.xs.value.join(","),")"].join("");return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(987, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("transFn"),992);}),990);$r0.value=$vars.xs.value.unshift(this["rName"].toProgramString());$r0.value=["this._xor(",$vars.xs.value.join(","),")"].join("");return this._endStructure($r0);},
"And":function(){var $elf=this,$vars={},$r0=this._startStructure(998, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(1001);$vars.xs=this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("transFn"),1006);}),1004);$r1.value=$vars.xs.value.join(";");return this._endStructure($r1);},function(){var $r1=this._startStructure(1000);$r1.value="undefined";return this._endStructure($r1);}),999);return this._endStructure($r0);},
"Opt":function(){var $elf=this,$vars={},$r0=this._startStructure(1011, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1014);$r0.value=["this._opt(",$vars.x.value,")"].join("");return this._endStructure($r0);},
"Many":function(){var $elf=this,$vars={},$r0=this._startStructure(1018, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1021);$r0.value=["this._many(",$vars.x.value,")"].join("");return this._endStructure($r0);},
"Many1":function(){var $elf=this,$vars={},$r0=this._startStructure(1025, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1028);$r0.value=["this._many1(",$vars.x.value,")"].join("");return this._endStructure($r0);},
"Set":function(){var $elf=this,$vars={},$r0=this._startStructure(1032, true);$vars.n=this.anything();$vars.v=this._appendStructure($r0,this._apply("transFn"),1036);$r0.value=["$vars.",$vars.n.value,"=",$vars.v.value].join("");return this._endStructure($r0);},
"Not":function(){var $elf=this,$vars={},$r0=this._startStructure(1040, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1043);$r0.value=["this._not(",$vars.x.value,")"].join("");return this._endStructure($r0);},
"Lookahead":function(){var $elf=this,$vars={},$r0=this._startStructure(1047, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1050);$r0.value=["this._lookahead(",$vars.x.value,")"].join("");return this._endStructure($r0);},
"Form":function(){var $elf=this,$vars={},$r0=this._startStructure(1054, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1057);$r0.value=["this._form(",$vars.x.value,")"].join("");return this._endStructure($r0);},
"ConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(1061, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1064);$r0.value=["this._consumedBy(",$vars.x.value,")"].join("");return this._endStructure($r0);},
"IdxConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(1068, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1071);$r0.value=["this._idxConsumedBy(",$vars.x.value,")"].join("");return this._endStructure($r0);},
"JumpTable":function(){var $elf=this,$vars={},$r0=this._startStructure(1075, true);$r0.value=this["_storeVar"]++;$vars.cases=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("jtCase"),1082);}),1080);$r0.value=this["_storeVar"]--;$r0.value=this.jumpTableCode($vars.cases.value);return this._endStructure($r0);},
"Interleave":function(){var $elf=this,$vars={},$r0=this._startStructure(1088, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("intPart"),1093);}),1091);$r0.value=["this._interleave(",$vars.xs.value.join(","),")"].join("");return this._endStructure($r0);},
"Function":function(){var $elf=this,$vars={},$r0=this._startStructure(1097, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1100);$r0.value=["function(){",$vars.x.value,";}"].join("");return this._endStructure($r0);},
"FunctionStructure":function(){var $elf=this,$vars={},$r0=this._startStructure(1104, true);$r0.value=this["_storeVar"]++;$vars.xs=this._appendStructure($r0,this._many1(function(){return this._forwardStructure(this._apply("transFn"),1111);}),1109);$r0.value=this["_storeVar"]--;$r0.value=["function(){var $r",(this["_storeVar"] + (1)),"=this._startStructure(",this.getLocationId(),");",$vars.xs.value.join(";"),";return this._endStructure($r",(this["_storeVar"] + (1)),");}"].join("");return this._endStructure($r0);},
"SetReturn":function(){var $elf=this,$vars={},$r0=this._startStructure(1117, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1120);$r0.value=["$r",this["_storeVar"],".value=",$vars.x.value].join("");return this._endStructure($r0);},
"Return":function(){var $elf=this,$vars={},$r0=this._startStructure(1124, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1127);$r0.value=["return this._forwardStructure(",$vars.x.value,",",this.getLocationId(),")"].join("");return this._endStructure($r0);},
"Parenthesis":function(){var $elf=this,$vars={},$r0=this._startStructure(1131, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1134);$r0.value=["(",$vars.x.value,")"].join("");return this._endStructure($r0);},
"Store":function(){var $elf=this,$vars={},$r0=this._startStructure(1138, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1141);$r0.value=["this._appendStructure($r",this["_storeVar"],",",$vars.x.value,",",this.getLocationId(),")"].join("");return this._endStructure($r0);},
"Wrap":function(){var $elf=this,$vars={},$r0=this._startStructure(1145, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1148);$r0.value=["this._generateStructure($r",this["_storeVar"],",",$vars.x.value,",",this.getLocationId(),")"].join("");return this._endStructure($r0);},
"Js":function(){var $elf=this,$vars={},$r0=this._startStructure(1152, true);$vars.locals=this.anything();this._appendStructure($r0,this._applyWithArgs("transJs",$vars.locals.value),1155);return this._endStructure($r0);},
"PopArg":function(){var $elf=this,$vars={},$r0=this._startStructure(1158, true);$vars.n=this.anything();$r0.value=["$vars.",$vars.n.value,"=this.anything()"].join("");return this._endStructure($r0);},
"Rule":function(){var $elf=this,$vars={},$r0=this._startStructure(1163, true);$vars.name=this.anything();$r0.value=(function (){(this["rName"]=$vars.name.value);return (this["_storeVar"]=(0));}).call(this);$vars.body=this._appendStructure($r0,this._apply("trans"),1169);$r0.value=["\n\"",$vars.name.value,"\":function(){var $elf=this,","$vars={},","$r0=this._startStructure(",this.getLocationId(),", true);",$vars.body.value,";return this._endStructure($r0);}"].join("");return this._endStructure($r0);},
"Grammar":function(){var $elf=this,$vars={},$r0=this._startStructure(1173, true);$vars.sName=this.anything();$r0.value=(this["sName"]=$vars.sName.value);$vars.rules=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("trans"),1181);}),1179);$r0.value=["objectThatDelegatesTo(",$vars.sName.value,",{",$vars.rules.value.join(","),"})"].join("");return this._endStructure($r0);},
"intPart":function(){var $elf=this,$vars={},$r0=this._startStructure(1185, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(1189);$vars.mode=this.anything();$vars.part=this._appendStructure($r1,this._apply("transFn"),1193);return this._endStructure($r1);}),1187);$r0.value=(($vars.mode.value.toProgramString() + ",") + $vars.part.value);return this._endStructure($r0);},
"jtCase":function(){var $elf=this,$vars={},$r0=this._startStructure(1197, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(1201);$vars.x=this.anything();$vars.e=this._appendStructure($r1,this._apply("trans"),1205);return this._endStructure($r1);}),1199);$r0.value=[$vars.x.value.toProgramString(),$vars.e.value];return this._endStructure($r0);},
"transJs":function(){var $elf=this,$vars={},$r0=this._startStructure(1209, true);$vars.locals=this.anything();this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionTranslator,"jstrans",this["_storeVar"],$vars.locals.value),1212);return this._endStructure($r0);},
"trans":function(){var $elf=this,$vars={},$r0=this._startStructure(1217, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(1221);$vars.loc=this.anything();$vars.t=this.anything();$r1.value=this.pushLocation($vars.loc.value);$vars.ans=this._appendStructure($r1,this._apply($vars.t.value),1228);$r1.value=this.popLocation();return this._endStructure($r1);}),1219);$r0.value=$vars.ans.value;return this._endStructure($r0);},
"transFn":function(){var $elf=this,$vars={},$r0=this._startStructure(1235, true);$vars.x=this._appendStructure($r0,this._apply("trans"),1238);$r0.value=$vars.x.value;return this._endStructure($r0);}});(BSOMetaTranslator["_callables"]=({"anything": ({"name": "anything","nbArgs": (0)}),"apply": ({"name": "_apply","nbArgs": (1)}),"end": ({"name": "end","nbArgs": (0)}),"exactly": ({"name": "exactly","nbArgs": (1)}),"seq": ({"name": "seq","nbArgs": (1)})}));(BSOMetaTranslator["_optimizedCall"]=(function (rule,args){let c=this["_callables"][rule];return (c && (c["nbArgs"] == args["length"]));}));(BSOMetaTranslator["jumpTableCode"]=(function (cases){var buf=new StringBuffer();buf.nextPutAll((("(function(){var $r" + (this["_storeVar"] + (1))) + "=this._startStructure(-1);"));buf.nextPutAll((("switch(this._appendStructure($r" + (this["_storeVar"] + (1))) + ",this._apply(\'anything\')).value){"));for(var i=(0);(i < cases["length"]);(i+=(1))){buf.nextPutAll((((("case " + cases[i][(0)]) + ":") + cases[i][(1)]) + ";break;"));}buf.nextPutAll((("default: throw fail;}return this._endStructure($r" + (this["_storeVar"] + (1))) + ");}).call(this)"));return buf.contents();}));(BSOMetaTranslator["pushLocation"]=(function (location){if((location != null)){let locationId=createSourceMapId();addToSourseMap(locationId,location["start"],location["stop"]);this["_locations"].push(locationId);}else{this["_locations"].push(this["_locations"][(this["_locations"]["length"] - (1))]);};}));(BSOMetaTranslator["popLocation"]=(function (){this["_locations"].pop();}));(BSOMetaTranslator["getLocationId"]=(function (){return this["_locations"][(this["_locations"]["length"] - (1))];}));(BSOMetaTranslator["initialize"]=(function (){(this["_locations"]=[]);}))


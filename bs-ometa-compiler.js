// This file was generated using Gnometa
// https://github.com/djdeath/gnometa
let BSSemActionParser=objectThatDelegatesTo(BSJSParser,{
"jsOmetaKeyword":function(){var $elf=this,$vars={},$r0=this._startStructure(0);$vars.k=this._getStructureValue(this.anything());this._appendStructure($r0,this._apply("spaces"));this._appendStructure($r0,this.exactly("@"));$vars.n=this._appendStructure($r0,this._apply("iName"));this._pred(($vars.k == $vars.n));$r0.value=$vars.k;return this._endStructure($r0);},
"primExprHd":function(){var $elf=this,$vars={},$r0=this._startStructure(11);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(13);this._appendStructure($r1,this._applyWithArgs("jsOmetaKeyword","location"));$r1.value=["Location"];return this._endStructure($r1);},function(){var $r1=this._startStructure(17);$r1.value=this._appendStructure($r1,BSJSParser._superApplyWithArgs(this,"primExprHd"));return this._endStructure($r1);}));return this._endStructure($r0);},
"curlySemAction":function(){var $elf=this,$vars={},$r0=this._startStructure(21);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(23);this._appendStructure($r1,this._applyWithArgs("token","{"));$vars.r=this._appendStructure($r1,this._apply("expr"));this._appendStructure($r1,this._apply("sc"));this._appendStructure($r1,this._applyWithArgs("token","}"));$r1.value=$vars.r;return this._endStructure($r1);},function(){var $r1=this._startStructure(34);this._appendStructure($r1,this._applyWithArgs("token","{"));$vars.ss=this._appendStructure($r1,this._many(function(){var $r2=this._startStructure(41);$vars.s=this._appendStructure($r2,this._apply("srcElem"));this._appendStructure($r2,this._lookahead(function(){var $r3=this._startStructure(48);$r3.value=this._appendStructure($r3,this._apply("srcElem"));return this._endStructure($r3);}));$r2.value=$vars.s;return this._endStructure($r2);}));$vars.s=this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(55);$vars.r=this._appendStructure($r2,this._apply("expr"));this._appendStructure($r2,this._apply("sc"));$r2.value=["return",$vars.r];return this._endStructure($r2);},function(){var $r2=this._startStructure(62);$r2.value=this._appendStructure($r2,this._apply("srcElem"));return this._endStructure($r2);}));$vars.ss.push($vars.s);this._appendStructure($r1,this._applyWithArgs("token","}"));$r1.value=["send","call",["func",[],["begin"].concat($vars.ss)],["this"]];return this._endStructure($r1);}));return this._endStructure($r0);},
"semAction":function(){var $elf=this,$vars={},$r0=this._startStructure(68);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(70);$r1.value=this._appendStructure($r1,this._apply("curlySemAction"));return this._endStructure($r1);},function(){var $r1=this._startStructure(74);$vars.r=this._appendStructure($r1,this._apply("primExpr"));this._appendStructure($r1,this._apply("spaces"));$r1.value=$vars.r;return this._endStructure($r1);}));return this._endStructure($r0);}});let BSOMetaParser=objectThatDelegatesTo(BaseStrParser,{
"enum":function(){var $elf=this,$vars={},$r0=this._startStructure(81);$vars.r=this._getStructureValue(this.anything());$vars.d=this._getStructureValue(this.anything());$vars.v=this._appendStructure($r0,this._applyWithArgs("listOf",$vars.r,$vars.d));this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(90);$r1.value=this._appendStructure($r1,this._applyWithArgs("token",","));return this._endStructure($r1);},function(){var $r1=this._startStructure(94);$r1.value=this._appendStructure($r1,this._apply("empty"));return this._endStructure($r1);}));$r0.value=$vars.v;return this._endStructure($r0);},
"space":function(){var $elf=this,$vars={},$r0=this._startStructure(98);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(100);$r1.value=this._appendStructure($r1,BaseStrParser._superApplyWithArgs(this,"space"));return this._endStructure($r1);},function(){var $r1=this._startStructure(104);$r1.value=this._appendStructure($r1,this._applyWithArgs("fromTo","//","\n"));return this._endStructure($r1);},function(){var $r1=this._startStructure(108);$r1.value=this._appendStructure($r1,this._applyWithArgs("fromTo","/*","*/"));return this._endStructure($r1);}));return this._endStructure($r0);},
"nameFirst":function(){var $elf=this,$vars={},$r0=this._startStructure(112);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(114);$r1.value=this._appendStructure($r1,this.exactly("_"));return this._endStructure($r1);},function(){var $r1=this._startStructure(118);$r1.value=this._appendStructure($r1,this.exactly("$"));return this._endStructure($r1);},function(){var $r1=this._startStructure(122);$r1.value=this._appendStructure($r1,this._apply("letter"));return this._endStructure($r1);}));return this._endStructure($r0);},
"nameRest":function(){var $elf=this,$vars={},$r0=this._startStructure(126);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(128);$r1.value=this._appendStructure($r1,this._apply("nameFirst"));return this._endStructure($r1);},function(){var $r1=this._startStructure(132);$r1.value=this._appendStructure($r1,this._apply("digit"));return this._endStructure($r1);}));return this._endStructure($r0);},
"tsName":function(){var $elf=this,$vars={},$r0=this._startStructure(136);$r0.value=this._appendStructure($r0,this._consumedBy(function(){var $r1=this._startStructure(138);this._appendStructure($r1,this._apply("nameFirst"));$r1.value=this._appendStructure($r1,this._many(function(){var $r2=this._startStructure(145);$r2.value=this._appendStructure($r2,this._apply("nameRest"));return this._endStructure($r2);}));return this._endStructure($r1);}));return this._endStructure($r0);},
"name":function(){var $elf=this,$vars={},$r0=this._startStructure(149);this._appendStructure($r0,this._apply("spaces"));$r0.value=this._appendStructure($r0,this._apply("tsName"));return this._endStructure($r0);},
"hexDigit":function(){var $elf=this,$vars={},$r0=this._startStructure(156);$vars.x=this._appendStructure($r0,this._apply("char"));$vars.v=this["hexDigits"].indexOf($vars.x.toLowerCase());this._pred(($vars.v >= (0)));$r0.value=$vars.v;return this._endStructure($r0);},
"eChar":function(){var $elf=this,$vars={},$r0=this._startStructure(163);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(165);$vars.s=this._appendStructure($r1,this._consumedBy(function(){var $r2=this._startStructure(170);this._appendStructure($r2,this.exactly("\\"));$r2.value=this._appendStructure($r2,this._or(function(){var $r3=this._startStructure(177);this._appendStructure($r3,this.exactly("u"));this._appendStructure($r3,this._apply("hexDigit"));this._appendStructure($r3,this._apply("hexDigit"));this._appendStructure($r3,this._apply("hexDigit"));$r3.value=this._appendStructure($r3,this._apply("hexDigit"));return this._endStructure($r3);},function(){var $r3=this._startStructure(190);this._appendStructure($r3,this.exactly("x"));this._appendStructure($r3,this._apply("hexDigit"));$r3.value=this._appendStructure($r3,this._apply("hexDigit"));return this._endStructure($r3);},function(){var $r3=this._startStructure(199);$r3.value=this._appendStructure($r3,this._apply("char"));return this._endStructure($r3);}));return this._endStructure($r2);}));$r1.value=unescape($vars.s);return this._endStructure($r1);},function(){var $r1=this._startStructure(203);$r1.value=this._appendStructure($r1,this._apply("char"));return this._endStructure($r1);}));return this._endStructure($r0);},
"tsString":function(){var $elf=this,$vars={},$r0=this._startStructure(207);this._appendStructure($r0,this.exactly("\'"));$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(214);this._appendStructure($r1,this._not(function(){var $r2=this._startStructure(218);$r2.value=this._appendStructure($r2,this.exactly("\'"));return this._endStructure($r2);}));$r1.value=this._appendStructure($r1,this._apply("eChar"));return this._endStructure($r1);}));this._appendStructure($r0,this.exactly("\'"));$r0.value=$vars.xs.join("");return this._endStructure($r0);},
"characters":function(){var $elf=this,$vars={},$r0=this._startStructure(227);this._appendStructure($r0,this.exactly("`"));this._appendStructure($r0,this.exactly("`"));$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(236);this._appendStructure($r1,this._not(function(){var $r2=this._startStructure(240);this._appendStructure($r2,this.exactly("\'"));$r2.value=this._appendStructure($r2,this.exactly("\'"));return this._endStructure($r2);}));$r1.value=this._appendStructure($r1,this._apply("eChar"));return this._endStructure($r1);}));this._appendStructure($r0,this.exactly("\'"));this._appendStructure($r0,this.exactly("\'"));$r0.value=[this._extractLocation($r0),"App","seq",jsValue("string",$vars.xs.join(""))];return this._endStructure($r0);},
"sCharacters":function(){var $elf=this,$vars={},$r0=this._startStructure(254);this._appendStructure($r0,this.exactly("\""));$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(261);this._appendStructure($r1,this._not(function(){var $r2=this._startStructure(265);$r2.value=this._appendStructure($r2,this.exactly("\""));return this._endStructure($r2);}));$r1.value=this._appendStructure($r1,this._apply("eChar"));return this._endStructure($r1);}));this._appendStructure($r0,this.exactly("\""));$r0.value=[this._extractLocation($r0),"App","token",jsValue("string",$vars.xs.join(""))];return this._endStructure($r0);},
"string":function(){var $elf=this,$vars={},$r0=this._startStructure(274);$vars.xs=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(279);this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(283);$r2.value=this._appendStructure($r2,this.exactly("#"));return this._endStructure($r2);},function(){var $r2=this._startStructure(287);$r2.value=this._appendStructure($r2,this.exactly("`"));return this._endStructure($r2);}));$r1.value=this._appendStructure($r1,this._apply("tsName"));return this._endStructure($r1);},function(){var $r1=this._startStructure(294);$r1.value=this._appendStructure($r1,this._apply("tsString"));return this._endStructure($r1);}));$r0.value=[this._extractLocation($r0),"App","exactly",jsValue("string",$vars.xs)];return this._endStructure($r0);},
"number":function(){var $elf=this,$vars={},$r0=this._startStructure(298);$vars.n=this._appendStructure($r0,this._consumedBy(function(){var $r1=this._startStructure(303);this._appendStructure($r1,this._opt(function(){var $r2=this._startStructure(307);$r2.value=this._appendStructure($r2,this.exactly("-"));return this._endStructure($r2);}));$r1.value=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(314);$r2.value=this._appendStructure($r2,this._apply("digit"));return this._endStructure($r2);}));return this._endStructure($r1);}));$r0.value=[this._extractLocation($r0),"App","exactly",jsValue("number",$vars.n)];return this._endStructure($r0);},
"keyword":function(){var $elf=this,$vars={},$r0=this._startStructure(318);$vars.xs=this._getStructureValue(this.anything());this._appendStructure($r0,this._applyWithArgs("token",$vars.xs));this._appendStructure($r0,this._not(function(){var $r1=this._startStructure(325);$r1.value=this._appendStructure($r1,this._apply("letterOrDigit"));return this._endStructure($r1);}));$r0.value=$vars.xs;return this._endStructure($r0);},
"args":function(){var $elf=this,$vars={},$r0=this._startStructure(329);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(331);this._appendStructure($r1,this.exactly("("));$vars.xs=this._appendStructure($r1,this._applyWithArgs("listOf","hostExpr",","));this._appendStructure($r1,this._applyWithArgs("token",")"));$r1.value=$vars.xs;return this._endStructure($r1);},function(){var $r1=this._startStructure(340);this._appendStructure($r1,this._apply("empty"));$r1.value=[];return this._endStructure($r1);}));return this._endStructure($r0);},
"application":function(){var $elf=this,$vars={},$r0=this._startStructure(344);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(346);this._appendStructure($r1,this._applyWithArgs("token","^"));$vars.rule=this._appendStructure($r1,this._apply("name"));$vars.as=this._appendStructure($r1,this._apply("args"));$r1.value=[this._extractLocation($r1),"App","super",jsValue("string",$vars.rule)].concat($vars.as);return this._endStructure($r1);},function(){var $r1=this._startStructure(356);$vars.grm=this._appendStructure($r1,this._apply("name"));this._appendStructure($r1,this._applyWithArgs("token","."));$vars.rule=this._appendStructure($r1,this._apply("name"));$vars.as=this._appendStructure($r1,this._apply("args"));$r1.value=[this._extractLocation($r1),"App","foreign",jsCode(this["locals"],["get",$vars.grm]),jsValue("string",$vars.rule)].concat($vars.as);return this._endStructure($r1);},function(){var $r1=this._startStructure(369);$vars.rule=this._appendStructure($r1,this._apply("name"));$vars.as=this._appendStructure($r1,this._apply("args"));$r1.value=[this._extractLocation($r1),"App",$vars.rule].concat($vars.as);return this._endStructure($r1);}));return this._endStructure($r0);},
"hostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(377);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionParser,"expr"));$r0.value=jsCode(this["locals"],$vars.r);return this._endStructure($r0);},
"curlyHostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(382);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionParser,"curlySemAction"));$r0.value=jsCode(this["locals"],$vars.r);return this._endStructure($r0);},
"primHostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(387);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionParser,"semAction"));$r0.value=jsCode(this["locals"],$vars.r);return this._endStructure($r0);},
"atomicHostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(392);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(394);$r1.value=this._appendStructure($r1,this._apply("curlyHostExpr"));return this._endStructure($r1);},function(){var $r1=this._startStructure(398);$r1.value=this._appendStructure($r1,this._apply("primHostExpr"));return this._endStructure($r1);}));return this._endStructure($r0);},
"semAction":function(){var $elf=this,$vars={},$r0=this._startStructure(402);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(404);$r1.value=($vars.x=this._appendStructure($r1,this._apply("curlyHostExpr")));return this._endStructure($r1);},function(){var $r1=this._startStructure(410);this._appendStructure($r1,this._applyWithArgs("token","!"));$r1.value=($vars.x=this._appendStructure($r1,this._apply("atomicHostExpr")));return this._endStructure($r1);}));return this._endStructure($r0);},
"arrSemAction":function(){var $elf=this,$vars={},$r0=this._startStructure(419);this._appendStructure($r0,this._applyWithArgs("token","->"));$r0.value=($vars.x=this._appendStructure($r0,this._apply("atomicHostExpr")));return this._endStructure($r0);},
"semPred":function(){var $elf=this,$vars={},$r0=this._startStructure(428);this._appendStructure($r0,this._applyWithArgs("token","?"));$vars.x=this._appendStructure($r0,this._apply("atomicHostExpr"));$r0.value=[this._extractLocation($r0),"Pred",$vars.x];return this._endStructure($r0);},
"expr":function(){var $elf=this,$vars={},$r0=this._startStructure(435);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(437);$vars.x=this._appendStructure($r1,this._applyWithArgs("expr5",true));$vars.xs=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(445);this._appendStructure($r2,this._applyWithArgs("token","|"));$r2.value=this._appendStructure($r2,this._applyWithArgs("expr5",true));return this._endStructure($r2);}));$r1.value=[this._extractLocation($r1),"Or",$vars.x].concat($vars.xs);return this._endStructure($r1);},function(){var $r1=this._startStructure(452);$vars.x=this._appendStructure($r1,this._applyWithArgs("expr5",true));$vars.xs=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(460);this._appendStructure($r2,this._applyWithArgs("token","||"));$r2.value=this._appendStructure($r2,this._applyWithArgs("expr5",true));return this._endStructure($r2);}));$r1.value=[this._extractLocation($r1),"XOr",$vars.x].concat($vars.xs);return this._endStructure($r1);},function(){var $r1=this._startStructure(467);$r1.value=this._appendStructure($r1,this._applyWithArgs("expr5",false));return this._endStructure($r1);}));return this._endStructure($r0);},
"expr5":function(){var $elf=this,$vars={},$r0=this._startStructure(471);$vars.ne=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(477);$vars.x=this._appendStructure($r1,this._apply("interleavePart"));$vars.xs=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(485);this._appendStructure($r2,this._applyWithArgs("token","&&"));$r2.value=this._appendStructure($r2,this._apply("interleavePart"));return this._endStructure($r2);}));$r1.value=[this._extractLocation($r1),"Interleave",$vars.x].concat($vars.xs);return this._endStructure($r1);},function(){var $r1=this._startStructure(492);$r1.value=this._appendStructure($r1,this._applyWithArgs("expr4",$vars.ne));return this._endStructure($r1);}));return this._endStructure($r0);},
"interleavePart":function(){var $elf=this,$vars={},$r0=this._startStructure(496);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(498);this._appendStructure($r1,this._applyWithArgs("token","("));$vars.part=this._appendStructure($r1,this._applyWithArgs("expr4",true));this._appendStructure($r1,this._applyWithArgs("token",")"));$r1.value=["1",$vars.part];return this._endStructure($r1);},function(){var $r1=this._startStructure(507);$vars.part=this._appendStructure($r1,this._applyWithArgs("expr4",true));$r1.value=this._appendStructure($r1,this._applyWithArgs("modedIPart",$vars.part));return this._endStructure($r1);}));return this._endStructure($r0);},
"modedIPart":function(){var $elf=this,$vars={},$r0=this._startStructure(515);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(517);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(521);this._appendStructure($r2,this.exactly("And"));$r2.value=this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(528);this._appendStructure($r3,this.exactly("Many"));$r3.value=($vars.part=this._getStructureValue(this.anything()));return this._endStructure($r3);}));return this._endStructure($r2);}));$r1.value=["*",$vars.part];return this._endStructure($r1);},function(){var $r1=this._startStructure(535);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(539);this._appendStructure($r2,this.exactly("And"));$r2.value=this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(546);this._appendStructure($r3,this.exactly("Many1"));$r3.value=($vars.part=this._getStructureValue(this.anything()));return this._endStructure($r3);}));return this._endStructure($r2);}));$r1.value=["+",$vars.part];return this._endStructure($r1);},function(){var $r1=this._startStructure(553);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(557);this._appendStructure($r2,this.exactly("And"));$r2.value=this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(564);this._appendStructure($r3,this.exactly("Opt"));$r3.value=($vars.part=this._getStructureValue(this.anything()));return this._endStructure($r3);}));return this._endStructure($r2);}));$r1.value=["?",$vars.part];return this._endStructure($r1);},function(){var $r1=this._startStructure(571);$vars.part=this._getStructureValue(this.anything());$r1.value=["1",$vars.part];return this._endStructure($r1);}));return this._endStructure($r0);},
"expr4":function(){var $elf=this,$vars={},$r0=this._startStructure(574);$vars.ne=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(580);$vars.xs=this._appendStructure($r1,this._many(function(){var $r2=this._startStructure(585);$r2.value=this._appendStructure($r2,this._apply("expr3"));return this._endStructure($r2);}));$vars.act=this._appendStructure($r1,this._apply("arrSemAction"));$r1.value=[this._extractLocation($r1),"And"].concat($vars.xs).concat([$vars.act]);return this._endStructure($r1);},function(){var $r1=this._startStructure(592);this._pred($vars.ne);$vars.xs=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(598);$r2.value=this._appendStructure($r2,this._apply("expr3"));return this._endStructure($r2);}));$r1.value=[this._extractLocation($r1),"And"].concat($vars.xs);return this._endStructure($r1);},function(){var $r1=this._startStructure(602);this._pred(($vars.ne == false));$vars.xs=this._appendStructure($r1,this._many(function(){var $r2=this._startStructure(608);$r2.value=this._appendStructure($r2,this._apply("expr3"));return this._endStructure($r2);}));$r1.value=[this._extractLocation($r1),"And"].concat($vars.xs);return this._endStructure($r1);}));return this._endStructure($r0);},
"optIter":function(){var $elf=this,$vars={},$r0=this._startStructure(612);$vars.x=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(618);this._appendStructure($r1,this.exactly("*"));$r1.value=[this._extractLocation($r1),"Many",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(622);this._appendStructure($r1,this.exactly("+"));$r1.value=[this._extractLocation($r1),"Many1",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(626);this._appendStructure($r1,this.exactly("?"));$r1.value=[this._extractLocation($r1),"Opt",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(630);this._appendStructure($r1,this._apply("empty"));$r1.value=$vars.x;return this._endStructure($r1);}));return this._endStructure($r0);},
"optBind":function(){var $elf=this,$vars={},$r0=this._startStructure(634);$vars.x=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(640);this._appendStructure($r1,this.exactly(":"));$vars.n=this._appendStructure($r1,this._apply("name"));$r1.value=(function (){(this["locals"][$vars.n]=true);return [this._extractLocation($r1),"Set",$vars.n,$vars.x];}).call(this);return this._endStructure($r1);},function(){var $r1=this._startStructure(647);this._appendStructure($r1,this._apply("empty"));$r1.value=$vars.x;return this._endStructure($r1);}));return this._endStructure($r0);},
"expr3":function(){var $elf=this,$vars={},$r0=this._startStructure(651);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(653);this._appendStructure($r1,this._applyWithArgs("token",":"));$vars.n=this._appendStructure($r1,this._apply("name"));$r1.value=(function (){(this["locals"][$vars.n]=true);return [this._extractLocation($r1),"Set",$vars.n,[null,"PopArg"]];}).call(this);return this._endStructure($r1);},function(){var $r1=this._startStructure(660);$vars.e=this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(665);$vars.x=this._appendStructure($r2,this._apply("expr2"));$r2.value=this._appendStructure($r2,this._applyWithArgs("optIter",$vars.x));return this._endStructure($r2);},function(){var $r2=this._startStructure(673);$r2.value=this._appendStructure($r2,this._apply("semAction"));return this._endStructure($r2);}));$r1.value=this._appendStructure($r1,this._applyWithArgs("optBind",$vars.e));return this._endStructure($r1);},function(){var $r1=this._startStructure(680);$r1.value=this._appendStructure($r1,this._apply("semPred"));return this._endStructure($r1);}));return this._endStructure($r0);},
"expr2":function(){var $elf=this,$vars={},$r0=this._startStructure(684);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(686);this._appendStructure($r1,this._applyWithArgs("token","~"));$vars.x=this._appendStructure($r1,this._apply("expr2"));$r1.value=[this._extractLocation($r1),"Not",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(693);this._appendStructure($r1,this._applyWithArgs("token","&"));$vars.x=this._appendStructure($r1,this._apply("expr1"));$r1.value=[this._extractLocation($r1),"Lookahead",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(700);$r1.value=this._appendStructure($r1,this._apply("expr1"));return this._endStructure($r1);}));return this._endStructure($r0);},
"expr1":function(){var $elf=this,$vars={},$r0=this._startStructure(704);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(706);$r1.value=this._appendStructure($r1,this._apply("application"));return this._endStructure($r1);},function(){var $r1=this._startStructure(710);$vars.x=this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(715);$r2.value=this._appendStructure($r2,this._applyWithArgs("keyword","undefined"));return this._endStructure($r2);},function(){var $r2=this._startStructure(719);$r2.value=this._appendStructure($r2,this._applyWithArgs("keyword","nil"));return this._endStructure($r2);},function(){var $r2=this._startStructure(723);$r2.value=this._appendStructure($r2,this._applyWithArgs("keyword","true"));return this._endStructure($r2);},function(){var $r2=this._startStructure(727);$r2.value=this._appendStructure($r2,this._applyWithArgs("keyword","false"));return this._endStructure($r2);}));$r1.value=[this._extractLocation($r1),"App","exactly",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(731);this._appendStructure($r1,this._apply("spaces"));$r1.value=this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(738);$r2.value=this._appendStructure($r2,this._apply("characters"));return this._endStructure($r2);},function(){var $r2=this._startStructure(742);$r2.value=this._appendStructure($r2,this._apply("sCharacters"));return this._endStructure($r2);},function(){var $r2=this._startStructure(746);$r2.value=this._appendStructure($r2,this._apply("string"));return this._endStructure($r2);},function(){var $r2=this._startStructure(750);$r2.value=this._appendStructure($r2,this._apply("number"));return this._endStructure($r2);}));return this._endStructure($r1);},function(){var $r1=this._startStructure(754);this._appendStructure($r1,this._applyWithArgs("token","["));$vars.x=this._appendStructure($r1,this._apply("expr"));this._appendStructure($r1,this._applyWithArgs("token","]"));$r1.value=[this._extractLocation($r1),"Form",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(763);this._appendStructure($r1,this._applyWithArgs("token","<"));$vars.x=this._appendStructure($r1,this._apply("expr"));this._appendStructure($r1,this._applyWithArgs("token",">"));$r1.value=[this._extractLocation($r1),"ConsBy",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(772);this._appendStructure($r1,this._applyWithArgs("token","@<"));$vars.x=this._appendStructure($r1,this._apply("expr"));this._appendStructure($r1,this._applyWithArgs("token",">"));$r1.value=[this._extractLocation($r1),"IdxConsBy",$vars.x];return this._endStructure($r1);},function(){var $r1=this._startStructure(781);this._appendStructure($r1,this._applyWithArgs("token","("));$vars.x=this._appendStructure($r1,this._apply("expr"));this._appendStructure($r1,this._applyWithArgs("token",")"));$r1.value=$vars.x;return this._endStructure($r1);}));return this._endStructure($r0);},
"ruleName":function(){var $elf=this,$vars={},$r0=this._startStructure(790);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(792);$r1.value=this._appendStructure($r1,this._apply("name"));return this._endStructure($r1);},function(){var $r1=this._startStructure(796);this._appendStructure($r1,this._apply("spaces"));$r1.value=this._appendStructure($r1,this._apply("tsString"));return this._endStructure($r1);}));return this._endStructure($r0);},
"rule":function(){var $elf=this,$vars={},$r0=this._startStructure(803);this._appendStructure($r0,this._lookahead(function(){var $r1=this._startStructure(807);$r1.value=($vars.n=this._appendStructure($r1,this._apply("ruleName")));return this._endStructure($r1);}));(this["locals"]=({}));$vars.x=this._appendStructure($r0,this._applyWithArgs("rulePart",$vars.n));$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(819);this._appendStructure($r1,this._applyWithArgs("token",","));$r1.value=this._appendStructure($r1,this._applyWithArgs("rulePart",$vars.n));return this._endStructure($r1);}));$r0.value=[this._extractLocation($r0),"Rule",$vars.n,[this._extractLocation($r0),"Or",$vars.x].concat($vars.xs)];return this._endStructure($r0);},
"rulePart":function(){var $elf=this,$vars={},$r0=this._startStructure(826);$vars.rn=this._getStructureValue(this.anything());$vars.n=this._appendStructure($r0,this._apply("ruleName"));this._pred(($vars.n == $vars.rn));$vars.b1=this._appendStructure($r0,this._applyWithArgs("expr4",false));$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(839);this._appendStructure($r1,this._applyWithArgs("token","="));$vars.b2=this._appendStructure($r1,this._apply("expr"));$r1.value=[this._extractLocation($r1),"And",$vars.b1,$vars.b2];return this._endStructure($r1);},function(){var $r1=this._startStructure(846);this._appendStructure($r1,this._apply("empty"));$r1.value=$vars.b1;return this._endStructure($r1);}));return this._endStructure($r0);},
"grammar":function(){var $elf=this,$vars={},$r0=this._startStructure(850);this._appendStructure($r0,this._applyWithArgs("keyword","ometa"));$vars.sn=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(857);this._appendStructure($r1,this._applyWithArgs("token","("));$vars.sni=this._appendStructure($r1,this._apply("name"));this._appendStructure($r1,this._applyWithArgs("token",")"));$r1.value=$vars.sni;return this._endStructure($r1);},function(){var $r1=this._startStructure(866);this._appendStructure($r1,this._apply("empty"));$r1.value="OMeta";return this._endStructure($r1);}));this._appendStructure($r0,this._applyWithArgs("token","{"));$vars.rs=this._appendStructure($r0,this._applyWithArgs("enum","rule",","));this._appendStructure($r0,this._applyWithArgs("token","}"));$r0.value=this._appendStructure($r0,this._applyWithArgs("foreign",BSOMetaOptimizer,"optimizeGrammar",["Grammar",$vars.sn].concat($vars.rs)));return this._endStructure($r0);}});(BSOMetaParser["hexDigits"]="0123456789abcdef");let BSSemActionTranslator=objectThatDelegatesTo(BSJSTranslator,{
"Location":function(){var $elf=this,$vars={},$r0=this._startStructure(880);$r0.value=["this._extractLocation($r",this["_storeVal"],")"].join("");return this._endStructure($r0);},
"get":function(){var $elf=this,$vars={},$r0=this._startStructure(883);$vars.n=this._getStructureValue(this.anything());$r0.value=this._renameVariable($vars.n);return this._endStructure($r0);},
"name":function(){var $elf=this,$vars={},$r0=this._startStructure(886);$vars.n=this._getStructureValue(this.anything());$r0.value=this._renameVariable($vars.n);return this._endStructure($r0);},
"jstrans":function(){var $elf=this,$vars={},$r0=this._startStructure(889);$vars.storeVal=this._getStructureValue(this.anything());$vars.toRename=this._getStructureValue(this.anything());(function (){(this["_storeVal"]=$vars.storeVal);return (this["_toRename"]=$vars.toRename);}).call(this);$r0.value=this._appendStructure($r0,this._apply("trans"));return this._endStructure($r0);}});(BSSemActionTranslator["_renameVariable"]=(function (name){if(((name != "$elf") && this["_toRename"][name])){return ("$vars." + name);}else{undefined;}return name;}));let BSOMetaTranslator=objectThatDelegatesTo(OMeta,{
"App":function(){var $elf=this,$vars={},$r0=this._startStructure(896);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(898);this._appendStructure($r1,this.exactly("super"));$vars.args=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(905);$r2.value=this._appendStructure($r2,this._apply("transFn"));return this._endStructure($r2);}));$r1.value=[this["sName"],"._superApplyWithArgs(this,",$vars.args.join(","),")"].join("");return this._endStructure($r1);},function(){var $r1=this._startStructure(909);$vars.rule=this._getStructureValue(this.anything());$vars.args=this._appendStructure($r1,this._many(function(){var $r2=this._startStructure(915);$r2.value=this._appendStructure($r2,this._apply("transFn"));return this._endStructure($r2);}));$r1.value=this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(922);this._pred(this._optimizedCall($vars.rule,$vars.args));$r2.value=["this.",this["_callables"][$vars.rule]["name"],"(",$vars.args.join(","),")"].join("");return this._endStructure($r2);},function(){var $r2=this._startStructure(925);this._pred(($vars.args["length"] < (1)));$r2.value=["this._apply(\"",$vars.rule,"\")"].join("");return this._endStructure($r2);},function(){var $r2=this._startStructure(928);$r2.value=["this._applyWithArgs(\"",$vars.rule,"\",",$vars.args.join(","),")"].join("");return this._endStructure($r2);}));return this._endStructure($r1);}));return this._endStructure($r0);},
"Pred":function(){var $elf=this,$vars={},$r0=this._startStructure(931);$vars.expr=this._appendStructure($r0,this._apply("transFn"));$r0.value=["this._pred(",$vars.expr,")"].join("");return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(936);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(941);$r1.value=this._appendStructure($r1,this._apply("transFn"));return this._endStructure($r1);}));$r0.value=["this._or(",$vars.xs.join(","),")"].join("");return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(945);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(950);$r1.value=this._appendStructure($r1,this._apply("transFn"));return this._endStructure($r1);}));$vars.xs.unshift(this["rName"].toProgramString());$r0.value=["this._xor(",$vars.xs.join(","),")"].join("");return this._endStructure($r0);},
"And":function(){var $elf=this,$vars={},$r0=this._startStructure(954);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(956);$vars.xs=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(961);$r2.value=this._appendStructure($r2,this._apply("transFn"));return this._endStructure($r2);}));$r1.value=$vars.xs.join(";");return this._endStructure($r1);},function(){var $r1=this._startStructure(965);$r1.value="undefined";return this._endStructure($r1);}));return this._endStructure($r0);},
"Opt":function(){var $elf=this,$vars={},$r0=this._startStructure(968);$vars.x=this._appendStructure($r0,this._apply("transFn"));$r0.value=["this._opt(",$vars.x,")"].join("");return this._endStructure($r0);},
"Many":function(){var $elf=this,$vars={},$r0=this._startStructure(973);$vars.x=this._appendStructure($r0,this._apply("transFn"));$r0.value=["this._many(",$vars.x,")"].join("");return this._endStructure($r0);},
"Many1":function(){var $elf=this,$vars={},$r0=this._startStructure(978);$vars.x=this._appendStructure($r0,this._apply("transFn"));$r0.value=["this._many1(",$vars.x,")"].join("");return this._endStructure($r0);},
"Set":function(){var $elf=this,$vars={},$r0=this._startStructure(983);$vars.n=this._getStructureValue(this.anything());$vars.v=this._appendStructure($r0,this._apply("transFn"));$r0.value=["$vars.",$vars.n,"=",$vars.v].join("");return this._endStructure($r0);},
"Not":function(){var $elf=this,$vars={},$r0=this._startStructure(989);$vars.x=this._appendStructure($r0,this._apply("transFn"));$r0.value=["this._not(",$vars.x,")"].join("");return this._endStructure($r0);},
"Lookahead":function(){var $elf=this,$vars={},$r0=this._startStructure(994);$vars.x=this._appendStructure($r0,this._apply("transFn"));$r0.value=["this._lookahead(",$vars.x,")"].join("");return this._endStructure($r0);},
"Form":function(){var $elf=this,$vars={},$r0=this._startStructure(999);$vars.x=this._appendStructure($r0,this._apply("transFn"));$r0.value=["this._form(",$vars.x,")"].join("");return this._endStructure($r0);},
"ConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(1004);$vars.x=this._appendStructure($r0,this._apply("transFn"));$r0.value=["this._consumedBy(",$vars.x,")"].join("");return this._endStructure($r0);},
"IdxConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(1009);$vars.x=this._appendStructure($r0,this._apply("transFn"));$r0.value=["this._idxConsumedBy(",$vars.x,")"].join("");return this._endStructure($r0);},
"JumpTable":function(){var $elf=this,$vars={},$r0=this._startStructure(1014);this["_storeVar"]++;$vars.cases=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(1019);$r1.value=this._appendStructure($r1,this._apply("jtCase"));return this._endStructure($r1);}));this["_storeVar"]--;$r0.value=this.jumpTableCode($vars.cases);return this._endStructure($r0);},
"Interleave":function(){var $elf=this,$vars={},$r0=this._startStructure(1023);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(1028);$r1.value=this._appendStructure($r1,this._apply("intPart"));return this._endStructure($r1);}));$r0.value=["this._interleave(",$vars.xs.join(","),")"].join("");return this._endStructure($r0);},
"Function":function(){var $elf=this,$vars={},$r0=this._startStructure(1032);this["_storeVar"]++;$vars.x=this._appendStructure($r0,this._apply("transFn"));this["_storeVar"]--;$r0.value=["function(){",$vars.x,";}"].join("");return this._endStructure($r0);},
"FunctionStructure":function(){var $elf=this,$vars={},$r0=this._startStructure(1037);this["_storeVar"]++;$vars.xs=this._appendStructure($r0,this._many1(function(){var $r1=this._startStructure(1042);$r1.value=this._appendStructure($r1,this._apply("transFn"));return this._endStructure($r1);}));this["_storeVar"]--;$r0.value=["function(){var $r",(this["_storeVar"] + (1)),"=this._startStructure(",this.getLocationId(),");",$vars.xs.join(";"),";return this._endStructure($r",(this["_storeVar"] + (1)),");}"].join("");return this._endStructure($r0);},
"ReturnStructure":function(){var $elf=this,$vars={},$r0=this._startStructure(1046);$vars.x=this._appendStructure($r0,this._apply("transFn"));$r0.value=["$r",this["_storeVar"],".value=",$vars.x].join("");return this._endStructure($r0);},
"Return":function(){var $elf=this,$vars={},$r0=this._startStructure(1051);$vars.x=this._appendStructure($r0,this._apply("transFn"));$r0.value=["return ",$vars.x].join("");return this._endStructure($r0);},
"Parenthesis":function(){var $elf=this,$vars={},$r0=this._startStructure(1056);$vars.x=this._appendStructure($r0,this._apply("transFn"));$r0.value=["(",$vars.x,")"].join("");return this._endStructure($r0);},
"Store":function(){var $elf=this,$vars={},$r0=this._startStructure(1061);$vars.x=this._appendStructure($r0,this._apply("transFn"));$r0.value=["this._appendStructure($r",this["_storeVar"],",",$vars.x,")"].join("");return this._endStructure($r0);},
"Js":function(){var $elf=this,$vars={},$r0=this._startStructure(1066);$vars.locals=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._applyWithArgs("transJs",$vars.locals));return this._endStructure($r0);},
"PopArg":function(){var $elf=this,$vars={},$r0=this._startStructure(1072);$r0.value="this._getStructureValue(this.anything())";return this._endStructure($r0);},
"Rule":function(){var $elf=this,$vars={},$r0=this._startStructure(1075);$vars.name=this._getStructureValue(this.anything());(function (){(this["rName"]=$vars.name);return (this["_storeVar"]=(0));}).call(this);$vars.body=this._appendStructure($r0,this._apply("trans"));$r0.value=["\n\"",$vars.name,"\":function(){var $elf=this,","$vars={},","$r0=this._startStructure(",this.getLocationId(),");",$vars.body,";return this._endStructure($r0);}"].join("");return this._endStructure($r0);},
"Grammar":function(){var $elf=this,$vars={},$r0=this._startStructure(1081);$vars.sName=this._getStructureValue(this.anything());(function (){(this["sName"]=$vars.sName);return (this["_locations"]=[]);}).call(this);$vars.rules=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(1087);$r1.value=this._appendStructure($r1,this._apply("trans"));return this._endStructure($r1);}));$r0.value=["objectThatDelegatesTo(",$vars.sName,",{",$vars.rules.join(","),"})"].join("");return this._endStructure($r0);},
"intPart":function(){var $elf=this,$vars={},$r0=this._startStructure(1091);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(1095);$vars.mode=this._getStructureValue(this.anything());$r1.value=($vars.part=this._appendStructure($r1,this._apply("transFn")));return this._endStructure($r1);}));$r0.value=(($vars.mode.toProgramString() + ",") + $vars.part);return this._endStructure($r0);},
"jtCase":function(){var $elf=this,$vars={},$r0=this._startStructure(1103);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(1107);$vars.x=this._getStructureValue(this.anything());$r1.value=($vars.e=this._appendStructure($r1,this._apply("trans")));return this._endStructure($r1);}));$r0.value=[$vars.x.toProgramString(),$vars.e];return this._endStructure($r0);},
"transJs":function(){var $elf=this,$vars={},$r0=this._startStructure(1115);$vars.locals=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionTranslator,"jstrans",this["_storeVar"],$vars.locals));return this._endStructure($r0);},
"trans":function(){var $elf=this,$vars={},$r0=this._startStructure(1121);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(1125);$vars.loc=this._getStructureValue(this.anything());$vars.t=this._getStructureValue(this.anything());this.pushLocation($vars.loc);$vars.ans=this._appendStructure($r1,this._apply($vars.t));$r1.value=this.popLocation();return this._endStructure($r1);}));$r0.value=$vars.ans;return this._endStructure($r0);},
"transFn":function(){var $elf=this,$vars={},$r0=this._startStructure(1132);$vars.x=this._appendStructure($r0,this._apply("trans"));$r0.value=$vars.x;return this._endStructure($r0);}});(BSOMetaTranslator["_callables"]=({"anything": ({"name": "anything","nbArgs": (0)}),"apply": ({"name": "_apply","nbArgs": (1)}),"end": ({"name": "end","nbArgs": (0)}),"exactly": ({"name": "exactly","nbArgs": (1)}),"seq": ({"name": "seq","nbArgs": (1)})}));(BSOMetaTranslator["_optimizedCall"]=(function (rule,args){let c=this["_callables"][rule];return (c && (c["nbArgs"] == args["length"]));}));(BSOMetaTranslator["jumpTableCode"]=(function (cases){var buf=new StringBuffer();buf.nextPutAll((("(function(){var $r" + (this["_storeVar"] + (1))) + "=this._startStructure(-1);"));buf.nextPutAll((("switch(this._appendStructure($r" + (this["_storeVar"] + (1))) + ",this._apply(\'anything\'))){"));for(var i=(0);(i < cases["length"]);(i+=(1))){buf.nextPutAll((((("case " + cases[i][(0)]) + ":") + cases[i][(1)]) + ";break;"));}buf.nextPutAll((("default: throw fail}return this._endStructure($r" + (this["_storeVar"] + (1))) + ");}).call(this)"));return buf.contents();}));(BSOMetaTranslator["pushLocation"]=(function (location){if((location != null)){let locationId=createSourceMapId();addToSourseMap(locationId,location["start"],location["stop"]);this["_locations"].push(locationId);}else{this["_locations"].push(this["_locations"][(this["_locations"]["length"] - (1))]);};}));(BSOMetaTranslator["popLocation"]=(function (){this["_locations"].pop();}));(BSOMetaTranslator["getLocationId"]=(function (){return this["_locations"][(this["_locations"]["length"] - (1))];}))


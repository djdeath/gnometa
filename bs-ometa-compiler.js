// This file was generated using Gnometa
// https://github.com/djdeath/gnometa
let BSSemActionParser=objectThatDelegatesTo(BSJSParser,{
"jsOmetaKeyword":function(){var $elf=this,$vars={},$r0=this._startStructure(1, true);$vars.k=this.anything();this._appendStructure($r0,this._apply("spaces"),4);this._appendStructure($r0,this.exactly("@"),6);$vars.n=this._appendStructure($r0,this._apply("iName"),9);$r0.value=this._pred(($vars.k.value == $vars.n.value));$r0.value=$vars.k.value;return this._endStructure($r0);},
"primExprHd":function(){var $elf=this,$vars={},$r0=this._startStructure(16, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(19);this._appendStructure($r1,this._applyWithArgs("jsOmetaKeyword","location"),21);this._appendStructure($r1,this._applyWithArgs("token","("),24);$vars.n=this._appendStructure($r1,this._apply("iName"),27);this._appendStructure($r1,this._applyWithArgs("token",")"),29);$r1.value=["Location",$vars.n.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(33);this._appendStructure($r1,this._applyWithArgs("jsOmetaKeyword","location"),35);$r1.value=["Location",null];return this._endStructure($r1);},function(){return this._forwardStructure(BSJSParser._superApplyWithArgs(this,"primExprHd"),40);}),17);return this._endStructure($r0);},
"curlySemAction":function(){var $elf=this,$vars={},$r0=this._startStructure(42, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(45);this._appendStructure($r1,this._applyWithArgs("token","{"),47);$vars.r=this._appendStructure($r1,this._apply("expr"),50);this._appendStructure($r1,this._apply("sc"),52);this._appendStructure($r1,this._applyWithArgs("token","}"),54);$r1.value=$vars.r.value;return this._endStructure($r1);},function(){var $r1=this._startStructure(58);this._appendStructure($r1,this._applyWithArgs("token","{"),60);$vars.ss=this._appendStructure($r1,this._many(function(){var $r2=this._startStructure(65);$vars.s=this._appendStructure($r2,this._apply("srcElem"),68);this._appendStructure($r2,this._lookahead(function(){return this._forwardStructure(this._apply("srcElem"),72);}),70);$r2.value=$vars.s.value;return this._endStructure($r2);}),63);$vars.s=this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(79);$vars.r=this._appendStructure($r2,this._apply("expr"),82);this._appendStructure($r2,this._apply("sc"),84);$r2.value=["return",$vars.r.value];return this._endStructure($r2);},function(){return this._forwardStructure(this._apply("srcElem"),88);}),77);$r1.value=$vars.ss.value.push($vars.s.value);this._appendStructure($r1,this._applyWithArgs("token","}"),92);$r1.value=["send","call",["func",[],["begin"].concat($vars.ss.value)],["this"]];return this._endStructure($r1);}),43);return this._endStructure($r0);},
"semAction":function(){var $elf=this,$vars={},$r0=this._startStructure(96, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("curlySemAction"),99);},function(){var $r1=this._startStructure(101);$vars.r=this._appendStructure($r1,this._apply("primExpr"),104);this._appendStructure($r1,this._apply("spaces"),106);$r1.value=$vars.r.value;return this._endStructure($r1);}),97);return this._endStructure($r0);}});let BSOMetaParser=objectThatDelegatesTo(BaseStrParser,{
"space":function(){var $elf=this,$vars={},$r0=this._startStructure(111, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure(BaseStrParser._superApplyWithArgs(this,"space"),114);},function(){return this._forwardStructure(this._applyWithArgs("fromTo","//","\n"),116);},function(){return this._forwardStructure(this._applyWithArgs("fromTo","/*","*/"),120);}),112);return this._endStructure($r0);},
"nameFirst":function(){var $elf=this,$vars={},$r0=this._startStructure(124, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure((function(){var $r1=this._startStructure(-1);switch(this._appendStructure($r1,this._apply('anything')).value){case "_":$r1.value="_";break;case "$":$r1.value="$";break;default: throw fail;}return this._endStructure($r1);}).call(this),127);},function(){return this._forwardStructure(this._apply("letter"),129);}),125);return this._endStructure($r0);},
"nameRest":function(){var $elf=this,$vars={},$r0=this._startStructure(131, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("nameFirst"),134);},function(){return this._forwardStructure(this._apply("digit"),136);}),132);return this._endStructure($r0);},
"tsName":function(){var $elf=this,$vars={},$r0=this._startStructure(138, true);this._appendStructure($r0,this._consumedBy(function(){var $r1=this._startStructure(141);this._appendStructure($r1,this._apply("nameFirst"),143);this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("nameRest"),147);}),145);return this._endStructure($r1);}),139);return this._endStructure($r0);},
"name":function(){var $elf=this,$vars={},$r0=this._startStructure(149, true);this._appendStructure($r0,this._apply("spaces"),151);this._appendStructure($r0,this._apply("tsName"),153);return this._endStructure($r0);},
"hexDigit":function(){var $elf=this,$vars={},$r0=this._startStructure(155, true);$vars.x=this._appendStructure($r0,this._apply("char"),158);$vars.v=this._generateStructure($r0,this["hexDigits"].indexOf($vars.x.value.toLowerCase()),161);$r0.value=this._pred(($vars.v.value >= (0)));$r0.value=$vars.v.value;return this._endStructure($r0);},
"eChar":function(){var $elf=this,$vars={},$r0=this._startStructure(168, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(171);$vars.s=this._appendStructure($r1,this._consumedBy(function(){var $r2=this._startStructure(176);this._appendStructure($r2,this.exactly("\\"),178);this._appendStructure($r2,this._or(function(){return this._forwardStructure((function(){var $r3=this._startStructure(-1);switch(this._appendStructure($r3,this._apply('anything')).value){case "u":this._appendStructure($r3,this._apply("hexDigit"),185);this._appendStructure($r3,this._apply("hexDigit"),187);this._appendStructure($r3,this._apply("hexDigit"),189);this._appendStructure($r3,this._apply("hexDigit"),191);break;case "x":this._appendStructure($r3,this._apply("hexDigit"),194);this._appendStructure($r3,this._apply("hexDigit"),196);break;default: throw fail;}return this._endStructure($r3);}).call(this),182);},function(){return this._forwardStructure(this._apply("char"),198);}),180);return this._endStructure($r2);}),174);$r1.value=unescape($vars.s.value);return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("char"),202);}),169);return this._endStructure($r0);},
"tsString":function(){var $elf=this,$vars={},$r0=this._startStructure(204, true);this._appendStructure($r0,this.exactly("\'"),206);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(211);this._appendStructure($r1,this._not(function(){return this._forwardStructure(this.exactly("\'"),215);}),213);this._appendStructure($r1,this._apply("eChar"),217);return this._endStructure($r1);}),209);this._appendStructure($r0,this.exactly("\'"),219);$r0.value=$vars.xs.value.join("");return this._endStructure($r0);},
"characters":function(){var $elf=this,$vars={},$r0=this._startStructure(223, true);this._appendStructure($r0,this.exactly("`"),225);this._appendStructure($r0,this.exactly("`"),227);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(232);this._appendStructure($r1,this._not(function(){var $r2=this._startStructure(236);this._appendStructure($r2,this.exactly("\'"),238);this._appendStructure($r2,this.exactly("\'"),240);return this._endStructure($r2);}),234);this._appendStructure($r1,this._apply("eChar"),242);return this._endStructure($r1);}),230);this._appendStructure($r0,this.exactly("\'"),244);this._appendStructure($r0,this.exactly("\'"),246);$r0.value=[this._extractLocation($r0),"App","seq",jsValue("string",$vars.xs.value.join(""))];return this._endStructure($r0);},
"sCharacters":function(){var $elf=this,$vars={},$r0=this._startStructure(250, true);this._appendStructure($r0,this.exactly("\""),252);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(257);this._appendStructure($r1,this._not(function(){return this._forwardStructure(this.exactly("\""),261);}),259);this._appendStructure($r1,this._apply("eChar"),263);return this._endStructure($r1);}),255);this._appendStructure($r0,this.exactly("\""),265);$r0.value=[this._extractLocation($r0),"App","token",jsValue("string",$vars.xs.value.join(""))];return this._endStructure($r0);},
"string":function(){var $elf=this,$vars={},$r0=this._startStructure(269, true);$vars.xs=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(274);this._appendStructure($r1,(function(){var $r2=this._startStructure(-1);switch(this._appendStructure($r2,this._apply('anything')).value){case "#":$r2.value="#";break;case "`":$r2.value="`";break;default: throw fail;}return this._endStructure($r2);}).call(this),276);this._appendStructure($r1,this._apply("tsName"),278);return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("tsString"),280);}),272);$r0.value=[this._extractLocation($r0),"App","exactly",jsValue("string",$vars.xs.value)];return this._endStructure($r0);},
"number":function(){var $elf=this,$vars={},$r0=this._startStructure(284, true);$vars.n=this._appendStructure($r0,this._consumedBy(function(){var $r1=this._startStructure(289);this._appendStructure($r1,this._opt(function(){return this._forwardStructure(this.exactly("-"),293);}),291);this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("digit"),297);}),295);return this._endStructure($r1);}),287);$r0.value=[this._extractLocation($r0),"App","exactly",jsValue("number",$vars.n.value)];return this._endStructure($r0);},
"keyword":function(){var $elf=this,$vars={},$r0=this._startStructure(301, true);$vars.xs=this.anything();this._appendStructure($r0,this._applyWithArgs("token",$vars.xs.value),304);this._appendStructure($r0,this._not(function(){return this._forwardStructure(this._apply("letterOrDigit"),309);}),307);$r0.value=$vars.xs.value;return this._endStructure($r0);},
"args":function(){var $elf=this,$vars={},$r0=this._startStructure(313, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure((function(){var $r1=this._startStructure(-1);switch(this._appendStructure($r1,this._apply('anything')).value){case "(":$vars.xs=this._appendStructure($r1,this._applyWithArgs("listOf","hostExpr",","),320);this._appendStructure($r1,this._applyWithArgs("token",")"),324);$r1.value=$vars.xs.value;break;default: throw fail;}return this._endStructure($r1);}).call(this),316);},function(){var $r1=this._startStructure(328);this._appendStructure($r1,this._apply("empty"),330);$r1.value=[];return this._endStructure($r1);}),314);return this._endStructure($r0);},
"application":function(){var $elf=this,$vars={},$r0=this._startStructure(334, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(337);this._appendStructure($r1,this._applyWithArgs("token","^"),339);$vars.rule=this._appendStructure($r1,this._apply("name"),342);$vars.as=this._appendStructure($r1,this._apply("args"),345);$r1.value=[this._extractLocation($r1),"App","super",jsValue("string",$vars.rule.value)].concat($vars.as.value);return this._endStructure($r1);},function(){var $r1=this._startStructure(349);$vars.grm=this._appendStructure($r1,this._apply("name"),352);this._appendStructure($r1,this._applyWithArgs("token","."),354);$vars.rule=this._appendStructure($r1,this._apply("name"),357);$vars.as=this._appendStructure($r1,this._apply("args"),360);$r1.value=[this._extractLocation($r1),"App","foreign",jsCode(this._extractLocation($r1),this["locals"],["get",$vars.grm.value]),jsValue("string",$vars.rule.value)].concat($vars.as.value);return this._endStructure($r1);},function(){var $r1=this._startStructure(364);$vars.rule=this._appendStructure($r1,this._apply("name"),367);$vars.as=this._appendStructure($r1,this._apply("args"),370);$r1.value=[this._extractLocation($r1),"App",$vars.rule.value].concat($vars.as.value);return this._endStructure($r1);}),335);return this._endStructure($r0);},
"hostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(374, true);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionParser,"expr"),377);$r0.value=jsCode(this._extractLocation($r0),this["locals"],$vars.r.value);return this._endStructure($r0);},
"curlyHostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(382, true);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionParser,"curlySemAction"),385);$r0.value=jsCode(this._extractLocation($r0),this["locals"],$vars.r.value);return this._endStructure($r0);},
"primHostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(390, true);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionParser,"semAction"),393);$r0.value=jsCode(this._extractLocation($r0),this["locals"],$vars.r.value);return this._endStructure($r0);},
"atomicHostExpr":function(){var $elf=this,$vars={},$r0=this._startStructure(398, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("curlyHostExpr"),401);},function(){return this._forwardStructure(this._apply("primHostExpr"),403);}),399);return this._endStructure($r0);},
"semAction":function(){var $elf=this,$vars={},$r0=this._startStructure(405, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("curlyHostExpr"),408);},function(){var $r1=this._startStructure(410);this._appendStructure($r1,this._applyWithArgs("token","!"),412);this._appendStructure($r1,this._apply("atomicHostExpr"),414);return this._endStructure($r1);}),406);return this._endStructure($r0);},
"arrSemAction":function(){var $elf=this,$vars={},$r0=this._startStructure(416, true);this._appendStructure($r0,this._applyWithArgs("token","->"),418);this._appendStructure($r0,this._apply("atomicHostExpr"),420);return this._endStructure($r0);},
"semPred":function(){var $elf=this,$vars={},$r0=this._startStructure(422, true);this._appendStructure($r0,this._applyWithArgs("token","?"),424);$vars.x=this._appendStructure($r0,this._apply("atomicHostExpr"),427);$r0.value=[this._extractLocation($r0),"Pred",$vars.x.value];return this._endStructure($r0);},
"expr":function(){var $elf=this,$vars={},$r0=this._startStructure(431, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(434);$vars.x=this._appendStructure($r1,this._applyWithArgs("expr5",true),437);$vars.xs=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(443);this._appendStructure($r2,this._applyWithArgs("token","|"),445);this._appendStructure($r2,this._applyWithArgs("expr5",true),447);return this._endStructure($r2);}),441);$r1.value=[this._extractLocation($r1),"Or",$vars.x.value].concat($vars.xs.value);return this._endStructure($r1);},function(){var $r1=this._startStructure(452);$vars.x=this._appendStructure($r1,this._applyWithArgs("expr5",true),455);$vars.xs=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(461);this._appendStructure($r2,this._applyWithArgs("token","||"),463);this._appendStructure($r2,this._applyWithArgs("expr5",true),465);return this._endStructure($r2);}),459);$r1.value=[this._extractLocation($r1),"XOr",$vars.x.value].concat($vars.xs.value);return this._endStructure($r1);},function(){return this._forwardStructure(this._applyWithArgs("expr5",false),470);}),432);return this._endStructure($r0);},
"expr5":function(){var $elf=this,$vars={},$r0=this._startStructure(473, true);$vars.ne=this.anything();this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(478);$vars.x=this._appendStructure($r1,this._apply("interleavePart"),481);$vars.xs=this._appendStructure($r1,this._many1(function(){var $r2=this._startStructure(486);this._appendStructure($r2,this._applyWithArgs("token","&&"),488);this._appendStructure($r2,this._apply("interleavePart"),490);return this._endStructure($r2);}),484);$r1.value=[this._extractLocation($r1),"Interleave",$vars.x.value].concat($vars.xs.value);return this._endStructure($r1);},function(){return this._forwardStructure(this._applyWithArgs("expr4",$vars.ne.value),494);}),476);return this._endStructure($r0);},
"interleavePart":function(){var $elf=this,$vars={},$r0=this._startStructure(497, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(500);this._appendStructure($r1,this._applyWithArgs("token","("),502);$vars.part=this._appendStructure($r1,this._applyWithArgs("expr4",true),505);this._appendStructure($r1,this._applyWithArgs("token",")"),508);$r1.value=["1",$vars.part.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(512);$vars.part=this._appendStructure($r1,this._applyWithArgs("expr4",true),515);this._appendStructure($r1,this._applyWithArgs("modedIPart",$vars.part.value),518);return this._endStructure($r1);}),498);return this._endStructure($r0);},
"modedIPart":function(){var $elf=this,$vars={},$r0=this._startStructure(521, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(524);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(528);this._appendStructure($r2,this.exactly("And"),530);this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(534);this._appendStructure($r3,this.exactly("Many"),536);$vars.part=this.anything();return this._endStructure($r3);}),532);return this._endStructure($r2);}),526);$r1.value=["*",$vars.part.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(541);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(545);this._appendStructure($r2,this.exactly("And"),547);this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(551);this._appendStructure($r3,this.exactly("Many1"),553);$vars.part=this.anything();return this._endStructure($r3);}),549);return this._endStructure($r2);}),543);$r1.value=["+",$vars.part.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(558);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(562);this._appendStructure($r2,this.exactly("And"),564);this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(568);this._appendStructure($r3,this.exactly("Opt"),570);$vars.part=this.anything();return this._endStructure($r3);}),566);return this._endStructure($r2);}),560);$r1.value=["?",$vars.part.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(575);$vars.part=this.anything();$r1.value=["1",$vars.part.value];return this._endStructure($r1);}),522);return this._endStructure($r0);},
"expr4":function(){var $elf=this,$vars={},$r0=this._startStructure(580, true);$vars.ne=this.anything();this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(585);$vars.xs=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("expr3"),590);}),588);$vars.act=this._appendStructure($r1,this._apply("arrSemAction"),593);$r1.value=[this._extractLocation($r1),"And"].concat($vars.xs.value).concat([$vars.act.value]);return this._endStructure($r1);},function(){var $r1=this._startStructure(597);$r1.value=this._pred($vars.ne.value);$vars.xs=this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("expr3"),605);}),603);$r1.value=[this._extractLocation($r1),"And"].concat($vars.xs.value);return this._endStructure($r1);},function(){var $r1=this._startStructure(609);$r1.value=this._pred(($vars.ne.value == false));$vars.xs=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("expr3"),617);}),615);$r1.value=[this._extractLocation($r1),"And"].concat($vars.xs.value);return this._endStructure($r1);}),583);return this._endStructure($r0);},
"optIter":function(){var $elf=this,$vars={},$r0=this._startStructure(621, true);$vars.x=this.anything();this._appendStructure($r0,this._or(function(){return this._forwardStructure((function(){var $r1=this._startStructure(-1);switch(this._appendStructure($r1,this._apply('anything')).value){case "*":$r1.value=[mergeLocation(this._extractLocation($r1),$vars.x.value[(0)]),"Many",$vars.x.value];break;case "+":$r1.value=[mergeLocation(this._extractLocation($r1),$vars.x.value[(0)]),"Many1",$vars.x.value];break;case "?":$r1.value=[mergeLocation(this._extractLocation($r1),$vars.x.value[(0)]),"Opt",$vars.x.value];break;default: throw fail;}return this._endStructure($r1);}).call(this),626);},function(){var $r1=this._startStructure(631);this._appendStructure($r1,this._apply("empty"),633);$r1.value=$vars.x.value;return this._endStructure($r1);}),624);return this._endStructure($r0);},
"optBind":function(){var $elf=this,$vars={},$r0=this._startStructure(637, true);$vars.x=this.anything();this._appendStructure($r0,this._or(function(){return this._forwardStructure((function(){var $r1=this._startStructure(-1);switch(this._appendStructure($r1,this._apply('anything')).value){case ":":$vars.n=this._appendStructure($r1,this._apply("name"),646);$r1.value=(function (){(this["locals"][$vars.n.value]=true);return [mergeLocation(this._extractLocation($r1),$vars.x.value[(0)]),"Set",$vars.n.value,$vars.x.value];}).call(this);break;default: throw fail;}return this._endStructure($r1);}).call(this),642);},function(){var $r1=this._startStructure(650);this._appendStructure($r1,this._apply("empty"),652);$r1.value=$vars.x.value;return this._endStructure($r1);}),640);return this._endStructure($r0);},
"expr3":function(){var $elf=this,$vars={},$r0=this._startStructure(656, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(659);this._appendStructure($r1,this._applyWithArgs("token",":"),661);$vars.n=this._appendStructure($r1,this._apply("name"),664);$r1.value=(function (){(this["locals"][$vars.n.value]=true);return [this._extractLocation($r1),"PopArg",$vars.n.value];}).call(this);return this._endStructure($r1);},function(){var $r1=this._startStructure(668);$vars.e=this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(673);$vars.x=this._appendStructure($r2,this._apply("expr2"),676);this._appendStructure($r2,this._applyWithArgs("optIter",$vars.x.value),678);return this._endStructure($r2);},function(){return this._forwardStructure(this._apply("semAction"),681);}),671);this._appendStructure($r1,this._applyWithArgs("optBind",$vars.e.value),683);return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("semPred"),686);}),657);return this._endStructure($r0);},
"expr2":function(){var $elf=this,$vars={},$r0=this._startStructure(688, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(691);this._appendStructure($r1,this._applyWithArgs("token","~"),693);$vars.x=this._appendStructure($r1,this._apply("expr2"),696);$r1.value=[this._extractLocation($r1),"Not",$vars.x.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(700);this._appendStructure($r1,this._applyWithArgs("token","&"),702);$vars.x=this._appendStructure($r1,this._apply("expr1"),705);$r1.value=[this._extractLocation($r1),"Lookahead",$vars.x.value];return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("expr1"),709);}),689);return this._endStructure($r0);},
"expr1":function(){var $elf=this,$vars={},$r0=this._startStructure(711, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("application"),714);},function(){var $r1=this._startStructure(716);$vars.x=this._appendStructure($r1,this._or(function(){return this._forwardStructure(this._applyWithArgs("keyword","undefined"),721);},function(){return this._forwardStructure(this._applyWithArgs("keyword","nil"),724);},function(){return this._forwardStructure(this._applyWithArgs("keyword","true"),727);},function(){return this._forwardStructure(this._applyWithArgs("keyword","false"),730);}),719);$r1.value=[this._extractLocation($r1),"App","exactly",$vars.x.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(735);this._appendStructure($r1,this._apply("spaces"),737);this._appendStructure($r1,this._or(function(){return this._forwardStructure(this._apply("characters"),741);},function(){return this._forwardStructure(this._apply("sCharacters"),743);},function(){return this._forwardStructure(this._apply("string"),745);},function(){return this._forwardStructure(this._apply("number"),747);}),739);return this._endStructure($r1);},function(){var $r1=this._startStructure(749);this._appendStructure($r1,this._applyWithArgs("token","["),751);$vars.x=this._appendStructure($r1,this._apply("expr"),754);this._appendStructure($r1,this._applyWithArgs("token","]"),756);$r1.value=[this._extractLocation($r1),"Form",$vars.x.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(760);this._appendStructure($r1,this._applyWithArgs("token","<"),762);$vars.x=this._appendStructure($r1,this._apply("expr"),765);this._appendStructure($r1,this._applyWithArgs("token",">"),767);$r1.value=[this._extractLocation($r1),"ConsBy",$vars.x.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(771);this._appendStructure($r1,this._applyWithArgs("token","@<"),773);$vars.x=this._appendStructure($r1,this._apply("expr"),776);this._appendStructure($r1,this._applyWithArgs("token",">"),778);$r1.value=[this._extractLocation($r1),"IdxConsBy",$vars.x.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(782);this._appendStructure($r1,this._applyWithArgs("token","("),784);$vars.x=this._appendStructure($r1,this._apply("expr"),787);this._appendStructure($r1,this._applyWithArgs("token",")"),789);$r1.value=$vars.x.value;return this._endStructure($r1);}),712);return this._endStructure($r0);},
"ruleName":function(){var $elf=this,$vars={},$r0=this._startStructure(793, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure(this._apply("name"),796);},function(){var $r1=this._startStructure(798);this._appendStructure($r1,this._apply("spaces"),800);this._appendStructure($r1,this._apply("tsString"),802);return this._endStructure($r1);}),794);return this._endStructure($r0);},
"rule":function(){var $elf=this,$vars={},$r0=this._startStructure(804, true);this._appendStructure($r0,this._lookahead(function(){return this._forwardStructure($vars.n=this._appendStructure($r0,this._apply("ruleName"),810),808);}),806);$r0.value=(this["locals"]=({}));$vars.x=this._appendStructure($r0,this._applyWithArgs("rulePart",$vars.n.value),815);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(821);this._appendStructure($r1,this._applyWithArgs("token",","),823);this._appendStructure($r1,this._applyWithArgs("rulePart",$vars.n.value),825);return this._endStructure($r1);}),819);$r0.value=[this._extractLocation($r0),"Rule",$vars.n.value,[this._extractLocation($r0),"Or",$vars.x.value].concat($vars.xs.value)];return this._endStructure($r0);},
"rulePart":function(){var $elf=this,$vars={},$r0=this._startStructure(830, true);$vars.rn=this.anything();$vars.n=this._appendStructure($r0,this._apply("ruleName"),834);$r0.value=this._pred(($vars.n.value == $vars.rn.value));$vars.b1=this._appendStructure($r0,this._applyWithArgs("expr4",false),840);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(845);this._appendStructure($r1,this._applyWithArgs("token","="),847);$vars.b2=this._appendStructure($r1,this._apply("expr"),850);$r1.value=[this._extractLocation($r1),"And",$vars.b1.value,$vars.b2.value];return this._endStructure($r1);},function(){var $r1=this._startStructure(854);this._appendStructure($r1,this._apply("empty"),856);$r1.value=$vars.b1.value;return this._endStructure($r1);}),843);return this._endStructure($r0);},
"grammar":function(){var $elf=this,$vars={},$r0=this._startStructure(860, true);this._appendStructure($r0,this._applyWithArgs("keyword","ometa"),862);$vars.sn=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(868);this._appendStructure($r1,this._applyWithArgs("token","("),870);$vars.sni=this._appendStructure($r1,this._apply("name"),873);this._appendStructure($r1,this._applyWithArgs("token",")"),875);$r1.value=$vars.sni.value;return this._endStructure($r1);},function(){var $r1=this._startStructure(879);this._appendStructure($r1,this._apply("empty"),881);$r1.value="OMeta";return this._endStructure($r1);}),866);this._appendStructure($r0,this._applyWithArgs("token","{"),885);$vars.rs=this._appendStructure($r0,this._applyWithArgs("enum","rule",","),888);this._appendStructure($r0,this._applyWithArgs("token","}"),892);$r0.value=["OMetaGrammar",$vars.sn.value,$vars.rs.value];return this._endStructure($r0);}});(BSOMetaParser["hexDigits"]="0123456789abcdef");let BSSemActionTranslator=objectThatDelegatesTo(BSJSTranslator,{
"Location":function(){var $elf=this,$vars={},$r0=this._startStructure(897, true);$vars.n=this.anything();$vars.v=this._generateStructure($r0,(($vars.n.value === null)?("$r" + this["_storeVal"]):("$vars." + $vars.n.value)),901);$r0.value=["this._extractLocation(",$vars.v.value,")"].join("");return this._endStructure($r0);},
"get":function(){var $elf=this,$vars={},$r0=this._startStructure(905, true);$vars.n=this.anything();$r0.value=this._renameVariable($vars.n.value);return this._endStructure($r0);},
"name":function(){var $elf=this,$vars={},$r0=this._startStructure(910, true);$vars.n=this.anything();$r0.value=this._renameVariable($vars.n.value);return this._endStructure($r0);},
"jstrans":function(){var $elf=this,$vars={},$r0=this._startStructure(915, true);$vars.storeVal=this.anything();$vars.toRename=this.anything();$r0.value=(function (){(this["_storeVal"]=$vars.storeVal.value);return (this["_toRename"]=$vars.toRename.value);}).call(this);this._appendStructure($r0,this._apply("trans"),921);return this._endStructure($r0);}});(BSSemActionTranslator["_renameVariable"]=(function (name){if(((name != "$elf") && this["_toRename"][name])){return (("$vars." + name) + ".value");}else{undefined;}return name;}));let BSOMetaTranslator=objectThatDelegatesTo(OMeta,{
"App":function(){var $elf=this,$vars={},$r0=this._startStructure(924, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure((function(){var $r1=this._startStructure(-1);switch(this._appendStructure($r1,this._apply('anything')).value){case "super":$vars.args=this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("transFn"),933);}),931);$r1.value=[this["sName"],"._superApplyWithArgs(this,",$vars.args.value.join(","),")"].join("");break;default: throw fail;}return this._endStructure($r1);}).call(this),927);},function(){var $r1=this._startStructure(937);$vars.rule=this.anything();$vars.args=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("transFn"),943);}),941);this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(947);$r2.value=this._pred(this._optimizedCall($vars.rule.value,$vars.args.value));$r2.value=["this.",this["_callables"][$vars.rule.value]["name"],"(",$vars.args.value.join(","),")"].join("");return this._endStructure($r2);},function(){var $r2=this._startStructure(954);$r2.value=this._pred(($vars.args.value["length"] < (1)));$r2.value=["this._apply(\"",$vars.rule.value,"\")"].join("");return this._endStructure($r2);},function(){var $r2=this._startStructure(946);$r2.value=["this._applyWithArgs(\"",$vars.rule.value,"\",",$vars.args.value.join(","),")"].join("");return this._endStructure($r2);}),945);return this._endStructure($r1);}),925);return this._endStructure($r0);},
"Pred":function(){var $elf=this,$vars={},$r0=this._startStructure(962, true);$vars.expr=this._appendStructure($r0,this._apply("transFn"),965);$r0.value=["this._pred(",$vars.expr.value,")"].join("");return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(969, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("transFn"),974);}),972);$r0.value=["this._or(",$vars.xs.value.join(","),")"].join("");return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(978, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("transFn"),983);}),981);$r0.value=$vars.xs.value.unshift(this["rName"].toProgramString());$r0.value=["this._xor(",$vars.xs.value.join(","),")"].join("");return this._endStructure($r0);},
"And":function(){var $elf=this,$vars={},$r0=this._startStructure(989, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(992);$vars.xs=this._appendStructure($r1,this._many1(function(){return this._forwardStructure(this._apply("transFn"),997);}),995);$r1.value=$vars.xs.value.join(";");return this._endStructure($r1);},function(){var $r1=this._startStructure(991);$r1.value="undefined";return this._endStructure($r1);}),990);return this._endStructure($r0);},
"Opt":function(){var $elf=this,$vars={},$r0=this._startStructure(1002, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1005);$r0.value=["this._opt(",$vars.x.value,")"].join("");return this._endStructure($r0);},
"Many":function(){var $elf=this,$vars={},$r0=this._startStructure(1009, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1012);$r0.value=["this._many(",$vars.x.value,")"].join("");return this._endStructure($r0);},
"Many1":function(){var $elf=this,$vars={},$r0=this._startStructure(1016, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1019);$r0.value=["this._many1(",$vars.x.value,")"].join("");return this._endStructure($r0);},
"Set":function(){var $elf=this,$vars={},$r0=this._startStructure(1023, true);$vars.n=this.anything();$vars.v=this._appendStructure($r0,this._apply("transFn"),1027);$r0.value=["$vars.",$vars.n.value,"=",$vars.v.value].join("");return this._endStructure($r0);},
"Not":function(){var $elf=this,$vars={},$r0=this._startStructure(1031, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1034);$r0.value=["this._not(",$vars.x.value,")"].join("");return this._endStructure($r0);},
"Lookahead":function(){var $elf=this,$vars={},$r0=this._startStructure(1038, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1041);$r0.value=["this._lookahead(",$vars.x.value,")"].join("");return this._endStructure($r0);},
"Form":function(){var $elf=this,$vars={},$r0=this._startStructure(1045, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1048);$r0.value=["this._form(",$vars.x.value,")"].join("");return this._endStructure($r0);},
"ConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(1052, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1055);$r0.value=["this._consumedBy(",$vars.x.value,")"].join("");return this._endStructure($r0);},
"IdxConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(1059, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1062);$r0.value=["this._idxConsumedBy(",$vars.x.value,")"].join("");return this._endStructure($r0);},
"JumpTable":function(){var $elf=this,$vars={},$r0=this._startStructure(1066, true);$r0.value=this["_storeVar"]++;$vars.cases=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("jtCase"),1073);}),1071);$r0.value=this["_storeVar"]--;$r0.value=this.jumpTableCode($vars.cases.value);return this._endStructure($r0);},
"Interleave":function(){var $elf=this,$vars={},$r0=this._startStructure(1079, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("intPart"),1084);}),1082);$r0.value=["this._interleave(",$vars.xs.value.join(","),")"].join("");return this._endStructure($r0);},
"Function":function(){var $elf=this,$vars={},$r0=this._startStructure(1088, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1091);$r0.value=["function(){",$vars.x.value,";}"].join("");return this._endStructure($r0);},
"FunctionStructure":function(){var $elf=this,$vars={},$r0=this._startStructure(1095, true);$r0.value=this["_storeVar"]++;$vars.xs=this._appendStructure($r0,this._many1(function(){return this._forwardStructure(this._apply("transFn"),1102);}),1100);$r0.value=this["_storeVar"]--;$r0.value=["function(){var $r",(this["_storeVar"] + (1)),"=this._startStructure(",this.getLocationId(),");",$vars.xs.value.join(";"),";return this._endStructure($r",(this["_storeVar"] + (1)),");}"].join("");return this._endStructure($r0);},
"SetReturn":function(){var $elf=this,$vars={},$r0=this._startStructure(1108, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1111);$r0.value=["$r",this["_storeVar"],".value=",$vars.x.value].join("");return this._endStructure($r0);},
"Return":function(){var $elf=this,$vars={},$r0=this._startStructure(1115, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1118);$r0.value=["return this._forwardStructure(",$vars.x.value,",",this.getLocationId(),")"].join("");return this._endStructure($r0);},
"Parenthesis":function(){var $elf=this,$vars={},$r0=this._startStructure(1122, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1125);$r0.value=["(",$vars.x.value,")"].join("");return this._endStructure($r0);},
"Store":function(){var $elf=this,$vars={},$r0=this._startStructure(1129, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1132);$r0.value=["this._appendStructure($r",this["_storeVar"],",",$vars.x.value,",",this.getLocationId(),")"].join("");return this._endStructure($r0);},
"Wrap":function(){var $elf=this,$vars={},$r0=this._startStructure(1136, true);$vars.x=this._appendStructure($r0,this._apply("transFn"),1139);$r0.value=["this._generateStructure($r",this["_storeVar"],",",$vars.x.value,",",this.getLocationId(),")"].join("");return this._endStructure($r0);},
"Js":function(){var $elf=this,$vars={},$r0=this._startStructure(1143, true);$vars.locals=this.anything();this._appendStructure($r0,this._applyWithArgs("transJs",$vars.locals.value),1146);return this._endStructure($r0);},
"PopArg":function(){var $elf=this,$vars={},$r0=this._startStructure(1149, true);$vars.n=this.anything();$r0.value=["$vars.",$vars.n.value,"=this.anything()"].join("");return this._endStructure($r0);},
"Rule":function(){var $elf=this,$vars={},$r0=this._startStructure(1154, true);$vars.name=this.anything();$r0.value=(function (){(this["rName"]=$vars.name.value);return (this["_storeVar"]=(0));}).call(this);$vars.body=this._appendStructure($r0,this._apply("trans"),1160);$r0.value=["\n\"",$vars.name.value,"\":function(){var $elf=this,","$vars={},","$r0=this._startStructure(",this.getLocationId(),", true);",$vars.body.value,";return this._endStructure($r0);}"].join("");return this._endStructure($r0);},
"Grammar":function(){var $elf=this,$vars={},$r0=this._startStructure(1164, true);$vars.sName=this.anything();$r0.value=(this["sName"]=$vars.sName.value);$vars.rules=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("trans"),1172);}),1170);$r0.value=["objectThatDelegatesTo(",$vars.sName.value,",{",$vars.rules.value.join(","),"})"].join("");return this._endStructure($r0);},
"intPart":function(){var $elf=this,$vars={},$r0=this._startStructure(1176, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(1180);$vars.mode=this.anything();$vars.part=this._appendStructure($r1,this._apply("transFn"),1184);return this._endStructure($r1);}),1178);$r0.value=(($vars.mode.value.toProgramString() + ",") + $vars.part.value);return this._endStructure($r0);},
"jtCase":function(){var $elf=this,$vars={},$r0=this._startStructure(1188, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(1192);$vars.x=this.anything();$vars.e=this._appendStructure($r1,this._apply("trans"),1196);return this._endStructure($r1);}),1190);$r0.value=[$vars.x.value.toProgramString(),$vars.e.value];return this._endStructure($r0);},
"transJs":function(){var $elf=this,$vars={},$r0=this._startStructure(1200, true);$vars.locals=this.anything();this._appendStructure($r0,this._applyWithArgs("foreign",BSSemActionTranslator,"jstrans",this["_storeVar"],$vars.locals.value),1203);return this._endStructure($r0);},
"trans":function(){var $elf=this,$vars={},$r0=this._startStructure(1208, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(1212);$vars.loc=this.anything();$vars.t=this.anything();$r1.value=this.pushLocation($vars.loc.value);$vars.ans=this._appendStructure($r1,this._apply($vars.t.value),1219);$r1.value=this.popLocation();return this._endStructure($r1);}),1210);$r0.value=$vars.ans.value;return this._endStructure($r0);},
"transFn":function(){var $elf=this,$vars={},$r0=this._startStructure(1226, true);$vars.x=this._appendStructure($r0,this._apply("trans"),1229);$r0.value=$vars.x.value;return this._endStructure($r0);}});(BSOMetaTranslator["_callables"]=({"anything": ({"name": "anything","nbArgs": (0)}),"apply": ({"name": "_apply","nbArgs": (1)}),"end": ({"name": "end","nbArgs": (0)}),"exactly": ({"name": "exactly","nbArgs": (1)}),"seq": ({"name": "seq","nbArgs": (1)})}));(BSOMetaTranslator["_optimizedCall"]=(function (rule,args){let c=this["_callables"][rule];return (c && (c["nbArgs"] == args["length"]));}));(BSOMetaTranslator["jumpTableCode"]=(function (cases){var buf=new StringBuffer();buf.nextPutAll((("(function(){var $r" + (this["_storeVar"] + (1))) + "=this._startStructure(-1);"));buf.nextPutAll((("switch(this._appendStructure($r" + (this["_storeVar"] + (1))) + ",this._apply(\'anything\')).value){"));for(var i=(0);(i < cases["length"]);(i+=(1))){buf.nextPutAll((((("case " + cases[i][(0)]) + ":") + cases[i][(1)]) + ";break;"));}buf.nextPutAll((("default: throw fail;}return this._endStructure($r" + (this["_storeVar"] + (1))) + ");}).call(this)"));return buf.contents();}));(BSOMetaTranslator["pushLocation"]=(function (location){if((location != null)){let locationId=createSourceMapId();addToSourseMap(locationId,location["start"],location["stop"]);this["_locations"].push(locationId);}else{this["_locations"].push(this["_locations"][(this["_locations"]["length"] - (1))]);};}));(BSOMetaTranslator["popLocation"]=(function (){this["_locations"].pop();}));(BSOMetaTranslator["getLocationId"]=(function (){return this["_locations"][(this["_locations"]["length"] - (1))];}));(BSOMetaTranslator["initialize"]=(function (){(this["_locations"]=[]);}))


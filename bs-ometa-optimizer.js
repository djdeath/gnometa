// This file was generated using Gnometa
// https://github.com/djdeath/gnometa
let mergeLocation=(function (loc1,loc2){return ({"start": Math.min(loc1["start"],loc2["start"]),"stop": Math.max(loc1["stop"],loc2["stop"])});});let BSNullOptimization=objectThatDelegatesTo(OMeta,{
"setHelped":function(){var $elf=this,$vars={},$r0=this._startStructure(1, true);$r0.value=(this["_didSomething"]=true);return this._endStructure($r0);},
"helped":function(){var $elf=this,$vars={},$r0=this._startStructure(3, true);$r0.value=this._pred(this["_didSomething"]);return this._endStructure($r0);},
"pushLocation":function(){var $elf=this,$vars={},$r0=this._startStructure(6, true);$vars.loc=this.anything();$r0.value=this["_locations"].push($vars.loc.value);return this._endStructure($r0);},
"popLocation":function(){var $elf=this,$vars={},$r0=this._startStructure(11, true);$r0.value=this["_locations"].pop();return this._endStructure($r0);},
"trans":function(){var $elf=this,$vars={},$r0=this._startStructure(13, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(17);$vars.loc=this.anything();$vars.t=this.anything();$r1.value=this._pred((this[$vars.t.value] != undefined));this._appendStructure($r1,this._applyWithArgs("pushLocation",$vars.loc.value),24);$vars.ans=this._appendStructure($r1,this._apply($vars.t.value),28);this._appendStructure($r1,this._apply("popLocation"),31);return this._endStructure($r1);}),15);$r0.value=[$vars.loc.value].concat($vars.ans.value);return this._endStructure($r0);},
"optimize":function(){var $elf=this,$vars={},$r0=this._startStructure(35, true);$vars.x=this._appendStructure($r0,this._apply("trans"),38);this._appendStructure($r0,this._apply("helped"),40);$r0.value=$vars.x.value;return this._endStructure($r0);},
"App":function(){var $elf=this,$vars={},$r0=this._startStructure(44, true);$vars.rule=this.anything();$vars.args=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this.anything(),50);}),48);$r0.value=["App",$vars.rule.value].concat($vars.args.value);return this._endStructure($r0);},
"Pred":function(){var $elf=this,$vars={},$r0=this._startStructure(54, true);$vars.expr=this.anything();$r0.value=["Pred",$vars.expr.value];return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(59, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("trans"),64);}),62);$r0.value=["Or"].concat($vars.xs.value);return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(68, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("trans"),73);}),71);$r0.value=["XOr"].concat($vars.xs.value);return this._endStructure($r0);},
"And":function(){var $elf=this,$vars={},$r0=this._startStructure(77, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("trans"),82);}),80);$r0.value=["And"].concat($vars.xs.value);return this._endStructure($r0);},
"Opt":function(){var $elf=this,$vars={},$r0=this._startStructure(86, true);$vars.x=this._appendStructure($r0,this._apply("trans"),89);$r0.value=["Opt",$vars.x.value];return this._endStructure($r0);},
"Many":function(){var $elf=this,$vars={},$r0=this._startStructure(93, true);$vars.x=this._appendStructure($r0,this._apply("trans"),96);$r0.value=["Many",$vars.x.value];return this._endStructure($r0);},
"Many1":function(){var $elf=this,$vars={},$r0=this._startStructure(100, true);$vars.x=this._appendStructure($r0,this._apply("trans"),103);$r0.value=["Many1",$vars.x.value];return this._endStructure($r0);},
"Set":function(){var $elf=this,$vars={},$r0=this._startStructure(107, true);$vars.n=this.anything();$vars.v=this._appendStructure($r0,this._apply("trans"),111);$r0.value=["Set",$vars.n.value,$vars.v.value];return this._endStructure($r0);},
"Not":function(){var $elf=this,$vars={},$r0=this._startStructure(115, true);$vars.x=this._appendStructure($r0,this._apply("trans"),118);$r0.value=["Not",$vars.x.value];return this._endStructure($r0);},
"Lookahead":function(){var $elf=this,$vars={},$r0=this._startStructure(122, true);$vars.x=this._appendStructure($r0,this._apply("trans"),125);$r0.value=["Lookahead",$vars.x.value];return this._endStructure($r0);},
"Form":function(){var $elf=this,$vars={},$r0=this._startStructure(129, true);$vars.x=this._appendStructure($r0,this._apply("trans"),132);$r0.value=["Form",$vars.x.value];return this._endStructure($r0);},
"ConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(136, true);$vars.x=this._appendStructure($r0,this._apply("trans"),139);$r0.value=["ConsBy",$vars.x.value];return this._endStructure($r0);},
"IdxConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(143, true);$vars.x=this._appendStructure($r0,this._apply("trans"),146);$r0.value=["IdxConsBy",$vars.x.value];return this._endStructure($r0);},
"JumpTable":function(){var $elf=this,$vars={},$r0=this._startStructure(150, true);$vars.ces=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(155);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(159);$vars.c=this.anything();$vars.e=this._appendStructure($r2,this._apply("trans"),163);return this._endStructure($r2);}),157);$r1.value=[$vars.c.value,$vars.e.value];return this._endStructure($r1);}),153);$r0.value=["JumpTable"].concat($vars.ces.value);return this._endStructure($r0);},
"Interleave":function(){var $elf=this,$vars={},$r0=this._startStructure(169, true);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(174);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(178);$vars.m=this.anything();$vars.p=this._appendStructure($r2,this._apply("trans"),182);return this._endStructure($r2);}),176);$r1.value=[$vars.m.value,$vars.p.value];return this._endStructure($r1);}),172);$r0.value=["Interleave"].concat($vars.xs.value);return this._endStructure($r0);},
"Js":function(){var $elf=this,$vars={},$r0=this._startStructure(188, true);$vars.locals=this.anything();$vars.code=this.anything();$r0.value=["Js",$vars.locals.value,$vars.code.value];return this._endStructure($r0);},
"Location":function(){var $elf=this,$vars={},$r0=this._startStructure(194, true);$r0.value=["Location"];return this._endStructure($r0);},
"PopArg":function(){var $elf=this,$vars={},$r0=this._startStructure(196, true);$vars.n=this.anything();$r0.value=["PopArg",$vars.n.value];return this._endStructure($r0);},
"Rule":function(){var $elf=this,$vars={},$r0=this._startStructure(201, true);$vars.name=this.anything();$vars.body=this._appendStructure($r0,this._apply("trans"),205);$r0.value=["Rule",$vars.name.value,$vars.body.value];return this._endStructure($r0);}});(BSNullOptimization["initialize"]=(function (){(this["_didSomething"]=false);(this["_locations"]=[]);}));(BSNullOptimization["location"]=(function (){return this["_locations"][(this["_locations"]["length"] - (1))];}));let BSAssociativeOptimization=objectThatDelegatesTo(BSNullOptimization,{
"And":function(){var $elf=this,$vars={},$r0=this._startStructure(210, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(213);$vars.x=this._appendStructure($r1,this._apply("trans"),216);this._appendStructure($r1,this.end(),218);this._appendStructure($r1,this._apply("setHelped"),220);$r1.value=$vars.x.value.slice((1));return this._endStructure($r1);},function(){var $r1=this._startStructure(224);$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside","And"),227);$r1.value=["And"].concat($vars.xs.value);return this._endStructure($r1);}),211);return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(232, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(235);$vars.x=this._appendStructure($r1,this._apply("trans"),238);this._appendStructure($r1,this.end(),240);this._appendStructure($r1,this._apply("setHelped"),242);$r1.value=$vars.x.value.slice((1));return this._endStructure($r1);},function(){var $r1=this._startStructure(246);$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside","Or"),249);$r1.value=["Or"].concat($vars.xs.value);return this._endStructure($r1);}),233);return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(254, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(257);$vars.x=this._appendStructure($r1,this._apply("trans"),260);this._appendStructure($r1,this.end(),262);this._appendStructure($r1,this._apply("setHelped"),264);$r1.value=$vars.x.value.slice((1));return this._endStructure($r1);},function(){var $r1=this._startStructure(268);$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside","XOr"),271);$r1.value=["XOr"].concat($vars.xs.value);return this._endStructure($r1);}),255);return this._endStructure($r0);},
"transInside":function(){var $elf=this,$vars={},$r0=this._startStructure(276, true);$vars.t=this.anything();this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(281);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(285);$vars.l=this.anything();this._appendStructure($r2,this.exactly($vars.t.value),288);$vars.xs=this._appendStructure($r2,this._applyWithArgs("transInside",$vars.t.value),292);return this._endStructure($r2);}),283);$vars.ys=this._appendStructure($r1,this._applyWithArgs("transInside",$vars.t.value),296);this._appendStructure($r1,this._apply("setHelped"),299);$r1.value=$vars.xs.value.concat($vars.ys.value);return this._endStructure($r1);},function(){var $r1=this._startStructure(303);$vars.x=this._appendStructure($r1,this._apply("trans"),306);$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside",$vars.t.value),309);$r1.value=[$vars.x.value].concat($vars.xs.value);return this._endStructure($r1);},function(){var $r1=this._startStructure(280);$r1.value=[];return this._endStructure($r1);}),279);return this._endStructure($r0);}});let BSSeqInliner=objectThatDelegatesTo(BSNullOptimization,{
"App":function(){var $elf=this,$vars={},$r0=this._startStructure(316, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(319);this._appendStructure($r1,this.exactly("seq"),321);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(325);$vars.l=this.anything();this._appendStructure($r2,this.exactly("Js"),328);$vars.locals=this.anything();this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(333);this._appendStructure($r3,this.exactly("string"),335);$vars.s=this.anything();return this._endStructure($r3);}),331);return this._endStructure($r2);}),323);this._appendStructure($r1,this.end(),338);$vars.cs=this._appendStructure($r1,this._applyWithArgs("seqString",$vars.s.value),341);this._appendStructure($r1,this._apply("setHelped"),344);$r1.value=["And"].concat($vars.cs.value).concat([jsValue("string",$vars.s.value)]);return this._endStructure($r1);},function(){var $r1=this._startStructure(348);$vars.rule=this.anything();$vars.args=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this.anything(),354);}),352);$r1.value=["App",$vars.rule.value].concat($vars.args.value);return this._endStructure($r1);}),317);return this._endStructure($r0);},
"inlineChar":function(){var $elf=this,$vars={},$r0=this._startStructure(358, true);$vars.c=this._appendStructure($r0,this._applyWithArgs("foreign",BSOMetaParser,"eChar"),361);$r0.value=[null,"App","exactly",jsValue("string",$vars.c.value)];return this._endStructure($r0);},
"seqString":function(){var $elf=this,$vars={},$r0=this._startStructure(366, true);this._appendStructure($r0,this._lookahead(function(){var $r1=this._startStructure(370);$vars.s=this.anything();$r1.value=this._pred(((typeof $vars.s.value) === "string"));return this._endStructure($r1);}),368);this._appendStructure($r0,this._form(function(){return this._forwardStructure($vars.cs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("inlineChar"),382);}),380),378);}),376);$r0.value=$vars.cs.value;return this._endStructure($r0);}});let JumpTable=(function (choiceOp,choice){(this["choiceOp"]=choiceOp);(this["choices"]=({}));this.add(choice);});(JumpTable["prototype"]["add"]=(function (choice){var c=choice[(0)],t=choice[(1)];if(this["choices"][c]){if((this["choices"][c][(0)] == this["choiceOp"])){this["choices"][c].push(t);}else{(this["choices"][c]=[this["choiceOp"],this["choices"][c],t]);};}else{(this["choices"][c]=t);};}));(JumpTable["prototype"]["toTree"]=(function (){var r=["JumpTable"],choiceKeys=ownPropertyNames(this["choices"]);for(var i=(0);(i < choiceKeys["length"]);(i+=(1))){r.push([choiceKeys[i],this["choices"][choiceKeys[i]]]);}return r;}));let BSJumpTableOptimization=objectThatDelegatesTo(BSNullOptimization,{
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(387, true);$vars.cs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._or(function(){return this._forwardStructure(this._applyWithArgs("jtChoices","Or"),394);},function(){return this._forwardStructure(this._apply("trans"),397);}),392);}),390);$r0.value=["Or"].concat($vars.cs.value);return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(401, true);$vars.cs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._or(function(){return this._forwardStructure(this._applyWithArgs("jtChoices","XOr"),408);},function(){return this._forwardStructure(this._apply("trans"),411);}),406);}),404);$r0.value=["XOr"].concat($vars.cs.value);return this._endStructure($r0);},
"quotedString":function(){var $elf=this,$vars={},$r0=this._startStructure(415, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(419);$vars.l=this.anything();this._appendStructure($r1,this.exactly("Js"),422);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(426);this._appendStructure($r2,this.exactly("string"),428);$vars.s=this.anything();return this._endStructure($r2);}),424);return this._endStructure($r1);}),417);$r0.value=$vars.s.value;return this._endStructure($r0);},
"jtChoice":function(){var $elf=this,$vars={},$r0=this._startStructure(433, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(436);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(440);$vars.l=this.anything();this._appendStructure($r2,this.exactly("And"),443);this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(447);$vars.l1=this.anything();this._appendStructure($r3,this.exactly("App"),450);this._appendStructure($r3,this.exactly("exactly"),452);$vars.x=this._appendStructure($r3,this._apply("quotedString"),455);return this._endStructure($r3);}),445);$vars.rest=this._appendStructure($r2,this._many(function(){return this._forwardStructure(this.anything(),460);}),458);return this._endStructure($r2);}),438);$r1.value=[$vars.x.value,[$vars.l.value,"And"].concat($vars.rest.value)];return this._endStructure($r1);},function(){var $r1=this._startStructure(464);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(468);$vars.l1=this.anything();this._appendStructure($r2,this.exactly("App"),471);this._appendStructure($r2,this.exactly("exactly"),473);$vars.x=this._appendStructure($r2,this._apply("quotedString"),476);return this._endStructure($r2);}),466);$r1.value=[$vars.x.value,jsValue("string",$vars.x.value)];return this._endStructure($r1);}),434);return this._endStructure($r0);},
"jtChoices":function(){var $elf=this,$vars={},$r0=this._startStructure(480, true);$vars.op=this.anything();$vars.c=this._appendStructure($r0,this._apply("jtChoice"),484);$vars.jt=this._generateStructure($r0,new JumpTable($vars.op.value,$vars.c.value),487);this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(491);$vars.c=this._appendStructure($r1,this._apply("jtChoice"),494);$r1.value=$vars.jt.value.add($vars.c.value);return this._endStructure($r1);}),489);this._appendStructure($r0,this._apply("setHelped"),498);$r0.value=$vars.jt.value.toTree();return this._endStructure($r0);}});let BSFunctionOptimization=objectThatDelegatesTo(GenericMatcher,{
"optimize":function(){var $elf=this,$vars={},$r0=this._startStructure(503, true);$vars.x=this._appendStructure($r0,this._apply("trans"),506);$r0.value=$vars.x.value;return this._endStructure($r0);},
"pushLocation":function(){var $elf=this,$vars={},$r0=this._startStructure(510, true);$vars.loc=this.anything();$r0.value=this["_locations"].push($vars.loc.value);return this._endStructure($r0);},
"popLocation":function(){var $elf=this,$vars={},$r0=this._startStructure(515, true);$r0.value=this["_locations"].pop();return this._endStructure($r0);},
"trans":function(){var $elf=this,$vars={},$r0=this._startStructure(517, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(521);$vars.loc=this.anything();$vars.t=this.anything();$r1.value=this._pred((this[$vars.t.value] != undefined));this._appendStructure($r1,this._applyWithArgs("pushLocation",$vars.loc.value),528);$vars.ans=this._appendStructure($r1,this._apply($vars.t.value),532);this._appendStructure($r1,this._apply("popLocation"),535);return this._endStructure($r1);}),519);$r0.value=[$vars.loc.value].concat($vars.ans.value);return this._endStructure($r0);},
"generatesStructure":function(){var $elf=this,$vars={},$r0=this._startStructure(539, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure(this.exactly("Or"),542);},function(){return this._forwardStructure(this.exactly("XOr"),544);},function(){return this._forwardStructure(this.exactly("Opt"),546);},function(){return this._forwardStructure(this.exactly("Many"),548);},function(){return this._forwardStructure(this.exactly("Many1"),550);},function(){return this._forwardStructure(this.exactly("Not"),552);},function(){return this._forwardStructure(this.exactly("Lookahead"),554);},function(){return this._forwardStructure(this.exactly("Form"),556);},function(){return this._forwardStructure(this.exactly("ConsBy"),558);},function(){return this._forwardStructure(this.exactly("IdxConsBy"),560);},function(){return this._forwardStructure(this.exactly("App"),562);},function(){return this._forwardStructure(this.exactly("JumpTable"),564);},function(){return this._forwardStructure(this.exactly("Interleave"),566);},function(){return this._forwardStructure(this.exactly("Set"),568);},function(){return this._forwardStructure(this.exactly("PopArg"),570);}),540);return this._endStructure($r0);},
"storeSomething":function(){var $elf=this,$vars={},$r0=this._startStructure(572, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(575);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(579);$vars.loc=this.anything();this._appendStructure($r2,this.exactly("PopArg"),582);this._appendStructure($r2,this._applyWithArgs("pushLocation",$vars.loc.value),585);$vars.ans=this._appendStructure($r2,this._apply("PopArg"),589);this._appendStructure($r2,this._apply("popLocation"),592);return this._endStructure($r2);}),577);$r1.value=[$vars.loc.value].concat($vars.ans.value);return this._endStructure($r1);},function(){var $r1=this._startStructure(596);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(600);$vars.loc=this.anything();this._appendStructure($r2,this.exactly("Set"),603);this._appendStructure($r2,this._applyWithArgs("pushLocation",$vars.loc.value),606);$vars.ans=this._appendStructure($r2,this._apply("Set"),610);this._appendStructure($r2,this._apply("popLocation"),613);return this._endStructure($r2);}),598);$r1.value=[$vars.loc.value].concat($vars.ans.value);return this._endStructure($r1);},function(){var $r1=this._startStructure(617);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(621);$vars.loc=this.anything();$vars.t=this._appendStructure($r2,this._apply("generatesStructure"),625);this._appendStructure($r2,this._applyWithArgs("pushLocation",$vars.loc.value),627);$vars.ans=this._appendStructure($r2,this._apply($vars.t.value),631);this._appendStructure($r2,this._apply("popLocation"),634);return this._endStructure($r2);}),619);$r1.value=[$vars.loc.value,"Store",[$vars.loc.value].concat($vars.ans.value)];return this._endStructure($r1);},function(){var $r1=this._startStructure(638);$vars.x=this._appendStructure($r1,this._apply("trans"),641);$r1.value=[$vars.x.value[(0)],"SetReturn",$vars.x.value];return this._endStructure($r1);}),573);return this._endStructure($r0);},
"somethingThatReturns":function(){var $elf=this,$vars={},$r0=this._startStructure(645, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(648);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(652);$vars.l=this.anything();this._appendStructure($r2,this.exactly("And"),655);this._appendStructure($r2,this.end(),658);return this._endStructure($r2);}),650);$r1.value=[$vars.l.value,"SetReturn",[$vars.l.value,"And"]];return this._endStructure($r1);},function(){var $r1=this._startStructure(662);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(666);$vars.l=this.anything();this._appendStructure($r2,this.exactly("And"),669);$vars.xs=this._appendStructure($r2,this._many(function(){return this._forwardStructure(this._apply("storeSomething"),675);}),673);return this._endStructure($r2);}),664);$r1.value=[$vars.l.value,"And"].concat($vars.xs.value);return this._endStructure($r1);},function(){var $r1=this._startStructure(679);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(683);$vars.l=this.anything();$vars.t=this._appendStructure($r2,this._apply("generatesStructure"),687);$vars.ans=this._appendStructure($r2,this._apply($vars.t.value),690);return this._endStructure($r2);}),681);$r1.value=[$vars.l.value,"Store",[$vars.l.value].concat($vars.ans.value)];return this._endStructure($r1);},function(){var $r1=this._startStructure(695);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(699);$vars.l=this.anything();$vars.t=this.anything();$vars.ans=this._appendStructure($r2,this._apply($vars.t.value),704);return this._endStructure($r2);}),697);$r1.value=[null,"SetReturn",[$vars.l.value].concat($vars.ans.value)];return this._endStructure($r1);}),646);return this._endStructure($r0);},
"somethingThatCanPass":function(){var $elf=this,$vars={},$r0=this._startStructure(709, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(713);$vars.loc=this.anything();$vars.t=this._appendStructure($r1,this._apply("generatesStructure"),717);this._appendStructure($r1,this._applyWithArgs("pushLocation",$vars.loc.value),719);$vars.ans=this._appendStructure($r1,this._apply($vars.t.value),723);this._appendStructure($r1,this._apply("popLocation"),726);return this._endStructure($r1);}),711);$r0.value=[$vars.loc.value].concat($vars.ans.value);return this._endStructure($r0);},
"functioned":function(){var $elf=this,$vars={},$r0=this._startStructure(730, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(733);$vars.x=this._appendStructure($r1,this._apply("somethingThatCanPass"),736);$r1.value=[$vars.x.value[(0)],"Function",[null,"Return",$vars.x.value]];return this._endStructure($r1);},function(){var $r1=this._startStructure(740);$vars.x=this._appendStructure($r1,this._apply("somethingThatReturns"),743);$r1.value=[$vars.x.value[(0)],"FunctionStructure",$vars.x.value];return this._endStructure($r1);}),731);return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(747, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("functioned"),752);}),750);$r0.value=["Or"].concat($vars.xs.value);return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(756, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("functioned"),761);}),759);$r0.value=["XOr"].concat($vars.xs.value);return this._endStructure($r0);},
"Opt":function(){var $elf=this,$vars={},$r0=this._startStructure(765, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),768);$r0.value=["Opt",$vars.x.value];return this._endStructure($r0);},
"Many":function(){var $elf=this,$vars={},$r0=this._startStructure(772, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),775);$r0.value=["Many",$vars.x.value];return this._endStructure($r0);},
"Many1":function(){var $elf=this,$vars={},$r0=this._startStructure(779, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),782);$r0.value=["Many1",$vars.x.value];return this._endStructure($r0);},
"Not":function(){var $elf=this,$vars={},$r0=this._startStructure(786, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),789);$r0.value=["Not",$vars.x.value];return this._endStructure($r0);},
"Lookahead":function(){var $elf=this,$vars={},$r0=this._startStructure(793, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),796);$r0.value=["Lookahead",$vars.x.value];return this._endStructure($r0);},
"Form":function(){var $elf=this,$vars={},$r0=this._startStructure(800, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),803);$r0.value=["Form",$vars.x.value];return this._endStructure($r0);},
"ConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(807, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),810);$r0.value=["ConsBy",$vars.x.value];return this._endStructure($r0);},
"IdxConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(814, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),817);$r0.value=["IdxConsBy",$vars.x.value];return this._endStructure($r0);},
"App":function(){var $elf=this,$vars={},$r0=this._startStructure(821, true);$vars.rule=this.anything();$vars.args=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("trans"),827);}),825);$r0.value=["App",$vars.rule.value].concat($vars.args.value);return this._endStructure($r0);},
"JumpTable":function(){var $elf=this,$vars={},$r0=this._startStructure(831, true);$vars.ces=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(836);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(840);$vars.c=this.anything();$vars.e=this._appendStructure($r2,this._apply("somethingThatReturns"),844);return this._endStructure($r2);}),838);$r1.value=[$vars.c.value,$vars.e.value];return this._endStructure($r1);}),834);$r0.value=["JumpTable"].concat($vars.ces.value);return this._endStructure($r0);},
"Interleave":function(){var $elf=this,$vars={},$r0=this._startStructure(850, true);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(855);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(859);$vars.m=this.anything();$vars.p=this._appendStructure($r2,this._apply("functioned"),863);return this._endStructure($r2);}),857);$r1.value=[$vars.m.value,$vars.p.value];return this._endStructure($r1);}),853);$r0.value=["Interleave"].concat($vars.xs.value);return this._endStructure($r0);},
"setRight":function(){var $elf=this,$vars={},$r0=this._startStructure(869, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(872);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(876);$vars.loc=this.anything();$vars.t=this._appendStructure($r2,this._apply("generatesStructure"),880);this._appendStructure($r2,this._applyWithArgs("pushLocation",$vars.loc.value),882);$vars.ans=this._appendStructure($r2,this._apply($vars.t.value),886);this._appendStructure($r2,this._apply("popLocation"),889);return this._endStructure($r2);}),874);$r1.value=[$vars.loc.value,"Store",[$vars.loc.value].concat($vars.ans.value)];return this._endStructure($r1);},function(){var $r1=this._startStructure(893);$vars.x=this._appendStructure($r1,this._apply("trans"),896);$r1.value=[$vars.x.value[(0)],"Wrap",$vars.x.value];return this._endStructure($r1);}),870);return this._endStructure($r0);},
"Set":function(){var $elf=this,$vars={},$r0=this._startStructure(900, true);$vars.n=this.anything();$vars.v=this._appendStructure($r0,this._apply("setRight"),904);$r0.value=["Set",$vars.n.value,$vars.v.value];return this._endStructure($r0);},
"Pred":function(){var $elf=this,$vars={},$r0=this._startStructure(908, true);$vars.expr=this.anything();$r0.value=["Pred",$vars.expr.value];return this._endStructure($r0);},
"Js":function(){var $elf=this,$vars={},$r0=this._startStructure(913, true);$vars.locals=this.anything();$vars.code=this.anything();$r0.value=["Js",$vars.locals.value,$vars.code.value];return this._endStructure($r0);},
"Location":function(){var $elf=this,$vars={},$r0=this._startStructure(919, true);$r0.value=["Location"];return this._endStructure($r0);},
"PopArg":function(){var $elf=this,$vars={},$r0=this._startStructure(921, true);$vars.n=this.anything();$r0.value=["PopArg",$vars.n.value];return this._endStructure($r0);},
"Rule":function(){var $elf=this,$vars={},$r0=this._startStructure(926, true);$vars.name=this.anything();$vars.body=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(932);$vars.b=this._appendStructure($r1,this._apply("somethingThatCanPass"),935);$r1.value=[$vars.b.value[(0)],"Store",$vars.b.value];return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("somethingThatReturns"),939);}),930);$r0.value=["Rule",$vars.name.value,$vars.body.value];return this._endStructure($r0);}});(BSFunctionOptimization["initialize"]=(function (){(this["_locations"]=[]);}));(BSFunctionOptimization["location"]=(function (){return this["_locations"][(this["_locations"]["length"] - (1))];}));let BSOMetaOptimizer=objectThatDelegatesTo(OMeta,{
"optimizeGrammar":function(){var $elf=this,$vars={},$r0=this._startStructure(944, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(948);this._appendStructure($r1,this.exactly("Grammar"),950);$vars.sn=this.anything();$vars.rs=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("optimizeRule"),956);}),954);return this._endStructure($r1);}),946);$r0.value=["Grammar",$vars.sn.value].concat($vars.rs.value);return this._endStructure($r0);},
"optimizeRule":function(){var $elf=this,$vars={},$r0=this._startStructure(960, true);$vars.r=this.anything();this._appendStructure($r0,this._or(function(){return this._forwardStructure($vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSeqInliner,"optimize",$vars.r.value),967),965);},function(){return this._forwardStructure(this._apply("empty"),971);}),963);this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._or(function(){return this._forwardStructure($vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSAssociativeOptimization,"optimize",$vars.r.value),979),977);},function(){return this._forwardStructure($vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSJumpTableOptimization,"optimize",$vars.r.value),985),983);}),975);}),973);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSFunctionOptimization,"optimize",$vars.r.value),990);$r0.value=$vars.r.value;return this._endStructure($r0);}})


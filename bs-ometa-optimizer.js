// This file was generated using Gnometa
// https://github.com/djdeath/gnometa
let mergeLocation=(function (loc1,loc2){return ({"start": Math.min(loc1["start"],loc2["start"]),"stop": Math.max(loc1["stop"],loc2["stop"])});});let BSNullOptimization=objectThatDelegatesTo(OMeta,{
"setHelped":function(){var $elf=this,$vars={},$r0=this._startStructure(1, true);$r0.value=(this["_didSomething"]=true);return this._endStructure($r0);},
"helped":function(){var $elf=this,$vars={},$r0=this._startStructure(3, true);$r0.value=this._pred(this["_didSomething"]);return this._endStructure($r0);},
"pushLocation":function(){var $elf=this,$vars={},$r0=this._startStructure(6, true);$vars.loc=this.anything();$r0.value=this["_locations"].push($vars.loc.value);return this._endStructure($r0);},
"popLocation":function(){var $elf=this,$vars={},$r0=this._startStructure(11, true);$r0.value=this["_locations"].pop();return this._endStructure($r0);},
"trans":function(){var $elf=this,$vars={},$r0=this._startStructure(13, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(17);$vars.loc=this.anything();$vars.t=this.anything();$r1.value=this._pred((this[$vars.t.value] != undefined));this._appendStructure($r1,this._applyWithArgs("pushLocation",$vars.loc.value),24);$vars.ans=this._appendStructure($r1,this._apply($vars.t.value),28);this._appendStructure($r1,this._apply("popLocation"),31);return this._endStructure($r1);}),15);$r0.value=[$vars.loc.value].concat($vars.ans.value);return this._endStructure($r0);},
"optimize":function(){var $elf=this,$vars={},$r0=this._startStructure(35, true);$vars.x=this._appendStructure($r0,this._apply("trans"),38);this._appendStructure($r0,this._apply("helped"),40);$r0.value=$vars.x.value;return this._endStructure($r0);},
"App":function(){var $elf=this,$vars={},$r0=this._startStructure(44, true);$vars.rule=this.anything();$vars.args=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this.anything(),50);}),48);$r0.value=["App",$vars.rule.value].concat($vars.args.value);return this._endStructure($r0);},
"Pred":function(){var $elf=this,$vars={},$r0=this._startStructure(54, true);$vars.expr=this.anything();$r0.value=["Pred",$vars.expr.value];return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(59, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("trans"),64);}),62);$r0.value=["Or"].concat($vars.xs.value);return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(68, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("trans"),73);}),71);$r0.value=["XOr"].concat($vars.xs.value);return this._endStructure($r0);},
"And":function(){var $elf=this,$vars={},$r0=this._startStructure(77, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("trans"),82);}),80);$r0.value=["And"].concat($vars.xs.value);return this._endStructure($r0);},
"Opt":function(){var $elf=this,$vars={},$r0=this._startStructure(86, true);$vars.x=this._appendStructure($r0,this._apply("trans"),89);$r0.value=["Opt",$vars.x.value];return this._endStructure($r0);},
"Many":function(){var $elf=this,$vars={},$r0=this._startStructure(93, true);$vars.x=this._appendStructure($r0,this._apply("trans"),96);$r0.value=["Many",$vars.x.value];return this._endStructure($r0);},
"Many1":function(){var $elf=this,$vars={},$r0=this._startStructure(100, true);$vars.x=this._appendStructure($r0,this._apply("trans"),103);$r0.value=["Many1",$vars.x.value];return this._endStructure($r0);},
"Set":function(){var $elf=this,$vars={},$r0=this._startStructure(107, true);$vars.n=this.anything();$vars.v=this._appendStructure($r0,this._apply("trans"),111);$r0.value=["Set",$vars.n.value,$vars.v.value];return this._endStructure($r0);},
"Not":function(){var $elf=this,$vars={},$r0=this._startStructure(115, true);$vars.x=this._appendStructure($r0,this._apply("trans"),118);$r0.value=["Not",$vars.x.value];return this._endStructure($r0);},
"Lookahead":function(){var $elf=this,$vars={},$r0=this._startStructure(122, true);$vars.x=this._appendStructure($r0,this._apply("trans"),125);$r0.value=["Lookahead",$vars.x.value];return this._endStructure($r0);},
"Form":function(){var $elf=this,$vars={},$r0=this._startStructure(129, true);$vars.x=this._appendStructure($r0,this._apply("trans"),132);$r0.value=["Form",$vars.x.value];return this._endStructure($r0);},
"ConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(136, true);$vars.x=this._appendStructure($r0,this._apply("trans"),139);$r0.value=["ConsBy",$vars.x.value];return this._endStructure($r0);},
"IdxConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(143, true);$vars.x=this._appendStructure($r0,this._apply("trans"),146);$r0.value=["IdxConsBy",$vars.x.value];return this._endStructure($r0);},
"JumpTable":function(){var $elf=this,$vars={},$r0=this._startStructure(150, true);$vars.ces=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(155);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(159);$vars.c=this.anything();$vars.e=this._appendStructure($r2,this._apply("trans"),163);return this._endStructure($r2);}),157);$r1.value=[$vars.c.value,$vars.e.value];return this._endStructure($r1);}),153);$r0.value=["JumpTable"].concat($vars.ces.value);return this._endStructure($r0);},
"Interleave":function(){var $elf=this,$vars={},$r0=this._startStructure(169, true);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(174);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(178);$vars.m=this.anything();$vars.p=this._appendStructure($r2,this._apply("trans"),182);return this._endStructure($r2);}),176);$r1.value=[$vars.m.value,$vars.p.value];return this._endStructure($r1);}),172);$r0.value=["Interleave"].concat($vars.xs.value);return this._endStructure($r0);},
"Js":function(){var $elf=this,$vars={},$r0=this._startStructure(188, true);$vars.locals=this.anything();$vars.code=this.anything();$r0.value=["Js",$vars.locals.value,$vars.code.value];return this._endStructure($r0);},
"Location":function(){var $elf=this,$vars={},$r0=this._startStructure(194, true);$r0.value=["Location"];return this._endStructure($r0);},
"PopArg":function(){var $elf=this,$vars={},$r0=this._startStructure(196, true);$vars.n=this.anything();$r0.value=["PopArg",$vars.n.value];return this._endStructure($r0);},
"Rule":function(){var $elf=this,$vars={},$r0=this._startStructure(201, true);$vars.name=this.anything();$vars.body=this._appendStructure($r0,this._apply("trans"),205);$r0.value=["Rule",$vars.name.value,$vars.body.value];return this._endStructure($r0);}});(BSNullOptimization["initialize"]=(function (){(this["_didSomething"]=false);(this["_locations"]=[]);}));(BSNullOptimization["location"]=(function (){return this["_locations"][(this["_locations"]["length"] - (1))];}));let BSAssociativeOptimization=objectThatDelegatesTo(BSNullOptimization,{
"And":function(){var $elf=this,$vars={},$r0=this._startStructure(210, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(213);$vars.x=this._appendStructure($r1,this._apply("trans"),216);this._appendStructure($r1,this.end(),218);this._appendStructure($r1,this._apply("setHelped"),220);$r1.value=$vars.x.value.slice((1));return this._endStructure($r1);},function(){var $r1=this._startStructure(224);$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside","And"),227);$r1.value=["And"].concat($vars.xs.value);return this._endStructure($r1);}),211);return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(232, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(235);$vars.x=this._appendStructure($r1,this._apply("trans"),238);this._appendStructure($r1,this.end(),240);this._appendStructure($r1,this._apply("setHelped"),242);$r1.value=$vars.x.value.slice((1));return this._endStructure($r1);},function(){var $r1=this._startStructure(246);$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside","Or"),249);$r1.value=["Or"].concat($vars.xs.value);return this._endStructure($r1);}),233);return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(254, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(257);$vars.x=this._appendStructure($r1,this._apply("trans"),260);this._appendStructure($r1,this.end(),262);this._appendStructure($r1,this._apply("setHelped"),264);$r1.value=$vars.x.value.slice((1));return this._endStructure($r1);},function(){var $r1=this._startStructure(268);$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside","XOr"),271);$r1.value=["XOr"].concat($vars.xs.value);return this._endStructure($r1);}),255);return this._endStructure($r0);},
"transInside":function(){var $elf=this,$vars={},$r0=this._startStructure(276, true);$vars.t=this.anything();this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(281);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(285);$vars.l=this.anything();this._appendStructure($r2,this.exactly($vars.t.value),288);$vars.xs=this._appendStructure($r2,this._applyWithArgs("transInside",$vars.t.value),292);return this._endStructure($r2);}),283);$vars.ys=this._appendStructure($r1,this._applyWithArgs("transInside",$vars.t.value),296);this._appendStructure($r1,this._apply("setHelped"),299);$r1.value=$vars.xs.value.concat($vars.ys.value);return this._endStructure($r1);},function(){var $r1=this._startStructure(303);$vars.x=this._appendStructure($r1,this._apply("trans"),306);$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside",$vars.t.value),309);$r1.value=[$vars.x.value].concat($vars.xs.value);return this._endStructure($r1);},function(){var $r1=this._startStructure(280);$r1.value=[];return this._endStructure($r1);}),279);return this._endStructure($r0);}});let BSSeqInliner=objectThatDelegatesTo(BSNullOptimization,{
"App":function(){var $elf=this,$vars={},$r0=this._startStructure(316, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure((function(){var $r1=this._startStructure(-1);switch(this._appendStructure($r1,this._apply('anything')).value){case "seq":this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(324);$vars.l=this.anything();this._appendStructure($r2,this.exactly("Js"),327);$vars.locals=this.anything();this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(333);this._appendStructure($r3,this.exactly("string"),335);$vars.s=this.anything();return this._endStructure($r3);}),331);return this._endStructure($r2);}),322);this._appendStructure($r1,this.end(),338);$vars.cs=this._appendStructure($r1,this._applyWithArgs("seqString",$vars.s.value),341);this._appendStructure($r1,this._apply("setHelped"),344);$r1.value=["And"].concat($vars.cs.value).concat([jsValue("string",$vars.s.value)]);break;default: throw fail;}return this._endStructure($r1);}).call(this),319);},function(){var $r1=this._startStructure(348);$vars.rule=this.anything();$vars.args=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this.anything(),354);}),352);$r1.value=["App",$vars.rule.value].concat($vars.args.value);return this._endStructure($r1);}),317);return this._endStructure($r0);},
"inlineChar":function(){var $elf=this,$vars={},$r0=this._startStructure(358, true);$vars.c=this._appendStructure($r0,this._applyWithArgs("foreign",BSOMetaParser,"eChar"),361);$r0.value=[null,"App","exactly",jsValue("string",$vars.c.value)];return this._endStructure($r0);},
"seqString":function(){var $elf=this,$vars={},$r0=this._startStructure(366, true);this._appendStructure($r0,this._lookahead(function(){var $r1=this._startStructure(370);$vars.s=this.anything();$r1.value=this._pred(((typeof $vars.s.value) === "string"));return this._endStructure($r1);}),368);this._appendStructure($r0,this._form(function(){return this._forwardStructure($vars.cs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("inlineChar"),382);}),380),378);}),376);$r0.value=$vars.cs.value;return this._endStructure($r0);}});let JumpTable=(function (choiceOp,choice){(this["choiceOp"]=choiceOp);(this["choices"]=({}));this.add(choice);});(JumpTable["prototype"]["add"]=(function (choice){var c=choice[(0)],t=choice[(1)],loc=t[(0)];if(this["choices"][c]){if((this["choices"][c][(0)] == this["choiceOp"])){this["choices"][c].push(t);}else{(this["choices"][c]=[loc,this["choiceOp"],this["choices"][c],t]);};}else{(this["choices"][c]=t);};}));(JumpTable["prototype"]["toTree"]=(function (location){var r=[location,"JumpTable"],choiceKeys=ownPropertyNames(this["choices"]);for(var i=(0);(i < choiceKeys["length"]);(i+=(1))){r.push([choiceKeys[i],this["choices"][choiceKeys[i]]]);}return r;}));let BSJumpTableOptimization=objectThatDelegatesTo(BSNullOptimization,{
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(387, true);$vars.cs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._or(function(){return this._forwardStructure(this._applyWithArgs("jtChoices","Or"),394);},function(){return this._forwardStructure(this._apply("trans"),397);}),392);}),390);$r0.value=["Or"].concat($vars.cs.value);return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(401, true);$vars.cs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._or(function(){return this._forwardStructure(this._applyWithArgs("jtChoices","XOr"),408);},function(){return this._forwardStructure(this._apply("trans"),411);}),406);}),404);$r0.value=["XOr"].concat($vars.cs.value);return this._endStructure($r0);},
"quotedString":function(){var $elf=this,$vars={},$r0=this._startStructure(415, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(419);$vars.l=this.anything();this._appendStructure($r1,this.exactly("Js"),422);$vars.locals=this.anything();this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(427);this._appendStructure($r2,this.exactly("string"),429);$vars.s=this.anything();return this._endStructure($r2);}),425);return this._endStructure($r1);}),417);$r0.value=$vars.s.value;return this._endStructure($r0);},
"jtChoice":function(){var $elf=this,$vars={},$r0=this._startStructure(435, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(438);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(442);$vars.l=this.anything();this._appendStructure($r2,this.exactly("And"),445);this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(449);$vars.l1=this.anything();this._appendStructure($r3,this.exactly("App"),452);this._appendStructure($r3,this.exactly("exactly"),454);$vars.x=this._appendStructure($r3,this._apply("quotedString"),457);return this._endStructure($r3);}),447);$vars.rest=this._appendStructure($r2,this._many(function(){return this._forwardStructure(this.anything(),462);}),460);return this._endStructure($r2);}),440);$r1.value=[$vars.x.value,[$vars.l.value,"And"].concat($vars.rest.value)];return this._endStructure($r1);},function(){var $r1=this._startStructure(466);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(470);$vars.l1=this.anything();this._appendStructure($r2,this.exactly("App"),473);this._appendStructure($r2,this.exactly("exactly"),475);$vars.x=this._appendStructure($r2,this._apply("quotedString"),478);return this._endStructure($r2);}),468);$r1.value=[$vars.x.value,jsValue("string",$vars.x.value)];return this._endStructure($r1);}),436);return this._endStructure($r0);},
"jtChoices":function(){var $elf=this,$vars={},$r0=this._startStructure(482, true);$vars.op=this.anything();$vars.c=this._appendStructure($r0,this._apply("jtChoice"),486);$vars.jt=this._generateStructure($r0,new JumpTable($vars.op.value,$vars.c.value),489);this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(493);$vars.c=this._appendStructure($r1,this._apply("jtChoice"),496);$r1.value=$vars.jt.value.add($vars.c.value);return this._endStructure($r1);}),491);this._appendStructure($r0,this._apply("setHelped"),500);$r0.value=$vars.jt.value.toTree(this.location());return this._endStructure($r0);}});let BSFunctionOptimization=objectThatDelegatesTo(GenericMatcher,{
"optimize":function(){var $elf=this,$vars={},$r0=this._startStructure(505, true);$vars.x=this._appendStructure($r0,this._apply("trans"),508);$r0.value=$vars.x.value;return this._endStructure($r0);},
"pushLocation":function(){var $elf=this,$vars={},$r0=this._startStructure(512, true);$vars.loc=this.anything();$r0.value=this["_locations"].push($vars.loc.value);return this._endStructure($r0);},
"popLocation":function(){var $elf=this,$vars={},$r0=this._startStructure(517, true);$r0.value=this["_locations"].pop();return this._endStructure($r0);},
"trans":function(){var $elf=this,$vars={},$r0=this._startStructure(519, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(523);$vars.loc=this.anything();$vars.t=this.anything();$r1.value=this._pred((this[$vars.t.value] != undefined));this._appendStructure($r1,this._applyWithArgs("pushLocation",$vars.loc.value),530);$vars.ans=this._appendStructure($r1,this._apply($vars.t.value),534);this._appendStructure($r1,this._apply("popLocation"),537);return this._endStructure($r1);}),521);$r0.value=[$vars.loc.value].concat($vars.ans.value);return this._endStructure($r0);},
"generatesStructure":function(){var $elf=this,$vars={},$r0=this._startStructure(541, true);this._appendStructure($r0,(function(){var $r1=this._startStructure(-1);switch(this._appendStructure($r1,this._apply('anything')).value){case "Or":$r1.value="Or";break;case "XOr":$r1.value="XOr";break;case "Opt":$r1.value="Opt";break;case "Many":$r1.value="Many";break;case "Many1":$r1.value="Many1";break;case "Not":$r1.value="Not";break;case "Lookahead":$r1.value="Lookahead";break;case "Form":$r1.value="Form";break;case "ConsBy":$r1.value="ConsBy";break;case "IdxConsBy":$r1.value="IdxConsBy";break;case "App":$r1.value="App";break;case "JumpTable":$r1.value="JumpTable";break;case "Interleave":$r1.value="Interleave";break;case "Set":$r1.value="Set";break;case "PopArg":$r1.value="PopArg";break;default: throw fail;}return this._endStructure($r1);}).call(this),542);return this._endStructure($r0);},
"storeSomething":function(){var $elf=this,$vars={},$r0=this._startStructure(544, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(547);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(551);$vars.loc=this.anything();this._appendStructure($r2,this.exactly("PopArg"),554);this._appendStructure($r2,this._applyWithArgs("pushLocation",$vars.loc.value),557);$vars.ans=this._appendStructure($r2,this._apply("PopArg"),561);this._appendStructure($r2,this._apply("popLocation"),564);return this._endStructure($r2);}),549);$r1.value=[$vars.loc.value].concat($vars.ans.value);return this._endStructure($r1);},function(){var $r1=this._startStructure(568);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(572);$vars.loc=this.anything();this._appendStructure($r2,this.exactly("Set"),575);this._appendStructure($r2,this._applyWithArgs("pushLocation",$vars.loc.value),578);$vars.ans=this._appendStructure($r2,this._apply("Set"),582);this._appendStructure($r2,this._apply("popLocation"),585);return this._endStructure($r2);}),570);$r1.value=[$vars.loc.value].concat($vars.ans.value);return this._endStructure($r1);},function(){var $r1=this._startStructure(589);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(593);$vars.loc=this.anything();$vars.t=this._appendStructure($r2,this._apply("generatesStructure"),597);this._appendStructure($r2,this._applyWithArgs("pushLocation",$vars.loc.value),599);$vars.ans=this._appendStructure($r2,this._apply($vars.t.value),603);this._appendStructure($r2,this._apply("popLocation"),606);return this._endStructure($r2);}),591);$r1.value=[$vars.loc.value,"Store",[$vars.loc.value].concat($vars.ans.value)];return this._endStructure($r1);},function(){var $r1=this._startStructure(610);$vars.x=this._appendStructure($r1,this._apply("trans"),613);$r1.value=[$vars.x.value[(0)],"SetReturn",$vars.x.value];return this._endStructure($r1);}),545);return this._endStructure($r0);},
"somethingThatReturns":function(){var $elf=this,$vars={},$r0=this._startStructure(617, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(620);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(624);$vars.l=this.anything();this._appendStructure($r2,this.exactly("And"),627);this._appendStructure($r2,this.end(),630);return this._endStructure($r2);}),622);$r1.value=[$vars.l.value,"SetReturn",[$vars.l.value,"And"]];return this._endStructure($r1);},function(){var $r1=this._startStructure(634);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(638);$vars.l=this.anything();this._appendStructure($r2,this.exactly("And"),641);$vars.xs=this._appendStructure($r2,this._many(function(){return this._forwardStructure(this._apply("storeSomething"),647);}),645);return this._endStructure($r2);}),636);$r1.value=[$vars.l.value,"And"].concat($vars.xs.value);return this._endStructure($r1);},function(){var $r1=this._startStructure(651);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(655);$vars.l=this.anything();$vars.t=this._appendStructure($r2,this._apply("generatesStructure"),659);$vars.ans=this._appendStructure($r2,this._apply($vars.t.value),662);return this._endStructure($r2);}),653);$r1.value=[$vars.l.value,"Store",[$vars.l.value].concat($vars.ans.value)];return this._endStructure($r1);},function(){var $r1=this._startStructure(667);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(671);$vars.l=this.anything();$vars.t=this.anything();$vars.ans=this._appendStructure($r2,this._apply($vars.t.value),676);return this._endStructure($r2);}),669);$r1.value=[null,"SetReturn",[$vars.l.value].concat($vars.ans.value)];return this._endStructure($r1);}),618);return this._endStructure($r0);},
"somethingThatCanPass":function(){var $elf=this,$vars={},$r0=this._startStructure(681, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(685);$vars.loc=this.anything();$vars.t=this._appendStructure($r1,this._apply("generatesStructure"),689);this._appendStructure($r1,this._applyWithArgs("pushLocation",$vars.loc.value),691);$vars.ans=this._appendStructure($r1,this._apply($vars.t.value),695);this._appendStructure($r1,this._apply("popLocation"),698);return this._endStructure($r1);}),683);$r0.value=[$vars.loc.value].concat($vars.ans.value);return this._endStructure($r0);},
"functioned":function(){var $elf=this,$vars={},$r0=this._startStructure(702, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(705);$vars.x=this._appendStructure($r1,this._apply("somethingThatCanPass"),708);$r1.value=[$vars.x.value[(0)],"Function",[null,"Return",$vars.x.value]];return this._endStructure($r1);},function(){var $r1=this._startStructure(712);$vars.x=this._appendStructure($r1,this._apply("somethingThatReturns"),715);$r1.value=[$vars.x.value[(0)],"FunctionStructure",$vars.x.value];return this._endStructure($r1);}),703);return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(719, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("functioned"),724);}),722);$r0.value=["Or"].concat($vars.xs.value);return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(728, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("functioned"),733);}),731);$r0.value=["XOr"].concat($vars.xs.value);return this._endStructure($r0);},
"Opt":function(){var $elf=this,$vars={},$r0=this._startStructure(737, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),740);$r0.value=["Opt",$vars.x.value];return this._endStructure($r0);},
"Many":function(){var $elf=this,$vars={},$r0=this._startStructure(744, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),747);$r0.value=["Many",$vars.x.value];return this._endStructure($r0);},
"Many1":function(){var $elf=this,$vars={},$r0=this._startStructure(751, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),754);$r0.value=["Many1",$vars.x.value];return this._endStructure($r0);},
"Not":function(){var $elf=this,$vars={},$r0=this._startStructure(758, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),761);$r0.value=["Not",$vars.x.value];return this._endStructure($r0);},
"Lookahead":function(){var $elf=this,$vars={},$r0=this._startStructure(765, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),768);$r0.value=["Lookahead",$vars.x.value];return this._endStructure($r0);},
"Form":function(){var $elf=this,$vars={},$r0=this._startStructure(772, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),775);$r0.value=["Form",$vars.x.value];return this._endStructure($r0);},
"ConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(779, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),782);$r0.value=["ConsBy",$vars.x.value];return this._endStructure($r0);},
"IdxConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(786, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),789);$r0.value=["IdxConsBy",$vars.x.value];return this._endStructure($r0);},
"App":function(){var $elf=this,$vars={},$r0=this._startStructure(793, true);$vars.rule=this.anything();$vars.args=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("trans"),799);}),797);$r0.value=["App",$vars.rule.value].concat($vars.args.value);return this._endStructure($r0);},
"JumpTable":function(){var $elf=this,$vars={},$r0=this._startStructure(803, true);$vars.ces=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(808);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(812);$vars.c=this.anything();$vars.e=this._appendStructure($r2,this._apply("somethingThatReturns"),816);return this._endStructure($r2);}),810);$r1.value=[$vars.c.value,$vars.e.value];return this._endStructure($r1);}),806);$r0.value=["JumpTable"].concat($vars.ces.value);return this._endStructure($r0);},
"Interleave":function(){var $elf=this,$vars={},$r0=this._startStructure(822, true);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(827);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(831);$vars.m=this.anything();$vars.p=this._appendStructure($r2,this._apply("functioned"),835);return this._endStructure($r2);}),829);$r1.value=[$vars.m.value,$vars.p.value];return this._endStructure($r1);}),825);$r0.value=["Interleave"].concat($vars.xs.value);return this._endStructure($r0);},
"setRight":function(){var $elf=this,$vars={},$r0=this._startStructure(841, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(844);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(848);$vars.loc=this.anything();$vars.t=this._appendStructure($r2,this._apply("generatesStructure"),852);this._appendStructure($r2,this._applyWithArgs("pushLocation",$vars.loc.value),854);$vars.ans=this._appendStructure($r2,this._apply($vars.t.value),858);this._appendStructure($r2,this._apply("popLocation"),861);return this._endStructure($r2);}),846);$r1.value=[$vars.loc.value,"Store",[$vars.loc.value].concat($vars.ans.value)];return this._endStructure($r1);},function(){var $r1=this._startStructure(865);$vars.x=this._appendStructure($r1,this._apply("trans"),868);$r1.value=[$vars.x.value[(0)],"Wrap",$vars.x.value];return this._endStructure($r1);}),842);return this._endStructure($r0);},
"Set":function(){var $elf=this,$vars={},$r0=this._startStructure(872, true);$vars.n=this.anything();$vars.v=this._appendStructure($r0,this._apply("setRight"),876);$r0.value=["Set",$vars.n.value,$vars.v.value];return this._endStructure($r0);},
"Pred":function(){var $elf=this,$vars={},$r0=this._startStructure(880, true);$vars.expr=this.anything();$r0.value=["Pred",$vars.expr.value];return this._endStructure($r0);},
"Js":function(){var $elf=this,$vars={},$r0=this._startStructure(885, true);$vars.locals=this.anything();$vars.code=this.anything();$r0.value=["Js",$vars.locals.value,$vars.code.value];return this._endStructure($r0);},
"Location":function(){var $elf=this,$vars={},$r0=this._startStructure(891, true);$r0.value=["Location"];return this._endStructure($r0);},
"PopArg":function(){var $elf=this,$vars={},$r0=this._startStructure(893, true);$vars.n=this.anything();$r0.value=["PopArg",$vars.n.value];return this._endStructure($r0);},
"Rule":function(){var $elf=this,$vars={},$r0=this._startStructure(898, true);$vars.name=this.anything();$vars.body=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(904);$vars.b=this._appendStructure($r1,this._apply("somethingThatCanPass"),907);$r1.value=[$vars.b.value[(0)],"Store",$vars.b.value];return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("somethingThatReturns"),911);}),902);$r0.value=["Rule",$vars.name.value,$vars.body.value];return this._endStructure($r0);}});(BSFunctionOptimization["initialize"]=(function (){(this["_locations"]=[]);}));(BSFunctionOptimization["location"]=(function (){return this["_locations"][(this["_locations"]["length"] - (1))];}));let BSOMetaOptimizer=objectThatDelegatesTo(OMeta,{
"optimizeGrammar":function(){var $elf=this,$vars={},$r0=this._startStructure(916, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(920);this._appendStructure($r1,this.exactly("Grammar"),922);$vars.sn=this.anything();$vars.rs=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("optimizeRule"),928);}),926);return this._endStructure($r1);}),918);$r0.value=["Grammar",$vars.sn.value].concat($vars.rs.value);return this._endStructure($r0);},
"optimizeRule":function(){var $elf=this,$vars={},$r0=this._startStructure(932, true);$vars.r=this.anything();this._appendStructure($r0,this._or(function(){return this._forwardStructure($vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSeqInliner,"optimize",$vars.r.value),939),937);},function(){return this._forwardStructure(this._apply("empty"),943);}),935);this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._or(function(){return this._forwardStructure($vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSAssociativeOptimization,"optimize",$vars.r.value),951),949);},function(){return this._forwardStructure($vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSJumpTableOptimization,"optimize",$vars.r.value),957),955);}),947);}),945);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSFunctionOptimization,"optimize",$vars.r.value),962);$r0.value=$vars.r.value;return this._endStructure($r0);}})


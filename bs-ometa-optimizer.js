// This file was generated using Gnometa
// https://github.com/djdeath/gnometa

let BSNullOptimization=objectThatDelegatesTo(OMeta,{
"setHelped":function(){var $elf=this,$vars={},$r0=this._createStructure("setHelped");$r0.value=(this["_didSomething"]=true);return $r0;},
"helped":function(){var $elf=this,$vars={},$r0=this._createStructure("helped");$r0.value=this._pred(this["_didSomething"]);return $r0;},
"trans":function(){var $elf=this,$vars={},$r0=this._createStructure("trans");this._appendStructure($r0,this._form(function(){var $r1=this._createStructure(null);$vars.t=this._appendStructure($r1,this.anything());this._pred((this[$vars.t] != undefined));$r1.value=($vars.ans=this._appendStructure($r1,this._apply($vars.t)));return $r1;}));$r0.value=$vars.ans;return $r0;},
"optimize":function(){var $elf=this,$vars={},$r0=this._createStructure("optimize");$vars.x=this._appendStructure($r0,this._apply("trans"));this._appendStructure($r0,this._apply("helped"));$r0.value=$vars.x;return $r0;},
"App":function(){var $elf=this,$vars={},$r0=this._createStructure("App");$vars.rule=this._appendStructure($r0,this.anything());$vars.args=this._appendStructure($r0,this._many(function(){return this.anything();}));$r0.value=["App",$vars.rule].concat($vars.args);return $r0;},
"Act":function(){var $elf=this,$vars={},$r0=this._createStructure("Act");$vars.expr=this._appendStructure($r0,this.anything());$r0.value=["Act",$vars.expr];return $r0;},
"Pred":function(){var $elf=this,$vars={},$r0=this._createStructure("Pred");$vars.expr=this._appendStructure($r0,this.anything());$r0.value=["Pred",$vars.expr];return $r0;},
"Or":function(){var $elf=this,$vars={},$r0=this._createStructure("Or");$vars.xs=this._appendStructure($r0,this._many(function(){return this._apply("trans");}));$r0.value=["Or"].concat($vars.xs);return $r0;},
"XOr":function(){var $elf=this,$vars={},$r0=this._createStructure("XOr");$vars.xs=this._appendStructure($r0,this._many(function(){return this._apply("trans");}));$r0.value=["XOr"].concat($vars.xs);return $r0;},
"And":function(){var $elf=this,$vars={},$r0=this._createStructure("And");$vars.xs=this._appendStructure($r0,this._many(function(){return this._apply("trans");}));$r0.value=["And"].concat($vars.xs);return $r0;},
"Opt":function(){var $elf=this,$vars={},$r0=this._createStructure("Opt");$vars.x=this._appendStructure($r0,this._apply("trans"));$r0.value=["Opt",$vars.x];return $r0;},
"Many":function(){var $elf=this,$vars={},$r0=this._createStructure("Many");$vars.x=this._appendStructure($r0,this._apply("trans"));$r0.value=["Many",$vars.x];return $r0;},
"Many1":function(){var $elf=this,$vars={},$r0=this._createStructure("Many1");$vars.x=this._appendStructure($r0,this._apply("trans"));$r0.value=["Many1",$vars.x];return $r0;},
"Set":function(){var $elf=this,$vars={},$r0=this._createStructure("Set");$vars.n=this._appendStructure($r0,this.anything());$vars.v=this._appendStructure($r0,this._apply("trans"));$r0.value=["Set",$vars.n,$vars.v];return $r0;},
"Not":function(){var $elf=this,$vars={},$r0=this._createStructure("Not");$vars.x=this._appendStructure($r0,this._apply("trans"));$r0.value=["Not",$vars.x];return $r0;},
"Lookahead":function(){var $elf=this,$vars={},$r0=this._createStructure("Lookahead");$vars.x=this._appendStructure($r0,this._apply("trans"));$r0.value=["Lookahead",$vars.x];return $r0;},
"Form":function(){var $elf=this,$vars={},$r0=this._createStructure("Form");$vars.x=this._appendStructure($r0,this._apply("trans"));$r0.value=["Form",$vars.x];return $r0;},
"ConsBy":function(){var $elf=this,$vars={},$r0=this._createStructure("ConsBy");$vars.x=this._appendStructure($r0,this._apply("trans"));$r0.value=["ConsBy",$vars.x];return $r0;},
"IdxConsBy":function(){var $elf=this,$vars={},$r0=this._createStructure("IdxConsBy");$vars.x=this._appendStructure($r0,this._apply("trans"));$r0.value=["IdxConsBy",$vars.x];return $r0;},
"JumpTable":function(){var $elf=this,$vars={},$r0=this._createStructure("JumpTable");$vars.ces=this._appendStructure($r0,this._many(function(){var $r1=this._createStructure(null);this._appendStructure($r1,this._form(function(){var $r2=this._createStructure(null);$vars.c=this._appendStructure($r2,this.anything());$r2.value=($vars.e=this._appendStructure($r2,this._apply("trans")));return $r2;}));$r1.value=[$vars.c,$vars.e];return $r1;}));$r0.value=["JumpTable"].concat($vars.ces);return $r0;},
"Interleave":function(){var $elf=this,$vars={},$r0=this._createStructure("Interleave");$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._createStructure(null);this._appendStructure($r1,this._form(function(){var $r2=this._createStructure(null);$vars.m=this._appendStructure($r2,this.anything());$r2.value=($vars.p=this._appendStructure($r2,this._apply("trans")));return $r2;}));$r1.value=[$vars.m,$vars.p];return $r1;}));$r0.value=["Interleave"].concat($vars.xs);return $r0;},
"Rule":function(){var $elf=this,$vars={},$r0=this._createStructure("Rule");$vars.name=this._appendStructure($r0,this.anything());$vars.body=this._appendStructure($r0,this._apply("trans"));$r0.value=["Rule",$vars.name,$vars.body];return $r0;}});(BSNullOptimization["initialize"]=(function (){(this["_didSomething"]=false);}));let BSAssociativeOptimization=objectThatDelegatesTo(BSNullOptimization,{
"And":function(){var $elf=this,$vars={},$r0=this._createStructure("And");$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._createStructure(null);$vars.x=this._appendStructure($r1,this._apply("trans"));this._appendStructure($r1,this.end());this._appendStructure($r1,this._apply("setHelped"));$r1.value=$vars.x;return $r1;},function(){var $r1=this._createStructure(null);$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside","And"));$r1.value=["And"].concat($vars.xs);return $r1;}));return $r0;},
"Or":function(){var $elf=this,$vars={},$r0=this._createStructure("Or");$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._createStructure(null);$vars.x=this._appendStructure($r1,this._apply("trans"));this._appendStructure($r1,this.end());this._appendStructure($r1,this._apply("setHelped"));$r1.value=$vars.x;return $r1;},function(){var $r1=this._createStructure(null);$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside","Or"));$r1.value=["Or"].concat($vars.xs);return $r1;}));return $r0;},
"XOr":function(){var $elf=this,$vars={},$r0=this._createStructure("XOr");$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._createStructure(null);$vars.x=this._appendStructure($r1,this._apply("trans"));this._appendStructure($r1,this.end());this._appendStructure($r1,this._apply("setHelped"));$r1.value=$vars.x;return $r1;},function(){var $r1=this._createStructure(null);$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside","XOr"));$r1.value=["XOr"].concat($vars.xs);return $r1;}));return $r0;},
"transInside":function(){var $elf=this,$vars={},$r0=this._createStructure("transInside");$vars.t=this._appendStructure($r0,this.anything());$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._createStructure(null);this._appendStructure($r1,this._form(function(){var $r2=this._createStructure(null);this._appendStructure($r2,this.exactly($vars.t));$r2.value=($vars.xs=this._appendStructure($r2,this._applyWithArgs("transInside",$vars.t)));return $r2;}));$vars.ys=this._appendStructure($r1,this._applyWithArgs("transInside",$vars.t));this._appendStructure($r1,this._apply("setHelped"));$r1.value=$vars.xs.concat($vars.ys);return $r1;},function(){var $r1=this._createStructure(null);$vars.x=this._appendStructure($r1,this._apply("trans"));$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside",$vars.t));$r1.value=[$vars.x].concat($vars.xs);return $r1;},function(){var $r1=this._createStructure(null);$r1.value=[];return $r1;}));return $r0;}});let BSSeqInliner=objectThatDelegatesTo(BSNullOptimization,{
"App":function(){var $elf=this,$vars={},$r0=this._createStructure("App");$r0.value=this._appendStructure($r0,this._or(function(){return (function(){var $r2=this._createStructure(null);switch(this._appendStructure($r2,this._apply('anything'))){case "seq":$vars.s=this._appendStructure($r2,this.anything());this._appendStructure($r2,this.end());$vars.cs=this._appendStructure($r2,this._applyWithArgs("seqString",$vars.s));this._appendStructure($r2,this._apply("setHelped"));$r2.value=["And"].concat($vars.cs).concat([["Act",$vars.s]]);break;default: throw fail}return $r2;}).call(this);},function(){var $r1=this._createStructure(null);$vars.rule=this._appendStructure($r1,this.anything());$vars.args=this._appendStructure($r1,this._many(function(){return this.anything();}));$r1.value=["App",$vars.rule].concat($vars.args);return $r1;}));return $r0;},
"inlineChar":function(){var $elf=this,$vars={},$r0=this._createStructure("inlineChar");$vars.c=this._appendStructure($r0,this._applyWithArgs("foreign",BSOMetaParser,'eChar'));this._appendStructure($r0,this._not(function(){return this.end();}));$r0.value=["App","exactly",$vars.c.toProgramString()];return $r0;},
"seqString":function(){var $elf=this,$vars={},$r0=this._createStructure("seqString");this._appendStructure($r0,this._lookahead(function(){var $r1=this._createStructure(null);$vars.s=this._appendStructure($r1,this.anything());$r1.value=this._pred(((typeof $vars.s) === "string"));return $r1;}));$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._createStructure(null);this._appendStructure($r1,this._form(function(){var $r2=this._createStructure(null);this._appendStructure($r2,this.exactly("\""));$vars.cs=this._appendStructure($r2,this._many(function(){return this._apply("inlineChar");}));$r2.value=this._appendStructure($r2,this.exactly("\""));return $r2;}));$r1.value=$vars.cs;return $r1;},function(){var $r1=this._createStructure(null);this._appendStructure($r1,this._form(function(){var $r2=this._createStructure(null);this._appendStructure($r2,this.exactly("\'"));$vars.cs=this._appendStructure($r2,this._many(function(){return this._apply("inlineChar");}));$r2.value=this._appendStructure($r2,this.exactly("\'"));return $r2;}));$r1.value=$vars.cs;return $r1;}));return $r0;}});let JumpTable=(function (choiceOp,choice){(this["choiceOp"]=choiceOp);(this["choices"]=({}));this.add(choice);});(JumpTable["prototype"]["add"]=(function (choice){var c=choice[(0)],t=choice[(1)];if(this["choices"][c]){if((this["choices"][c][(0)] == this["choiceOp"])){this["choices"][c].push(t);}else{(this["choices"][c]=[this["choiceOp"],this["choices"][c],t]);};}else{(this["choices"][c]=t);};}));(JumpTable["prototype"]["toTree"]=(function (){var r=["JumpTable"],choiceKeys=ownPropertyNames(this["choices"]);for(var i=(0);(i < choiceKeys["length"]);(i+=(1))){r.push([choiceKeys[i],this["choices"][choiceKeys[i]]]);}return r;}));let BSJumpTableOptimization=objectThatDelegatesTo(BSNullOptimization,{
"Or":function(){var $elf=this,$vars={},$r0=this._createStructure("Or");$vars.cs=this._appendStructure($r0,this._many(function(){return this._or(function(){return this._applyWithArgs("jtChoices","Or");},function(){return this._apply("trans");});}));$r0.value=["Or"].concat($vars.cs);return $r0;},
"XOr":function(){var $elf=this,$vars={},$r0=this._createStructure("XOr");$vars.cs=this._appendStructure($r0,this._many(function(){return this._or(function(){return this._applyWithArgs("jtChoices","XOr");},function(){return this._apply("trans");});}));$r0.value=["XOr"].concat($vars.cs);return $r0;},
"quotedString":function(){var $elf=this,$vars={},$r0=this._createStructure("quotedString");this._appendStructure($r0,this._lookahead(function(){return this._applyWithArgs("foreign",BaseStrParser,'string');}));this._appendStructure($r0,this._form(function(){return (function(){var $r2=this._createStructure(null);switch(this._appendStructure($r2,this._apply('anything'))){case "\"":$vars.cs=this._appendStructure($r2,this._many(function(){var $r3=this._createStructure(null);$vars.c=this._appendStructure($r3,this._applyWithArgs("foreign",BSOMetaParser,'eChar'));this._appendStructure($r3,this._not(function(){return this.end();}));$r3.value=$vars.c;return $r3;}));$r2.value=this._appendStructure($r2,this.exactly("\""));break;case "\'":$vars.cs=this._appendStructure($r2,this._many(function(){var $r3=this._createStructure(null);$vars.c=this._appendStructure($r3,this._applyWithArgs("foreign",BSOMetaParser,'eChar'));this._appendStructure($r3,this._not(function(){return this.end();}));$r3.value=$vars.c;return $r3;}));$r2.value=this._appendStructure($r2,this.exactly("\'"));break;default: throw fail}return $r2;}).call(this);}));$r0.value=$vars.cs.join("");return $r0;},
"jtChoice":function(){var $elf=this,$vars={},$r0=this._createStructure("jtChoice");$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._createStructure(null);this._appendStructure($r1,this._form(function(){var $r2=this._createStructure(null);this._appendStructure($r2,this.exactly("And"));this._appendStructure($r2,this._form(function(){var $r3=this._createStructure(null);this._appendStructure($r3,this.exactly("App"));this._appendStructure($r3,this.exactly("exactly"));$r3.value=($vars.x=this._appendStructure($r3,this._apply("quotedString")));return $r3;}));$r2.value=($vars.rest=this._appendStructure($r2,this._many(function(){return this.anything();})));return $r2;}));$r1.value=[$vars.x,["And"].concat($vars.rest)];return $r1;},function(){var $r1=this._createStructure(null);this._appendStructure($r1,this._form(function(){var $r2=this._createStructure(null);this._appendStructure($r2,this.exactly("App"));this._appendStructure($r2,this.exactly("exactly"));$r2.value=($vars.x=this._appendStructure($r2,this._apply("quotedString")));return $r2;}));$r1.value=[$vars.x,["Act",$vars.x.toProgramString()]];return $r1;}));return $r0;},
"jtChoices":function(){var $elf=this,$vars={},$r0=this._createStructure("jtChoices");$vars.op=this._appendStructure($r0,this.anything());$vars.c=this._appendStructure($r0,this._apply("jtChoice"));$vars.jt=new JumpTable($vars.op,$vars.c);this._appendStructure($r0,this._many(function(){var $r1=this._createStructure(null);$vars.c=this._appendStructure($r1,this._apply("jtChoice"));$r1.value=$vars.jt.add($vars.c);return $r1;}));this._appendStructure($r0,this._apply("setHelped"));$r0.value=$vars.jt.toTree();return $r0;}});let BSFunctionOptimization=objectThatDelegatesTo(GenericMatcher,{
"optimize":function(){var $elf=this,$vars={},$r0=this._createStructure("optimize");$vars.x=this._appendStructure($r0,this._apply("trans"));$r0.value=$vars.x;return $r0;},
"trans":function(){var $elf=this,$vars={},$r0=this._createStructure("trans");this._appendStructure($r0,this._form(function(){var $r1=this._createStructure(null);$vars.t=this._appendStructure($r1,this.anything());this._pred((this[$vars.t] != undefined));$r1.value=($vars.ans=this._appendStructure($r1,this._apply($vars.t)));return $r1;}));$r0.value=$vars.ans;return $r0;},
"somethingThatReturns":function(){var $elf=this,$vars={},$r0=this._createStructure("somethingThatReturns");$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._createStructure(null);this._appendStructure($r1,this._form(function(){var $r2=this._createStructure(null);this._appendStructure($r2,this.exactly("And"));$r2.value=($vars.ans=this._appendStructure($r2,this._apply("AndReturn")));return $r2;}));$r1.value=$vars.ans;return $r1;},function(){var $r1=this._createStructure(null);this._appendStructure($r1,this._form(function(){var $r2=this._createStructure(null);this._appendStructure($r2,this.exactly("And"));$r2.value=this._appendStructure($r2,this.end());return $r2;}));$r1.value=["ReturnStructure",["And"]];return $r1;},function(){var $r1=this._createStructure(null);this._appendStructure($r1,this._form(function(){var $r2=this._createStructure(null);$vars.t=this._appendStructure($r2,this._apply("generatesStructure"));$r2.value=($vars.ans=this._appendStructure($r2,this._apply($vars.t)));return $r2;}));$r1.value=["ReturnStructure",["Store",$vars.ans]];return $r1;},function(){var $r1=this._createStructure(null);this._appendStructure($r1,this._form(function(){var $r2=this._createStructure(null);this._appendStructure($r2,this.exactly("Set"));$r2.value=($vars.ans=this._appendStructure($r2,this._apply("Set")));return $r2;}));$r1.value=["ReturnStructure",["Parenthesis",$vars.ans]];return $r1;},function(){var $r1=this._createStructure(null);$vars.x=this._appendStructure($r1,this._apply("trans"));$r1.value=["ReturnStructure",$vars.x];return $r1;}));return $r0;},
"generatesStructure":function(){var $elf=this,$vars={},$r0=this._createStructure("generatesStructure");$r0.value=this._appendStructure($r0,(function(){var $r1=this._createStructure(null);switch(this._appendStructure($r1,this._apply('anything'))){case "Or":$r1.value="Or";break;case "XOr":$r1.value="XOr";break;case "Opt":$r1.value="Opt";break;case "Many":$r1.value="Many";break;case "Many1":$r1.value="Many1";break;case "Not":$r1.value="Not";break;case "Lookahead":$r1.value="Lookahead";break;case "Form":$r1.value="Form";break;case "ConsBy":$r1.value="ConsBy";break;case "IdxConsBy":$r1.value="IdxConsBy";break;case "App":$r1.value="App";break;case "JumpTable":$r1.value="JumpTable";break;case "Interleave":$r1.value="Interleave";break;default: throw fail}return $r1;}).call(this));return $r0;},
"somethingThatCanPass":function(){var $elf=this,$vars={},$r0=this._createStructure("somethingThatCanPass");this._appendStructure($r0,this._form(function(){var $r1=this._createStructure(null);$vars.t=this._appendStructure($r1,this._apply("generatesStructure"));$r1.value=($vars.ans=this._appendStructure($r1,this._apply($vars.t)));return $r1;}));$r0.value=$vars.ans;return $r0;},
"storeSomething":function(){var $elf=this,$vars={},$r0=this._createStructure("storeSomething");$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._createStructure(null);this._appendStructure($r1,this._form(function(){var $r2=this._createStructure(null);$vars.t=this._appendStructure($r2,this._apply("generatesStructure"));$r2.value=($vars.ans=this._appendStructure($r2,this._apply($vars.t)));return $r2;}));$r1.value=["Store",$vars.ans];return $r1;},function(){var $r1=this._createStructure(null);$r1.value=($vars.x=this._appendStructure($r1,this._apply("trans")));return $r1;}));return $r0;},
"storeSomethingThatReturns":function(){var $elf=this,$vars={},$r0=this._createStructure("storeSomethingThatReturns");$r0.value=($vars.x=this._appendStructure($r0,this._apply("somethingThatReturns")));return $r0;},
"functioned":function(){var $elf=this,$vars={},$r0=this._createStructure("functioned");$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._createStructure(null);$vars.x=this._appendStructure($r1,this._apply("somethingThatCanPass"));$r1.value=["Function",["Return",$vars.x]];return $r1;},function(){var $r1=this._createStructure(null);$vars.x=this._appendStructure($r1,this._apply("storeSomethingThatReturns"));$r1.value=["FunctionStructure",$vars.x];return $r1;}));return $r0;},
"AndReturn":function(){var $elf=this,$vars={},$r0=this._createStructure("AndReturn");$vars.xs=this._appendStructure($r0,this._many(function(){return this._applyWithArgs("notLast","storeSomething");}));$vars.y=this._appendStructure($r0,this._apply("storeSomethingThatReturns"));$r0.value=["And"].concat($vars.xs.concat([$vars.y]));return $r0;},
"Or":function(){var $elf=this,$vars={},$r0=this._createStructure("Or");$vars.xs=this._appendStructure($r0,this._many(function(){return this._apply("functioned");}));$r0.value=["Or"].concat($vars.xs);return $r0;},
"XOr":function(){var $elf=this,$vars={},$r0=this._createStructure("XOr");$vars.xs=this._appendStructure($r0,this._many(function(){return this._apply("functioned");}));$r0.value=["XOr"].concat($vars.xs);return $r0;},
"Opt":function(){var $elf=this,$vars={},$r0=this._createStructure("Opt");$vars.x=this._appendStructure($r0,this._apply("functioned"));$r0.value=["Opt",$vars.x];return $r0;},
"Many":function(){var $elf=this,$vars={},$r0=this._createStructure("Many");$vars.x=this._appendStructure($r0,this._apply("functioned"));$r0.value=["Many",$vars.x];return $r0;},
"Many1":function(){var $elf=this,$vars={},$r0=this._createStructure("Many1");$vars.x=this._appendStructure($r0,this._apply("functioned"));$r0.value=["Many1",$vars.x];return $r0;},
"Not":function(){var $elf=this,$vars={},$r0=this._createStructure("Not");$vars.x=this._appendStructure($r0,this._apply("functioned"));$r0.value=["Not",$vars.x];return $r0;},
"Lookahead":function(){var $elf=this,$vars={},$r0=this._createStructure("Lookahead");$vars.x=this._appendStructure($r0,this._apply("functioned"));$r0.value=["Lookahead",$vars.x];return $r0;},
"Form":function(){var $elf=this,$vars={},$r0=this._createStructure("Form");$vars.x=this._appendStructure($r0,this._apply("functioned"));$r0.value=["Form",$vars.x];return $r0;},
"ConsBy":function(){var $elf=this,$vars={},$r0=this._createStructure("ConsBy");$vars.x=this._appendStructure($r0,this._apply("functioned"));$r0.value=["ConsBy",$vars.x];return $r0;},
"IdxConsBy":function(){var $elf=this,$vars={},$r0=this._createStructure("IdxConsBy");$vars.x=this._appendStructure($r0,this._apply("functioned"));$r0.value=["IdxConsBy",$vars.x];return $r0;},
"App":function(){var $elf=this,$vars={},$r0=this._createStructure("App");$vars.rule=this._appendStructure($r0,this.anything());$vars.args=this._appendStructure($r0,this._many(function(){return this.anything();}));$r0.value=["App",$vars.rule].concat($vars.args);return $r0;},
"JumpTable":function(){var $elf=this,$vars={},$r0=this._createStructure("JumpTable");$vars.ces=this._appendStructure($r0,this._many(function(){var $r1=this._createStructure(null);this._appendStructure($r1,this._form(function(){var $r2=this._createStructure(null);$vars.c=this._appendStructure($r2,this.anything());$r2.value=($vars.e=this._appendStructure($r2,this._apply("somethingThatReturns")));return $r2;}));$r1.value=[$vars.c,$vars.e];return $r1;}));$r0.value=["JumpTable"].concat($vars.ces);return $r0;},
"Interleave":function(){var $elf=this,$vars={},$r0=this._createStructure("Interleave");$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._createStructure(null);this._appendStructure($r1,this._form(function(){var $r2=this._createStructure(null);$vars.m=this._appendStructure($r2,this.anything());$r2.value=($vars.p=this._appendStructure($r2,this._apply("functioned")));return $r2;}));$r1.value=[$vars.m,$vars.p];return $r1;}));$r0.value=["Interleave"].concat($vars.xs);return $r0;},
"Act":function(){var $elf=this,$vars={},$r0=this._createStructure("Act");$vars.expr=this._appendStructure($r0,this.anything());$r0.value=["Act",$vars.expr];return $r0;},
"Pred":function(){var $elf=this,$vars={},$r0=this._createStructure("Pred");$vars.expr=this._appendStructure($r0,this.anything());$r0.value=["Pred",$vars.expr];return $r0;},
"Set":function(){var $elf=this,$vars={},$r0=this._createStructure("Set");$vars.n=this._appendStructure($r0,this.anything());$vars.v=this._appendStructure($r0,this._apply("storeSomething"));$r0.value=["Set",$vars.n,$vars.v];return $r0;},
"Rule":function(){var $elf=this,$vars={},$r0=this._createStructure("Rule");$vars.name=this._appendStructure($r0,this.anything());$vars.body=this._appendStructure($r0,this._or(function(){var $r1=this._createStructure(null);$vars.b=this._appendStructure($r1,this._apply("somethingThatCanPass"));$r1.value=["ReturnStructure",["Store",$vars.b]];return $r1;},function(){return this._apply("somethingThatReturns");}));$r0.value=["Rule",$vars.name,$vars.body];return $r0;}});let BSOMetaOptimizer=objectThatDelegatesTo(OMeta,{
"optimizeGrammar":function(){var $elf=this,$vars={},$r0=this._createStructure("optimizeGrammar");this._appendStructure($r0,this._form(function(){var $r1=this._createStructure(null);this._appendStructure($r1,this.exactly("Grammar"));$vars.sn=this._appendStructure($r1,this.anything());$r1.value=($vars.rs=this._appendStructure($r1,this._many(function(){return this._apply("optimizeRule");})));return $r1;}));$r0.value=["Grammar",$vars.sn].concat($vars.rs);return $r0;},
"optimizeRule":function(){var $elf=this,$vars={},$r0=this._createStructure("optimizeRule");$vars.r=this._appendStructure($r0,this.anything());this._appendStructure($r0,this._or(function(){var $r1=this._createStructure(null);$r1.value=($vars.r=this._appendStructure($r1,this._applyWithArgs("foreign",BSSeqInliner,'optimize',$vars.r)));return $r1;},function(){return this._apply("empty");}));this._appendStructure($r0,this._many(function(){return this._or(function(){var $r2=this._createStructure(null);$r2.value=($vars.r=this._appendStructure($r2,this._applyWithArgs("foreign",BSAssociativeOptimization,'optimize',$vars.r)));return $r2;},function(){var $r2=this._createStructure(null);$r2.value=($vars.r=this._appendStructure($r2,this._applyWithArgs("foreign",BSJumpTableOptimization,'optimize',$vars.r)));return $r2;});}));$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSFunctionOptimization,'optimize',$vars.r));$r0.value=$vars.r;return $r0;}})

// This file was generated using Gnometa
// https://github.com/djdeath/gnometa
let mergeLocation=(function (loc1,loc2){return ({"start": Math.min(loc1["start"],loc2["start"]),"stop": Math.max(loc1["stop"],loc2["stop"])});});let BSNullOptimization=objectThatDelegatesTo(OMeta,{
"setHelped":function(){var $elf=this,$vars={},$r0=this._startStructure(1, true);$r0.value=(this["_didSomething"]=true);return this._endStructure($r0);},
"helped":function(){var $elf=this,$vars={},$r0=this._startStructure(3, true);$r0.value=this._pred(this["_didSomething"]);return this._endStructure($r0);},
"pushLocation":function(){var $elf=this,$vars={},$r0=this._startStructure(6, true);$vars.loc=this._getStructureValue(this.anything());$r0.value=this["_locations"].push($vars.loc);return this._endStructure($r0);},
"popLocation":function(){var $elf=this,$vars={},$r0=this._startStructure(10, true);$r0.value=this["_locations"].pop();return this._endStructure($r0);},
"trans":function(){var $elf=this,$vars={},$r0=this._startStructure(12, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(16);$vars.loc=this._getStructureValue(this.anything());$vars.t=this._getStructureValue(this.anything());this._pred((this[$vars.t] != undefined));this._appendStructure($r1,this._applyWithArgs("pushLocation",$vars.loc),22);$vars.ans=this._appendStructure($r1,this._apply($vars.t),26);$r1.value=this._appendStructure($r1,this._apply("popLocation"),29);return this._endStructure($r1);}),14);$r0.value=[$vars.loc].concat($vars.ans);return this._endStructure($r0);},
"optimize":function(){var $elf=this,$vars={},$r0=this._startStructure(32, true);$vars.x=this._appendStructure($r0,this._apply("trans"),35);this._appendStructure($r0,this._apply("helped"),37);$r0.value=$vars.x;return this._endStructure($r0);},
"App":function(){var $elf=this,$vars={},$r0=this._startStructure(40, true);$vars.rule=this._getStructureValue(this.anything());$vars.args=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this.anything(),46);}),44);$r0.value=["App",$vars.rule].concat($vars.args);return this._endStructure($r0);},
"Pred":function(){var $elf=this,$vars={},$r0=this._startStructure(49, true);$vars.expr=this._getStructureValue(this.anything());$r0.value=["Pred",$vars.expr];return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(53, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("trans"),58);}),56);$r0.value=["Or"].concat($vars.xs);return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(61, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("trans"),66);}),64);$r0.value=["XOr"].concat($vars.xs);return this._endStructure($r0);},
"And":function(){var $elf=this,$vars={},$r0=this._startStructure(69, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("trans"),74);}),72);$r0.value=["And"].concat($vars.xs);return this._endStructure($r0);},
"Opt":function(){var $elf=this,$vars={},$r0=this._startStructure(77, true);$vars.x=this._appendStructure($r0,this._apply("trans"),80);$r0.value=["Opt",$vars.x];return this._endStructure($r0);},
"Many":function(){var $elf=this,$vars={},$r0=this._startStructure(83, true);$vars.x=this._appendStructure($r0,this._apply("trans"),86);$r0.value=["Many",$vars.x];return this._endStructure($r0);},
"Many1":function(){var $elf=this,$vars={},$r0=this._startStructure(89, true);$vars.x=this._appendStructure($r0,this._apply("trans"),92);$r0.value=["Many1",$vars.x];return this._endStructure($r0);},
"Set":function(){var $elf=this,$vars={},$r0=this._startStructure(95, true);$vars.n=this._getStructureValue(this.anything());$vars.v=this._appendStructure($r0,this._apply("trans"),99);$r0.value=["Set",$vars.n,$vars.v];return this._endStructure($r0);},
"Not":function(){var $elf=this,$vars={},$r0=this._startStructure(102, true);$vars.x=this._appendStructure($r0,this._apply("trans"),105);$r0.value=["Not",$vars.x];return this._endStructure($r0);},
"Lookahead":function(){var $elf=this,$vars={},$r0=this._startStructure(108, true);$vars.x=this._appendStructure($r0,this._apply("trans"),111);$r0.value=["Lookahead",$vars.x];return this._endStructure($r0);},
"Form":function(){var $elf=this,$vars={},$r0=this._startStructure(114, true);$vars.x=this._appendStructure($r0,this._apply("trans"),117);$r0.value=["Form",$vars.x];return this._endStructure($r0);},
"ConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(120, true);$vars.x=this._appendStructure($r0,this._apply("trans"),123);$r0.value=["ConsBy",$vars.x];return this._endStructure($r0);},
"IdxConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(126, true);$vars.x=this._appendStructure($r0,this._apply("trans"),129);$r0.value=["IdxConsBy",$vars.x];return this._endStructure($r0);},
"JumpTable":function(){var $elf=this,$vars={},$r0=this._startStructure(132, true);$vars.ces=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(137);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(141);$vars.c=this._getStructureValue(this.anything());$r2.value=($vars.e=this._appendStructure($r2,this._apply("trans"),146));return this._endStructure($r2);}),139);$r1.value=[$vars.c,$vars.e];return this._endStructure($r1);}),135);$r0.value=["JumpTable"].concat($vars.ces);return this._endStructure($r0);},
"Interleave":function(){var $elf=this,$vars={},$r0=this._startStructure(150, true);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(155);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(159);$vars.m=this._getStructureValue(this.anything());$r2.value=($vars.p=this._appendStructure($r2,this._apply("trans"),164));return this._endStructure($r2);}),157);$r1.value=[$vars.m,$vars.p];return this._endStructure($r1);}),153);$r0.value=["Interleave"].concat($vars.xs);return this._endStructure($r0);},
"Js":function(){var $elf=this,$vars={},$r0=this._startStructure(168, true);$vars.locals=this._getStructureValue(this.anything());$vars.code=this._getStructureValue(this.anything());$r0.value=["Js",$vars.locals,$vars.code];return this._endStructure($r0);},
"Location":function(){var $elf=this,$vars={},$r0=this._startStructure(173, true);$r0.value=["Location"];return this._endStructure($r0);},
"PopArg":function(){var $elf=this,$vars={},$r0=this._startStructure(175, true);$r0.value=["PopArg"];return this._endStructure($r0);},
"Rule":function(){var $elf=this,$vars={},$r0=this._startStructure(177, true);$vars.name=this._getStructureValue(this.anything());$vars.body=this._appendStructure($r0,this._apply("trans"),181);$r0.value=["Rule",$vars.name,$vars.body];return this._endStructure($r0);}});(BSNullOptimization["initialize"]=(function (){(this["_didSomething"]=false);(this["_locations"]=[]);}));(BSNullOptimization["location"]=(function (){return this["_locations"][(this["_locations"]["length"] - (1))];}));let BSAssociativeOptimization=objectThatDelegatesTo(BSNullOptimization,{
"And":function(){var $elf=this,$vars={},$r0=this._startStructure(185, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(188);$vars.x=this._appendStructure($r1,this._apply("trans"),191);this._appendStructure($r1,this.end(),193);this._appendStructure($r1,this._apply("setHelped"),195);$r1.value=$vars.x.slice((1));return this._endStructure($r1);},function(){var $r1=this._startStructure(198);$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside","And"),201);$r1.value=["And"].concat($vars.xs);return this._endStructure($r1);}),186);return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(205, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(208);$vars.x=this._appendStructure($r1,this._apply("trans"),211);this._appendStructure($r1,this.end(),213);this._appendStructure($r1,this._apply("setHelped"),215);$r1.value=$vars.x.slice((1));return this._endStructure($r1);},function(){var $r1=this._startStructure(218);$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside","Or"),221);$r1.value=["Or"].concat($vars.xs);return this._endStructure($r1);}),206);return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(225, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(228);$vars.x=this._appendStructure($r1,this._apply("trans"),231);this._appendStructure($r1,this.end(),233);this._appendStructure($r1,this._apply("setHelped"),235);$r1.value=$vars.x.slice((1));return this._endStructure($r1);},function(){var $r1=this._startStructure(238);$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside","XOr"),241);$r1.value=["XOr"].concat($vars.xs);return this._endStructure($r1);}),226);return this._endStructure($r0);},
"transInside":function(){var $elf=this,$vars={},$r0=this._startStructure(245, true);$vars.t=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(250);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(254);$vars.l=this._getStructureValue(this.anything());this._appendStructure($r2,this.exactly($vars.t),257);$r2.value=($vars.xs=this._appendStructure($r2,this._applyWithArgs("transInside",$vars.t),262));return this._endStructure($r2);}),252);$vars.ys=this._appendStructure($r1,this._applyWithArgs("transInside",$vars.t),266);this._appendStructure($r1,this._apply("setHelped"),269);$r1.value=$vars.xs.concat($vars.ys);return this._endStructure($r1);},function(){var $r1=this._startStructure(272);$vars.x=this._appendStructure($r1,this._apply("trans"),275);$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside",$vars.t),278);$r1.value=[$vars.x].concat($vars.xs);return this._endStructure($r1);},function(){var $r1=this._startStructure(249);$r1.value=[];return this._endStructure($r1);}),248);return this._endStructure($r0);}});let BSSeqInliner=objectThatDelegatesTo(BSNullOptimization,{
"App":function(){var $elf=this,$vars={},$r0=this._startStructure(284, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(287);this._appendStructure($r1,this.exactly("seq"),289);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(293);$vars.l=this._getStructureValue(this.anything());this._appendStructure($r2,this.exactly("Js"),296);$vars.locals=this._getStructureValue(this.anything());$r2.value=this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(301);this._appendStructure($r3,this.exactly("string"),303);$r3.value=($vars.s=this._getStructureValue(this.anything()));return this._endStructure($r3);}),299);return this._endStructure($r2);}),291);this._appendStructure($r1,this.end(),307);$vars.cs=this._appendStructure($r1,this._applyWithArgs("seqString",$vars.s),310);this._appendStructure($r1,this._apply("setHelped"),313);$r1.value=["And"].concat($vars.cs).concat([jsValue("string",$vars.s)]);return this._endStructure($r1);},function(){var $r1=this._startStructure(316);$vars.rule=this._getStructureValue(this.anything());$vars.args=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this.anything(),322);}),320);$r1.value=["App",$vars.rule].concat($vars.args);return this._endStructure($r1);}),285);return this._endStructure($r0);},
"inlineChar":function(){var $elf=this,$vars={},$r0=this._startStructure(325, true);$vars.c=this._appendStructure($r0,this._applyWithArgs("foreign",BSOMetaParser,"eChar"),328);$r0.value=[null,"App","exactly",jsValue("string",$vars.c)];return this._endStructure($r0);},
"seqString":function(){var $elf=this,$vars={},$r0=this._startStructure(332, true);this._appendStructure($r0,this._lookahead(function(){var $r1=this._startStructure(336);$vars.s=this._getStructureValue(this.anything());$r1.value=this._pred(((typeof $vars.s) === "string"));return this._endStructure($r1);}),334);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(342);$r1.value=($vars.cs=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("inlineChar"),347);}),345));return this._endStructure($r1);}),341);$r0.value=$vars.cs;return this._endStructure($r0);}});let JumpTable=(function (choiceOp,choice){(this["choiceOp"]=choiceOp);(this["choices"]=({}));this.add(choice);});(JumpTable["prototype"]["add"]=(function (choice){var c=choice[(0)],t=choice[(1)];if(this["choices"][c]){if((this["choices"][c][(0)] == this["choiceOp"])){this["choices"][c].push(t);}else{(this["choices"][c]=[this["choiceOp"],this["choices"][c],t]);};}else{(this["choices"][c]=t);};}));(JumpTable["prototype"]["toTree"]=(function (){var r=["JumpTable"],choiceKeys=ownPropertyNames(this["choices"]);for(var i=(0);(i < choiceKeys["length"]);(i+=(1))){r.push([choiceKeys[i],this["choices"][choiceKeys[i]]]);}return r;}));let BSJumpTableOptimization=objectThatDelegatesTo(BSNullOptimization,{
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(351, true);$vars.cs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._or(function(){return this._forwardStructure(this._applyWithArgs("jtChoices","Or"),358);},function(){return this._forwardStructure(this._apply("trans"),361);}),356);}),354);$r0.value=["Or"].concat($vars.cs);return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(364, true);$vars.cs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._or(function(){return this._forwardStructure(this._applyWithArgs("jtChoices","XOr"),371);},function(){return this._forwardStructure(this._apply("trans"),374);}),369);}),367);$r0.value=["XOr"].concat($vars.cs);return this._endStructure($r0);},
"quotedString":function(){var $elf=this,$vars={},$r0=this._startStructure(377, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(381);$vars.l=this._getStructureValue(this.anything());this._appendStructure($r1,this.exactly("Js"),384);$r1.value=this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(388);this._appendStructure($r2,this.exactly("string"),390);$r2.value=($vars.s=this._getStructureValue(this.anything()));return this._endStructure($r2);}),386);return this._endStructure($r1);}),379);$r0.value=$vars.s;return this._endStructure($r0);},
"jtChoice":function(){var $elf=this,$vars={},$r0=this._startStructure(395, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(398);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(402);$vars.l=this._getStructureValue(this.anything());this._appendStructure($r2,this.exactly("And"),405);this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(409);$vars.l1=this._getStructureValue(this.anything());this._appendStructure($r3,this.exactly("App"),412);this._appendStructure($r3,this.exactly("exactly"),414);$r3.value=($vars.x=this._appendStructure($r3,this._apply("quotedString"),418));return this._endStructure($r3);}),407);$r2.value=($vars.rest=this._appendStructure($r2,this._many(function(){return this._forwardStructure(this.anything(),424);}),422));return this._endStructure($r2);}),400);$r1.value=[$vars.x,[$vars.l,"And"].concat($vars.rest)];return this._endStructure($r1);},function(){var $r1=this._startStructure(427);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(431);$vars.l1=this._getStructureValue(this.anything());this._appendStructure($r2,this.exactly("App"),434);this._appendStructure($r2,this.exactly("exactly"),436);$r2.value=($vars.x=this._appendStructure($r2,this._apply("quotedString"),440));return this._endStructure($r2);}),429);$r1.value=[$vars.x,jsValue("string",$vars.x)];return this._endStructure($r1);}),396);return this._endStructure($r0);},
"jtChoices":function(){var $elf=this,$vars={},$r0=this._startStructure(443, true);$vars.op=this._getStructureValue(this.anything());$vars.c=this._appendStructure($r0,this._apply("jtChoice"),447);$vars.jt=new JumpTable($vars.op,$vars.c);this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(453);$vars.c=this._appendStructure($r1,this._apply("jtChoice"),456);$r1.value=$vars.jt.add($vars.c);return this._endStructure($r1);}),451);this._appendStructure($r0,this._apply("setHelped"),459);$r0.value=$vars.jt.toTree();return this._endStructure($r0);}});let BSFunctionOptimization=objectThatDelegatesTo(GenericMatcher,{
"optimize":function(){var $elf=this,$vars={},$r0=this._startStructure(463, true);$vars.x=this._appendStructure($r0,this._apply("trans"),466);$r0.value=$vars.x;return this._endStructure($r0);},
"pushLocation":function(){var $elf=this,$vars={},$r0=this._startStructure(469, true);$vars.loc=this._getStructureValue(this.anything());$r0.value=this["_locations"].push($vars.loc);return this._endStructure($r0);},
"popLocation":function(){var $elf=this,$vars={},$r0=this._startStructure(473, true);$r0.value=this["_locations"].pop();return this._endStructure($r0);},
"trans":function(){var $elf=this,$vars={},$r0=this._startStructure(475, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(479);$vars.loc=this._getStructureValue(this.anything());$vars.t=this._getStructureValue(this.anything());this._pred((this[$vars.t] != undefined));this._appendStructure($r1,this._applyWithArgs("pushLocation",$vars.loc),485);$vars.ans=this._appendStructure($r1,this._apply($vars.t),489);$r1.value=this._appendStructure($r1,this._apply("popLocation"),492);return this._endStructure($r1);}),477);$r0.value=[$vars.loc].concat($vars.ans);return this._endStructure($r0);},
"andReturn":function(){var $elf=this,$vars={},$r0=this._startStructure(495, true);$vars.l=this._getStructureValue(this.anything());$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._applyWithArgs("notLast","storeSomething"),501);}),499);$vars.y=this._appendStructure($r0,this._apply("storeSomethingThatReturns"),505);$r0.value=[$vars.l,"And"].concat($vars.xs.concat([$vars.y]));return this._endStructure($r0);},
"somethingThatReturns":function(){var $elf=this,$vars={},$r0=this._startStructure(508, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(511);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(515);$vars.l=this._getStructureValue(this.anything());this._appendStructure($r2,this.exactly("And"),518);$r2.value=($vars.ans=this._appendStructure($r2,this._applyWithArgs("andReturn",$vars.l),523));return this._endStructure($r2);}),513);$r1.value=$vars.ans;return this._endStructure($r1);},function(){var $r1=this._startStructure(527);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(531);$vars.l=this._getStructureValue(this.anything());this._appendStructure($r2,this.exactly("And"),534);$r2.value=this._appendStructure($r2,this.end(),537);return this._endStructure($r2);}),529);$r1.value=[null,"ReturnStructure",[$vars.l,"And"]];return this._endStructure($r1);},function(){var $r1=this._startStructure(540);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(544);$vars.l=this._getStructureValue(this.anything());$vars.t=this._appendStructure($r2,this._apply("generatesStructure"),548);$r2.value=($vars.ans=this._appendStructure($r2,this._apply($vars.t),552));return this._endStructure($r2);}),542);$r1.value=[null,"ReturnStructure",[$vars.l,"Store",[$vars.l].concat($vars.ans)]];return this._endStructure($r1);},function(){var $r1=this._startStructure(556);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(560);$vars.l=this._getStructureValue(this.anything());this._appendStructure($r2,this.exactly("Set"),563);$r2.value=($vars.ans=this._appendStructure($r2,this._apply("Set"),568));return this._endStructure($r2);}),558);$r1.value=[null,"ReturnStructure",[$vars.l,"Parenthesis",[$vars.l].concat($vars.ans)]];return this._endStructure($r1);},function(){var $r1=this._startStructure(572);$vars.x=this._appendStructure($r1,this._apply("trans"),575);$r1.value=[null,"ReturnStructure",$vars.x];return this._endStructure($r1);}),509);return this._endStructure($r0);},
"generatesStructure":function(){var $elf=this,$vars={},$r0=this._startStructure(578, true);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this.exactly("Or"),581);},function(){return this._forwardStructure(this.exactly("XOr"),583);},function(){return this._forwardStructure(this.exactly("Opt"),585);},function(){return this._forwardStructure(this.exactly("Many"),587);},function(){return this._forwardStructure(this.exactly("Many1"),589);},function(){return this._forwardStructure(this.exactly("Not"),591);},function(){return this._forwardStructure(this.exactly("Lookahead"),593);},function(){return this._forwardStructure(this.exactly("Form"),595);},function(){return this._forwardStructure(this.exactly("ConsBy"),597);},function(){return this._forwardStructure(this.exactly("IdxConsBy"),599);},function(){return this._forwardStructure(this.exactly("App"),601);},function(){return this._forwardStructure(this.exactly("JumpTable"),603);},function(){return this._forwardStructure(this.exactly("Interleave"),605);}),579);return this._endStructure($r0);},
"somethingThatCanPass":function(){var $elf=this,$vars={},$r0=this._startStructure(607, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(611);$vars.loc=this._getStructureValue(this.anything());$vars.t=this._appendStructure($r1,this._apply("generatesStructure"),615);this._pred((this[$vars.t] != undefined));this._appendStructure($r1,this._applyWithArgs("pushLocation",$vars.loc),619);$vars.ans=this._appendStructure($r1,this._apply($vars.t),623);$r1.value=this._appendStructure($r1,this._apply("popLocation"),626);return this._endStructure($r1);}),609);$r0.value=[$vars.loc].concat($vars.ans);return this._endStructure($r0);},
"storeSomething":function(){var $elf=this,$vars={},$r0=this._startStructure(629, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(632);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(636);$vars.loc=this._getStructureValue(this.anything());$vars.t=this._appendStructure($r2,this._apply("generatesStructure"),640);this._pred((this[$vars.t] != undefined));this._appendStructure($r2,this._applyWithArgs("pushLocation",$vars.loc),644);$vars.ans=this._appendStructure($r2,this._apply($vars.t),648);$r2.value=this._appendStructure($r2,this._apply("popLocation"),651);return this._endStructure($r2);}),634);$r1.value=[$vars.loc,"Store",[$vars.loc].concat($vars.ans)];return this._endStructure($r1);},function(){var $r1=this._startStructure(631);$r1.value=($vars.x=this._appendStructure($r1,this._apply("trans"),656));return this._endStructure($r1);}),630);return this._endStructure($r0);},
"storeSomethingThatReturns":function(){var $elf=this,$vars={},$r0=this._startStructure(658, true);$r0.value=($vars.x=this._appendStructure($r0,this._apply("somethingThatReturns"),661));return this._endStructure($r0);},
"functioned":function(){var $elf=this,$vars={},$r0=this._startStructure(663, true);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(666);$vars.x=this._appendStructure($r1,this._apply("somethingThatCanPass"),669);$r1.value=[$vars.x[(0)],"Function",[null,"Return",$vars.x]];return this._endStructure($r1);},function(){var $r1=this._startStructure(672);$vars.x=this._appendStructure($r1,this._apply("storeSomethingThatReturns"),675);$r1.value=[$vars.x[(0)],"FunctionStructure",$vars.x];return this._endStructure($r1);}),664);return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(678, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("functioned"),683);}),681);$r0.value=["Or"].concat($vars.xs);return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(686, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("functioned"),691);}),689);$r0.value=["XOr"].concat($vars.xs);return this._endStructure($r0);},
"Opt":function(){var $elf=this,$vars={},$r0=this._startStructure(694, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),697);$r0.value=["Opt",$vars.x];return this._endStructure($r0);},
"Many":function(){var $elf=this,$vars={},$r0=this._startStructure(700, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),703);$r0.value=["Many",$vars.x];return this._endStructure($r0);},
"Many1":function(){var $elf=this,$vars={},$r0=this._startStructure(706, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),709);$r0.value=["Many1",$vars.x];return this._endStructure($r0);},
"Not":function(){var $elf=this,$vars={},$r0=this._startStructure(712, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),715);$r0.value=["Not",$vars.x];return this._endStructure($r0);},
"Lookahead":function(){var $elf=this,$vars={},$r0=this._startStructure(718, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),721);$r0.value=["Lookahead",$vars.x];return this._endStructure($r0);},
"Form":function(){var $elf=this,$vars={},$r0=this._startStructure(724, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),727);$r0.value=["Form",$vars.x];return this._endStructure($r0);},
"ConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(730, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),733);$r0.value=["ConsBy",$vars.x];return this._endStructure($r0);},
"IdxConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(736, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),739);$r0.value=["IdxConsBy",$vars.x];return this._endStructure($r0);},
"App":function(){var $elf=this,$vars={},$r0=this._startStructure(742, true);$vars.rule=this._getStructureValue(this.anything());$vars.args=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("trans"),748);}),746);$r0.value=["App",$vars.rule].concat($vars.args);return this._endStructure($r0);},
"JumpTable":function(){var $elf=this,$vars={},$r0=this._startStructure(751, true);$vars.ces=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(756);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(760);$vars.c=this._getStructureValue(this.anything());$r2.value=($vars.e=this._appendStructure($r2,this._apply("somethingThatReturns"),765));return this._endStructure($r2);}),758);$r1.value=[$vars.c,$vars.e];return this._endStructure($r1);}),754);$r0.value=["JumpTable"].concat($vars.ces);return this._endStructure($r0);},
"Interleave":function(){var $elf=this,$vars={},$r0=this._startStructure(769, true);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(774);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(778);$vars.m=this._getStructureValue(this.anything());$r2.value=($vars.p=this._appendStructure($r2,this._apply("functioned"),783));return this._endStructure($r2);}),776);$r1.value=[$vars.m,$vars.p];return this._endStructure($r1);}),772);$r0.value=["Interleave"].concat($vars.xs);return this._endStructure($r0);},
"Pred":function(){var $elf=this,$vars={},$r0=this._startStructure(787, true);$vars.expr=this._getStructureValue(this.anything());$r0.value=["Pred",$vars.expr];return this._endStructure($r0);},
"Set":function(){var $elf=this,$vars={},$r0=this._startStructure(791, true);$vars.n=this._getStructureValue(this.anything());$vars.v=this._appendStructure($r0,this._apply("storeSomething"),795);$r0.value=["Set",$vars.n,$vars.v];return this._endStructure($r0);},
"Js":function(){var $elf=this,$vars={},$r0=this._startStructure(798, true);$vars.locals=this._getStructureValue(this.anything());$vars.code=this._getStructureValue(this.anything());$r0.value=["Js",$vars.locals,$vars.code];return this._endStructure($r0);},
"Location":function(){var $elf=this,$vars={},$r0=this._startStructure(803, true);$r0.value=["Location"];return this._endStructure($r0);},
"PopArg":function(){var $elf=this,$vars={},$r0=this._startStructure(805, true);$r0.value=["PopArg"];return this._endStructure($r0);},
"Rule":function(){var $elf=this,$vars={},$r0=this._startStructure(807, true);$vars.name=this._getStructureValue(this.anything());$vars.body=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(813);$vars.b=this._appendStructure($r1,this._apply("somethingThatCanPass"),816);$r1.value=[null,"ReturnStructure",[$vars.b[(0)],"Store",$vars.b]];return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("somethingThatReturns"),819);}),811);$r0.value=["Rule",$vars.name,$vars.body];return this._endStructure($r0);}});(BSFunctionOptimization["initialize"]=(function (){(this["_locations"]=[]);}));(BSFunctionOptimization["location"]=(function (){return this["_locations"][(this["_locations"]["length"] - (1))];}));let BSOMetaOptimizer=objectThatDelegatesTo(OMeta,{
"optimizeGrammar":function(){var $elf=this,$vars={},$r0=this._startStructure(823, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(827);this._appendStructure($r1,this.exactly("Grammar"),829);$vars.sn=this._getStructureValue(this.anything());$r1.value=($vars.rs=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("optimizeRule"),836);}),834));return this._endStructure($r1);}),825);$r0.value=["Grammar",$vars.sn].concat($vars.rs);return this._endStructure($r0);},
"optimizeRule":function(){var $elf=this,$vars={},$r0=this._startStructure(839, true);$vars.r=this._getStructureValue(this.anything());this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(843);$r1.value=($vars.r=this._appendStructure($r1,this._applyWithArgs("foreign",BSSeqInliner,"optimize",$vars.r),846));return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("empty"),850);}),842);this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._or(function(){var $r2=this._startStructure(855);$r2.value=($vars.r=this._appendStructure($r2,this._applyWithArgs("foreign",BSAssociativeOptimization,"optimize",$vars.r),858));return this._endStructure($r2);},function(){var $r2=this._startStructure(855);$r2.value=($vars.r=this._appendStructure($r2,this._applyWithArgs("foreign",BSJumpTableOptimization,"optimize",$vars.r),864));return this._endStructure($r2);}),854);}),852);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSFunctionOptimization,"optimize",$vars.r),869);$r0.value=$vars.r;return this._endStructure($r0);}})


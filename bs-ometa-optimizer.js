// This file was generated using Gnometa
// https://github.com/djdeath/gnometa

let BSNullOptimization=objectThatDelegatesTo(OMeta,{
"setHelped":function(){var $elf=this,$vars={},$r0=this._startStructure("setHelped");$r0.value=(this["_didSomething"]=true);return this._endStructure($r0);},
"helped":function(){var $elf=this,$vars={},$r0=this._startStructure("helped");$r0.value=this._pred(this["_didSomething"]);return this._endStructure($r0);},
"trans":function(){var $elf=this,$vars={},$r0=this._startStructure("trans");this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(null);$vars.t=this._appendStructure($r1,this.anything());this._pred((this[$vars.t] != undefined));$r1.value=($vars.ans=this._appendStructure($r1,this._apply($vars.t)));return this._endStructure($r1);}));$r0.value=$vars.ans;return this._endStructure($r0);},
"optimize":function(){var $elf=this,$vars={},$r0=this._startStructure("optimize");$vars.x=this._appendStructure($r0,this._apply("trans"));this._appendStructure($r0,this._apply("helped"));$r0.value=$vars.x;return this._endStructure($r0);},
"App":function(){var $elf=this,$vars={},$r0=this._startStructure("App");$vars.rule=this._appendStructure($r0,this.anything());$vars.args=this._appendStructure($r0,this._many(function(){return this.anything();}));$r0.value=["App",$vars.rule].concat($vars.args);return this._endStructure($r0);},
"Act":function(){var $elf=this,$vars={},$r0=this._startStructure("Act");$vars.expr=this._appendStructure($r0,this.anything());$r0.value=["Act",$vars.expr];return this._endStructure($r0);},
"Pred":function(){var $elf=this,$vars={},$r0=this._startStructure("Pred");$vars.expr=this._appendStructure($r0,this.anything());$r0.value=["Pred",$vars.expr];return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure("Or");$vars.xs=this._appendStructure($r0,this._many(function(){return this._apply("trans");}));$r0.value=["Or"].concat($vars.xs);return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure("XOr");$vars.xs=this._appendStructure($r0,this._many(function(){return this._apply("trans");}));$r0.value=["XOr"].concat($vars.xs);return this._endStructure($r0);},
"And":function(){var $elf=this,$vars={},$r0=this._startStructure("And");$vars.xs=this._appendStructure($r0,this._many(function(){return this._apply("trans");}));$r0.value=["And"].concat($vars.xs);return this._endStructure($r0);},
"Opt":function(){var $elf=this,$vars={},$r0=this._startStructure("Opt");$vars.x=this._appendStructure($r0,this._apply("trans"));$r0.value=["Opt",$vars.x];return this._endStructure($r0);},
"Many":function(){var $elf=this,$vars={},$r0=this._startStructure("Many");$vars.x=this._appendStructure($r0,this._apply("trans"));$r0.value=["Many",$vars.x];return this._endStructure($r0);},
"Many1":function(){var $elf=this,$vars={},$r0=this._startStructure("Many1");$vars.x=this._appendStructure($r0,this._apply("trans"));$r0.value=["Many1",$vars.x];return this._endStructure($r0);},
"Set":function(){var $elf=this,$vars={},$r0=this._startStructure("Set");$vars.n=this._appendStructure($r0,this.anything());$vars.v=this._appendStructure($r0,this._apply("trans"));$r0.value=["Set",$vars.n,$vars.v];return this._endStructure($r0);},
"Not":function(){var $elf=this,$vars={},$r0=this._startStructure("Not");$vars.x=this._appendStructure($r0,this._apply("trans"));$r0.value=["Not",$vars.x];return this._endStructure($r0);},
"Lookahead":function(){var $elf=this,$vars={},$r0=this._startStructure("Lookahead");$vars.x=this._appendStructure($r0,this._apply("trans"));$r0.value=["Lookahead",$vars.x];return this._endStructure($r0);},
"Form":function(){var $elf=this,$vars={},$r0=this._startStructure("Form");$vars.x=this._appendStructure($r0,this._apply("trans"));$r0.value=["Form",$vars.x];return this._endStructure($r0);},
"ConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure("ConsBy");$vars.x=this._appendStructure($r0,this._apply("trans"));$r0.value=["ConsBy",$vars.x];return this._endStructure($r0);},
"IdxConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure("IdxConsBy");$vars.x=this._appendStructure($r0,this._apply("trans"));$r0.value=["IdxConsBy",$vars.x];return this._endStructure($r0);},
"JumpTable":function(){var $elf=this,$vars={},$r0=this._startStructure("JumpTable");$vars.ces=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(null);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(null);$vars.c=this._appendStructure($r2,this.anything());$r2.value=($vars.e=this._appendStructure($r2,this._apply("trans")));return this._endStructure($r2);}));$r1.value=[$vars.c,$vars.e];return this._endStructure($r1);}));$r0.value=["JumpTable"].concat($vars.ces);return this._endStructure($r0);},
"Interleave":function(){var $elf=this,$vars={},$r0=this._startStructure("Interleave");$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(null);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(null);$vars.m=this._appendStructure($r2,this.anything());$r2.value=($vars.p=this._appendStructure($r2,this._apply("trans")));return this._endStructure($r2);}));$r1.value=[$vars.m,$vars.p];return this._endStructure($r1);}));$r0.value=["Interleave"].concat($vars.xs);return this._endStructure($r0);},
"Rule":function(){var $elf=this,$vars={},$r0=this._startStructure("Rule");$vars.name=this._appendStructure($r0,this.anything());$vars.body=this._appendStructure($r0,this._apply("trans"));$r0.value=["Rule",$vars.name,$vars.body];return this._endStructure($r0);}});(BSNullOptimization["initialize"]=(function (){(this["_didSomething"]=false);}));let BSAssociativeOptimization=objectThatDelegatesTo(BSNullOptimization,{
"And":function(){var $elf=this,$vars={},$r0=this._startStructure("And");$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(null);$vars.x=this._appendStructure($r1,this._apply("trans"));this._appendStructure($r1,this.end());this._appendStructure($r1,this._apply("setHelped"));$r1.value=$vars.x;return this._endStructure($r1);},function(){var $r1=this._startStructure(null);$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside","And"));$r1.value=["And"].concat($vars.xs);return this._endStructure($r1);}));return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure("Or");$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(null);$vars.x=this._appendStructure($r1,this._apply("trans"));this._appendStructure($r1,this.end());this._appendStructure($r1,this._apply("setHelped"));$r1.value=$vars.x;return this._endStructure($r1);},function(){var $r1=this._startStructure(null);$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside","Or"));$r1.value=["Or"].concat($vars.xs);return this._endStructure($r1);}));return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure("XOr");$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(null);$vars.x=this._appendStructure($r1,this._apply("trans"));this._appendStructure($r1,this.end());this._appendStructure($r1,this._apply("setHelped"));$r1.value=$vars.x;return this._endStructure($r1);},function(){var $r1=this._startStructure(null);$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside","XOr"));$r1.value=["XOr"].concat($vars.xs);return this._endStructure($r1);}));return this._endStructure($r0);},
"transInside":function(){var $elf=this,$vars={},$r0=this._startStructure("transInside");$vars.t=this._appendStructure($r0,this.anything());$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(null);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(null);this._appendStructure($r2,this.exactly($vars.t));$r2.value=($vars.xs=this._appendStructure($r2,this._applyWithArgs("transInside",$vars.t)));return this._endStructure($r2);}));$vars.ys=this._appendStructure($r1,this._applyWithArgs("transInside",$vars.t));this._appendStructure($r1,this._apply("setHelped"));$r1.value=$vars.xs.concat($vars.ys);return this._endStructure($r1);},function(){var $r1=this._startStructure(null);$vars.x=this._appendStructure($r1,this._apply("trans"));$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside",$vars.t));$r1.value=[$vars.x].concat($vars.xs);return this._endStructure($r1);},function(){var $r1=this._startStructure(null);$r1.value=[];return this._endStructure($r1);}));return this._endStructure($r0);}});let BSSeqInliner=objectThatDelegatesTo(BSNullOptimization,{
"App":function(){var $elf=this,$vars={},$r0=this._startStructure("App");$r0.value=this._appendStructure($r0,this._or(function(){return (function(){var $r2=this._startStructure(null);switch(this._appendStructure($r2,this._apply('anything'))){case "seq":$vars.s=this._appendStructure($r2,this.anything());this._appendStructure($r2,this.end());$vars.cs=this._appendStructure($r2,this._applyWithArgs("seqString",$vars.s));this._appendStructure($r2,this._apply("setHelped"));$r2.value=["And"].concat($vars.cs).concat([["Act",$vars.s]]);break;default: throw fail}return this._endStructure($r2);}).call(this);},function(){var $r1=this._startStructure(null);$vars.rule=this._appendStructure($r1,this.anything());$vars.args=this._appendStructure($r1,this._many(function(){return this.anything();}));$r1.value=["App",$vars.rule].concat($vars.args);return this._endStructure($r1);}));return this._endStructure($r0);},
"inlineChar":function(){var $elf=this,$vars={},$r0=this._startStructure("inlineChar");$vars.c=this._appendStructure($r0,this._applyWithArgs("foreign",BSOMetaParser,'eChar'));this._appendStructure($r0,this._not(function(){return this.end();}));$r0.value=["App","exactly",$vars.c.toProgramString()];return this._endStructure($r0);},
"seqString":function(){var $elf=this,$vars={},$r0=this._startStructure("seqString");this._appendStructure($r0,this._lookahead(function(){var $r1=this._startStructure(null);$vars.s=this._appendStructure($r1,this.anything());$r1.value=this._pred(((typeof $vars.s) === "string"));return this._endStructure($r1);}));$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(null);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(null);this._appendStructure($r2,this.exactly("\""));$vars.cs=this._appendStructure($r2,this._many(function(){return this._apply("inlineChar");}));$r2.value=this._appendStructure($r2,this.exactly("\""));return this._endStructure($r2);}));$r1.value=$vars.cs;return this._endStructure($r1);},function(){var $r1=this._startStructure(null);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(null);this._appendStructure($r2,this.exactly("\'"));$vars.cs=this._appendStructure($r2,this._many(function(){return this._apply("inlineChar");}));$r2.value=this._appendStructure($r2,this.exactly("\'"));return this._endStructure($r2);}));$r1.value=$vars.cs;return this._endStructure($r1);}));return this._endStructure($r0);}});let JumpTable=(function (choiceOp,choice){(this["choiceOp"]=choiceOp);(this["choices"]=({}));this.add(choice);});(JumpTable["prototype"]["add"]=(function (choice){var c=choice[(0)],t=choice[(1)];if(this["choices"][c]){if((this["choices"][c][(0)] == this["choiceOp"])){this["choices"][c].push(t);}else{(this["choices"][c]=[this["choiceOp"],this["choices"][c],t]);};}else{(this["choices"][c]=t);};}));(JumpTable["prototype"]["toTree"]=(function (){var r=["JumpTable"],choiceKeys=ownPropertyNames(this["choices"]);for(var i=(0);(i < choiceKeys["length"]);(i+=(1))){r.push([choiceKeys[i],this["choices"][choiceKeys[i]]]);}return r;}));let BSJumpTableOptimization=objectThatDelegatesTo(BSNullOptimization,{
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure("Or");$vars.cs=this._appendStructure($r0,this._many(function(){return this._or(function(){return this._applyWithArgs("jtChoices","Or");},function(){return this._apply("trans");});}));$r0.value=["Or"].concat($vars.cs);return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure("XOr");$vars.cs=this._appendStructure($r0,this._many(function(){return this._or(function(){return this._applyWithArgs("jtChoices","XOr");},function(){return this._apply("trans");});}));$r0.value=["XOr"].concat($vars.cs);return this._endStructure($r0);},
"quotedString":function(){var $elf=this,$vars={},$r0=this._startStructure("quotedString");this._appendStructure($r0,this._lookahead(function(){return this._applyWithArgs("foreign",BaseStrParser,'string');}));this._appendStructure($r0,this._form(function(){return (function(){var $r2=this._startStructure(null);switch(this._appendStructure($r2,this._apply('anything'))){case "\"":$vars.cs=this._appendStructure($r2,this._many(function(){var $r3=this._startStructure(null);$vars.c=this._appendStructure($r3,this._applyWithArgs("foreign",BSOMetaParser,'eChar'));this._appendStructure($r3,this._not(function(){return this.end();}));$r3.value=$vars.c;return this._endStructure($r3);}));$r2.value=this._appendStructure($r2,this.exactly("\""));break;case "\'":$vars.cs=this._appendStructure($r2,this._many(function(){var $r3=this._startStructure(null);$vars.c=this._appendStructure($r3,this._applyWithArgs("foreign",BSOMetaParser,'eChar'));this._appendStructure($r3,this._not(function(){return this.end();}));$r3.value=$vars.c;return this._endStructure($r3);}));$r2.value=this._appendStructure($r2,this.exactly("\'"));break;default: throw fail}return this._endStructure($r2);}).call(this);}));$r0.value=$vars.cs.join("");return this._endStructure($r0);},
"jtChoice":function(){var $elf=this,$vars={},$r0=this._startStructure("jtChoice");$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(null);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(null);this._appendStructure($r2,this.exactly("And"));this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(null);this._appendStructure($r3,this.exactly("App"));this._appendStructure($r3,this.exactly("exactly"));$r3.value=($vars.x=this._appendStructure($r3,this._apply("quotedString")));return this._endStructure($r3);}));$r2.value=($vars.rest=this._appendStructure($r2,this._many(function(){return this.anything();})));return this._endStructure($r2);}));$r1.value=[$vars.x,["And"].concat($vars.rest)];return this._endStructure($r1);},function(){var $r1=this._startStructure(null);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(null);this._appendStructure($r2,this.exactly("App"));this._appendStructure($r2,this.exactly("exactly"));$r2.value=($vars.x=this._appendStructure($r2,this._apply("quotedString")));return this._endStructure($r2);}));$r1.value=[$vars.x,["Act",$vars.x.toProgramString()]];return this._endStructure($r1);}));return this._endStructure($r0);},
"jtChoices":function(){var $elf=this,$vars={},$r0=this._startStructure("jtChoices");$vars.op=this._appendStructure($r0,this.anything());$vars.c=this._appendStructure($r0,this._apply("jtChoice"));$vars.jt=new JumpTable($vars.op,$vars.c);this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(null);$vars.c=this._appendStructure($r1,this._apply("jtChoice"));$r1.value=$vars.jt.add($vars.c);return this._endStructure($r1);}));this._appendStructure($r0,this._apply("setHelped"));$r0.value=$vars.jt.toTree();return this._endStructure($r0);}});let BSFunctionOptimization=objectThatDelegatesTo(GenericMatcher,{
"optimize":function(){var $elf=this,$vars={},$r0=this._startStructure("optimize");$vars.x=this._appendStructure($r0,this._apply("trans"));$r0.value=$vars.x;return this._endStructure($r0);},
"trans":function(){var $elf=this,$vars={},$r0=this._startStructure("trans");this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(null);$vars.t=this._appendStructure($r1,this.anything());this._pred((this[$vars.t] != undefined));$r1.value=($vars.ans=this._appendStructure($r1,this._apply($vars.t)));return this._endStructure($r1);}));$r0.value=$vars.ans;return this._endStructure($r0);},
"somethingThatReturns":function(){var $elf=this,$vars={},$r0=this._startStructure("somethingThatReturns");$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(null);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(null);this._appendStructure($r2,this.exactly("And"));$r2.value=($vars.ans=this._appendStructure($r2,this._apply("AndReturn")));return this._endStructure($r2);}));$r1.value=$vars.ans;return this._endStructure($r1);},function(){var $r1=this._startStructure(null);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(null);this._appendStructure($r2,this.exactly("And"));$r2.value=this._appendStructure($r2,this.end());return this._endStructure($r2);}));$r1.value=["ReturnStructure",["And"]];return this._endStructure($r1);},function(){var $r1=this._startStructure(null);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(null);$vars.t=this._appendStructure($r2,this._apply("generatesStructure"));$r2.value=($vars.ans=this._appendStructure($r2,this._apply($vars.t)));return this._endStructure($r2);}));$r1.value=["ReturnStructure",["Store",$vars.ans]];return this._endStructure($r1);},function(){var $r1=this._startStructure(null);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(null);this._appendStructure($r2,this.exactly("Set"));$r2.value=($vars.ans=this._appendStructure($r2,this._apply("Set")));return this._endStructure($r2);}));$r1.value=["ReturnStructure",["Parenthesis",$vars.ans]];return this._endStructure($r1);},function(){var $r1=this._startStructure(null);$vars.x=this._appendStructure($r1,this._apply("trans"));$r1.value=["ReturnStructure",$vars.x];return this._endStructure($r1);}));return this._endStructure($r0);},
"generatesStructure":function(){var $elf=this,$vars={},$r0=this._startStructure("generatesStructure");$r0.value=this._appendStructure($r0,(function(){var $r1=this._startStructure(null);switch(this._appendStructure($r1,this._apply('anything'))){case "Or":$r1.value="Or";break;case "XOr":$r1.value="XOr";break;case "Opt":$r1.value="Opt";break;case "Many":$r1.value="Many";break;case "Many1":$r1.value="Many1";break;case "Not":$r1.value="Not";break;case "Lookahead":$r1.value="Lookahead";break;case "Form":$r1.value="Form";break;case "ConsBy":$r1.value="ConsBy";break;case "IdxConsBy":$r1.value="IdxConsBy";break;case "App":$r1.value="App";break;case "JumpTable":$r1.value="JumpTable";break;case "Interleave":$r1.value="Interleave";break;default: throw fail}return this._endStructure($r1);}).call(this));return this._endStructure($r0);},
"somethingThatCanPass":function(){var $elf=this,$vars={},$r0=this._startStructure("somethingThatCanPass");this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(null);$vars.t=this._appendStructure($r1,this._apply("generatesStructure"));$r1.value=($vars.ans=this._appendStructure($r1,this._apply($vars.t)));return this._endStructure($r1);}));$r0.value=$vars.ans;return this._endStructure($r0);},
"storeSomething":function(){var $elf=this,$vars={},$r0=this._startStructure("storeSomething");$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(null);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(null);$vars.t=this._appendStructure($r2,this._apply("generatesStructure"));$r2.value=($vars.ans=this._appendStructure($r2,this._apply($vars.t)));return this._endStructure($r2);}));$r1.value=["Store",$vars.ans];return this._endStructure($r1);},function(){var $r1=this._startStructure(null);$r1.value=($vars.x=this._appendStructure($r1,this._apply("trans")));return this._endStructure($r1);}));return this._endStructure($r0);},
"storeSomethingThatReturns":function(){var $elf=this,$vars={},$r0=this._startStructure("storeSomethingThatReturns");$r0.value=($vars.x=this._appendStructure($r0,this._apply("somethingThatReturns")));return this._endStructure($r0);},
"functioned":function(){var $elf=this,$vars={},$r0=this._startStructure("functioned");$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(null);$vars.x=this._appendStructure($r1,this._apply("somethingThatCanPass"));$r1.value=["Function",["Return",$vars.x]];return this._endStructure($r1);},function(){var $r1=this._startStructure(null);$vars.x=this._appendStructure($r1,this._apply("storeSomethingThatReturns"));$r1.value=["FunctionStructure",$vars.x];return this._endStructure($r1);}));return this._endStructure($r0);},
"AndReturn":function(){var $elf=this,$vars={},$r0=this._startStructure("AndReturn");$vars.xs=this._appendStructure($r0,this._many(function(){return this._applyWithArgs("notLast","storeSomething");}));$vars.y=this._appendStructure($r0,this._apply("storeSomethingThatReturns"));$r0.value=["And"].concat($vars.xs.concat([$vars.y]));return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure("Or");$vars.xs=this._appendStructure($r0,this._many(function(){return this._apply("functioned");}));$r0.value=["Or"].concat($vars.xs);return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure("XOr");$vars.xs=this._appendStructure($r0,this._many(function(){return this._apply("functioned");}));$r0.value=["XOr"].concat($vars.xs);return this._endStructure($r0);},
"Opt":function(){var $elf=this,$vars={},$r0=this._startStructure("Opt");$vars.x=this._appendStructure($r0,this._apply("functioned"));$r0.value=["Opt",$vars.x];return this._endStructure($r0);},
"Many":function(){var $elf=this,$vars={},$r0=this._startStructure("Many");$vars.x=this._appendStructure($r0,this._apply("functioned"));$r0.value=["Many",$vars.x];return this._endStructure($r0);},
"Many1":function(){var $elf=this,$vars={},$r0=this._startStructure("Many1");$vars.x=this._appendStructure($r0,this._apply("functioned"));$r0.value=["Many1",$vars.x];return this._endStructure($r0);},
"Not":function(){var $elf=this,$vars={},$r0=this._startStructure("Not");$vars.x=this._appendStructure($r0,this._apply("functioned"));$r0.value=["Not",$vars.x];return this._endStructure($r0);},
"Lookahead":function(){var $elf=this,$vars={},$r0=this._startStructure("Lookahead");$vars.x=this._appendStructure($r0,this._apply("functioned"));$r0.value=["Lookahead",$vars.x];return this._endStructure($r0);},
"Form":function(){var $elf=this,$vars={},$r0=this._startStructure("Form");$vars.x=this._appendStructure($r0,this._apply("functioned"));$r0.value=["Form",$vars.x];return this._endStructure($r0);},
"ConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure("ConsBy");$vars.x=this._appendStructure($r0,this._apply("functioned"));$r0.value=["ConsBy",$vars.x];return this._endStructure($r0);},
"IdxConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure("IdxConsBy");$vars.x=this._appendStructure($r0,this._apply("functioned"));$r0.value=["IdxConsBy",$vars.x];return this._endStructure($r0);},
"App":function(){var $elf=this,$vars={},$r0=this._startStructure("App");$vars.rule=this._appendStructure($r0,this.anything());$vars.args=this._appendStructure($r0,this._many(function(){return this.anything();}));$r0.value=["App",$vars.rule].concat($vars.args);return this._endStructure($r0);},
"JumpTable":function(){var $elf=this,$vars={},$r0=this._startStructure("JumpTable");$vars.ces=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(null);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(null);$vars.c=this._appendStructure($r2,this.anything());$r2.value=($vars.e=this._appendStructure($r2,this._apply("somethingThatReturns")));return this._endStructure($r2);}));$r1.value=[$vars.c,$vars.e];return this._endStructure($r1);}));$r0.value=["JumpTable"].concat($vars.ces);return this._endStructure($r0);},
"Interleave":function(){var $elf=this,$vars={},$r0=this._startStructure("Interleave");$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(null);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(null);$vars.m=this._appendStructure($r2,this.anything());$r2.value=($vars.p=this._appendStructure($r2,this._apply("functioned")));return this._endStructure($r2);}));$r1.value=[$vars.m,$vars.p];return this._endStructure($r1);}));$r0.value=["Interleave"].concat($vars.xs);return this._endStructure($r0);},
"Act":function(){var $elf=this,$vars={},$r0=this._startStructure("Act");$vars.expr=this._appendStructure($r0,this.anything());$r0.value=["Act",$vars.expr];return this._endStructure($r0);},
"Pred":function(){var $elf=this,$vars={},$r0=this._startStructure("Pred");$vars.expr=this._appendStructure($r0,this.anything());$r0.value=["Pred",$vars.expr];return this._endStructure($r0);},
"Set":function(){var $elf=this,$vars={},$r0=this._startStructure("Set");$vars.n=this._appendStructure($r0,this.anything());$vars.v=this._appendStructure($r0,this._apply("storeSomething"));$r0.value=["Set",$vars.n,$vars.v];return this._endStructure($r0);},
"Rule":function(){var $elf=this,$vars={},$r0=this._startStructure("Rule");$vars.name=this._appendStructure($r0,this.anything());$vars.body=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(null);$vars.b=this._appendStructure($r1,this._apply("somethingThatCanPass"));$r1.value=["ReturnStructure",["Store",$vars.b]];return this._endStructure($r1);},function(){return this._apply("somethingThatReturns");}));$r0.value=["Rule",$vars.name,$vars.body];return this._endStructure($r0);}});let BSOMetaOptimizer=objectThatDelegatesTo(OMeta,{
"optimizeGrammar":function(){var $elf=this,$vars={},$r0=this._startStructure("optimizeGrammar");this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(null);this._appendStructure($r1,this.exactly("Grammar"));$vars.sn=this._appendStructure($r1,this.anything());$r1.value=($vars.rs=this._appendStructure($r1,this._many(function(){return this._apply("optimizeRule");})));return this._endStructure($r1);}));$r0.value=["Grammar",$vars.sn].concat($vars.rs);return this._endStructure($r0);},
"optimizeRule":function(){var $elf=this,$vars={},$r0=this._startStructure("optimizeRule");$vars.r=this._appendStructure($r0,this.anything());this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(null);$r1.value=($vars.r=this._appendStructure($r1,this._applyWithArgs("foreign",BSSeqInliner,'optimize',$vars.r)));return this._endStructure($r1);},function(){return this._apply("empty");}));this._appendStructure($r0,this._many(function(){return this._or(function(){var $r2=this._startStructure(null);$r2.value=($vars.r=this._appendStructure($r2,this._applyWithArgs("foreign",BSAssociativeOptimization,'optimize',$vars.r)));return this._endStructure($r2);},function(){var $r2=this._startStructure(null);$r2.value=($vars.r=this._appendStructure($r2,this._applyWithArgs("foreign",BSJumpTableOptimization,'optimize',$vars.r)));return this._endStructure($r2);});}));$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSFunctionOptimization,'optimize',$vars.r));$r0.value=$vars.r;return this._endStructure($r0);}})

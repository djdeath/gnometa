// This file was generated using Gnometa
// https://github.com/djdeath/gnometa
let mergeLocation=(function (loc1,loc2){return ({"start": Math.min(loc1["start"],loc2["start"]),"stop": Math.max(loc1["stop"],loc2["stop"])});});let BSNullOptimization=objectThatDelegatesTo(OMeta,{
"setHelped":function(){var $elf=this,$vars={},$r0=this._startStructure(1, true);$r0.value=(this["_didSomething"]=true);return this._endStructure($r0);},
"helped":function(){var $elf=this,$vars={},$r0=this._startStructure(3, true);$r0.value=this._pred(this["_didSomething"]);return this._endStructure($r0);},
"pushLocation":function(){var $elf=this,$vars={},$r0=this._startStructure(6, true);$vars.loc=this.anything();$r0.value=this["_locations"].push($vars.loc.value);return this._endStructure($r0);},
"popLocation":function(){var $elf=this,$vars={},$r0=this._startStructure(11, true);$r0.value=this["_locations"].pop();return this._endStructure($r0);},
"trans":function(){var $elf=this,$vars={},$r0=this._startStructure(13, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(17);$vars.loc=this.anything();$vars.t=this.anything();$r1.value=this._pred((this[$vars.t.value] != undefined));this._appendStructure($r1,this._applyWithArgs("pushLocation",$vars.loc.value),24);$vars.ans=this._appendStructure($r1,this._apply($vars.t.value),28);this._appendStructure($r1,this._apply("popLocation"),31);return this._endStructure($r1);}),15);$r0.value=[$vars.loc.value].concat($vars.ans.value);return this._endStructure($r0);},
"optimize":function(){var $elf=this,$vars={},$r0=this._startStructure(35, true);$vars.x=this._appendStructure($r0,this._apply("trans"),38);this._appendStructure($r0,this._apply("helped"),40);$r0.value=$vars.x.value;return this._endStructure($r0);},
"App":function(){var $elf=this,$vars={},$r0=this._startStructure(44, true);$vars.rule=this.anything();$vars.args=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this.anything(),50);}),48);$r0.value=["App",$vars.rule.value].concat($vars.args.value);return this._endStructure($r0);},
"Pred":function(){var $elf=this,$vars={},$r0=this._startStructure(54, true);$vars.expr=this.anything();$r0.value=["Pred",$vars.expr.value];return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(59, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("trans"),64);}),62);$r0.value=["Or"].concat($vars.xs.value);return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(68, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("trans"),73);}),71);$r0.value=["XOr"].concat($vars.xs.value);return this._endStructure($r0);},
"And":function(){var $elf=this,$vars={},$r0=this._startStructure(77, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("trans"),82);}),80);$r0.value=["And"].concat($vars.xs.value);return this._endStructure($r0);},
"Opt":function(){var $elf=this,$vars={},$r0=this._startStructure(86, true);$vars.x=this._appendStructure($r0,this._apply("trans"),89);$r0.value=["Opt",$vars.x.value];return this._endStructure($r0);},
"Many":function(){var $elf=this,$vars={},$r0=this._startStructure(93, true);$vars.x=this._appendStructure($r0,this._apply("trans"),96);$r0.value=["Many",$vars.x.value];return this._endStructure($r0);},
"Many1":function(){var $elf=this,$vars={},$r0=this._startStructure(100, true);$vars.x=this._appendStructure($r0,this._apply("trans"),103);$r0.value=["Many1",$vars.x.value];return this._endStructure($r0);},
"Set":function(){var $elf=this,$vars={},$r0=this._startStructure(107, true);$vars.n=this.anything();$vars.v=this._appendStructure($r0,this._apply("trans"),111);$r0.value=["Set",$vars.n.value,$vars.v.value];return this._endStructure($r0);},
"Not":function(){var $elf=this,$vars={},$r0=this._startStructure(115, true);$vars.x=this._appendStructure($r0,this._apply("trans"),118);$r0.value=["Not",$vars.x.value];return this._endStructure($r0);},
"Lookahead":function(){var $elf=this,$vars={},$r0=this._startStructure(122, true);$vars.x=this._appendStructure($r0,this._apply("trans"),125);$r0.value=["Lookahead",$vars.x.value];return this._endStructure($r0);},
"Form":function(){var $elf=this,$vars={},$r0=this._startStructure(129, true);$vars.x=this._appendStructure($r0,this._apply("trans"),132);$r0.value=["Form",$vars.x.value];return this._endStructure($r0);},
"ConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(136, true);$vars.x=this._appendStructure($r0,this._apply("trans"),139);$r0.value=["ConsBy",$vars.x.value];return this._endStructure($r0);},
"IdxConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(143, true);$vars.x=this._appendStructure($r0,this._apply("trans"),146);$r0.value=["IdxConsBy",$vars.x.value];return this._endStructure($r0);},
"JumpTable":function(){var $elf=this,$vars={},$r0=this._startStructure(150, true);$vars.ces=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(155);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(159);$vars.c=this.anything();$vars.e=this._appendStructure($r2,this._apply("trans"),163);return this._endStructure($r2);}),157);$r1.value=[$vars.c.value,$vars.e.value];return this._endStructure($r1);}),153);$r0.value=["JumpTable"].concat($vars.ces.value);return this._endStructure($r0);},
"Interleave":function(){var $elf=this,$vars={},$r0=this._startStructure(169, true);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(174);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(178);$vars.m=this.anything();$vars.p=this._appendStructure($r2,this._apply("trans"),182);return this._endStructure($r2);}),176);$r1.value=[$vars.m.value,$vars.p.value];return this._endStructure($r1);}),172);$r0.value=["Interleave"].concat($vars.xs.value);return this._endStructure($r0);},
"Js":function(){var $elf=this,$vars={},$r0=this._startStructure(188, true);$vars.locals=this.anything();$vars.code=this.anything();$r0.value=["Js",$vars.locals.value,$vars.code.value];return this._endStructure($r0);},
"PopArg":function(){var $elf=this,$vars={},$r0=this._startStructure(194, true);$vars.n=this.anything();$r0.value=["PopArg",$vars.n.value];return this._endStructure($r0);},
"Rule":function(){var $elf=this,$vars={},$r0=this._startStructure(199, true);$vars.name=this.anything();$vars.body=this._appendStructure($r0,this._apply("trans"),203);$r0.value=["Rule",$vars.name.value,$vars.body.value];return this._endStructure($r0);}});(BSNullOptimization["initialize"]=(function (){(this["_didSomething"]=false);(this["_locations"]=[]);}));(BSNullOptimization["location"]=(function (){return this["_locations"][(this["_locations"]["length"] - (1))];}));let BSAssociativeOptimization=objectThatDelegatesTo(BSNullOptimization,{
"And":function(){var $elf=this,$vars={},$r0=this._startStructure(208, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(211);$vars.x=this._appendStructure($r1,this._apply("trans"),214);this._appendStructure($r1,this.end(),216);this._appendStructure($r1,this._apply("setHelped"),218);$r1.value=$vars.x.value.slice((1));return this._endStructure($r1);},function(){var $r1=this._startStructure(222);$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside","And"),225);$r1.value=["And"].concat($vars.xs.value);return this._endStructure($r1);}),209);return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(230, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(233);$vars.x=this._appendStructure($r1,this._apply("trans"),236);this._appendStructure($r1,this.end(),238);this._appendStructure($r1,this._apply("setHelped"),240);$r1.value=$vars.x.value.slice((1));return this._endStructure($r1);},function(){var $r1=this._startStructure(244);$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside","Or"),247);$r1.value=["Or"].concat($vars.xs.value);return this._endStructure($r1);}),231);return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(252, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(255);$vars.x=this._appendStructure($r1,this._apply("trans"),258);this._appendStructure($r1,this.end(),260);this._appendStructure($r1,this._apply("setHelped"),262);$r1.value=$vars.x.value.slice((1));return this._endStructure($r1);},function(){var $r1=this._startStructure(266);$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside","XOr"),269);$r1.value=["XOr"].concat($vars.xs.value);return this._endStructure($r1);}),253);return this._endStructure($r0);},
"transInside":function(){var $elf=this,$vars={},$r0=this._startStructure(274, true);$vars.t=this.anything();this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(279);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(283);$vars.l=this.anything();this._appendStructure($r2,this.exactly($vars.t.value),286);$vars.xs=this._appendStructure($r2,this._applyWithArgs("transInside",$vars.t.value),290);return this._endStructure($r2);}),281);$vars.ys=this._appendStructure($r1,this._applyWithArgs("transInside",$vars.t.value),294);this._appendStructure($r1,this._apply("setHelped"),297);$r1.value=$vars.xs.value.concat($vars.ys.value);return this._endStructure($r1);},function(){var $r1=this._startStructure(301);$vars.x=this._appendStructure($r1,this._apply("trans"),304);$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside",$vars.t.value),307);$r1.value=[$vars.x.value].concat($vars.xs.value);return this._endStructure($r1);},function(){var $r1=this._startStructure(278);$r1.value=[];return this._endStructure($r1);}),277);return this._endStructure($r0);}});let BSSeqInliner=objectThatDelegatesTo(BSNullOptimization,{
"App":function(){var $elf=this,$vars={},$r0=this._startStructure(314, true);this._appendStructure($r0,this._or(function(){return this._forwardStructure((function(){var $r1=this._startStructure(-1);switch(this._appendStructure($r1,this._apply('anything')).value){case "seq":this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(322);$vars.l=this.anything();this._appendStructure($r2,this.exactly("Js"),325);$vars.locals=this.anything();this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(331);this._appendStructure($r3,this.exactly("string"),333);$vars.s=this.anything();return this._endStructure($r3);}),329);return this._endStructure($r2);}),320);this._appendStructure($r1,this.end(),336);$vars.cs=this._appendStructure($r1,this._applyWithArgs("seqString",$vars.s.value),339);this._appendStructure($r1,this._apply("setHelped"),342);$r1.value=["And"].concat($vars.cs.value).concat([jsValue("string",$vars.s.value)]);break;default: throw fail;}return this._endStructure($r1);}).call(this),317);},function(){var $r1=this._startStructure(346);$vars.rule=this.anything();$vars.args=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this.anything(),352);}),350);$r1.value=["App",$vars.rule.value].concat($vars.args.value);return this._endStructure($r1);}),315);return this._endStructure($r0);},
"inlineChar":function(){var $elf=this,$vars={},$r0=this._startStructure(356, true);$vars.c=this._appendStructure($r0,this._applyWithArgs("foreign",BSOMetaParser,"eChar"),359);$r0.value=[null,"App","exactly",jsValue("string",$vars.c.value)];return this._endStructure($r0);},
"seqString":function(){var $elf=this,$vars={},$r0=this._startStructure(364, true);this._appendStructure($r0,this._lookahead(function(){var $r1=this._startStructure(368);$vars.s=this.anything();$r1.value=this._pred(((typeof $vars.s.value) === "string"));return this._endStructure($r1);}),366);this._appendStructure($r0,this._form(function(){return this._forwardStructure($vars.cs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("inlineChar"),380);}),378),376);}),374);$r0.value=$vars.cs.value;return this._endStructure($r0);}});let JumpTable=(function (choiceOp,choice){(this["choiceOp"]=choiceOp);(this["choices"]=({}));this.add(choice);});(JumpTable["prototype"]["add"]=(function (choice){var c=choice[(0)],t=choice[(1)],loc=t[(0)];if(this["choices"][c]){if((this["choices"][c][(0)] == this["choiceOp"])){this["choices"][c].push(t);}else{(this["choices"][c]=[loc,this["choiceOp"],this["choices"][c],t]);};}else{(this["choices"][c]=t);};}));(JumpTable["prototype"]["toTree"]=(function (location){var r=[location,"JumpTable"],choiceKeys=ownPropertyNames(this["choices"]);for(var i=(0);(i < choiceKeys["length"]);(i+=(1))){r.push([choiceKeys[i],this["choices"][choiceKeys[i]]]);}return r;}));let BSJumpTableOptimization=objectThatDelegatesTo(BSNullOptimization,{
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(385, true);$vars.cs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._or(function(){return this._forwardStructure(this._applyWithArgs("jtChoices","Or"),392);},function(){return this._forwardStructure(this._apply("trans"),395);}),390);}),388);$r0.value=["Or"].concat($vars.cs.value);return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(399, true);$vars.cs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._or(function(){return this._forwardStructure(this._applyWithArgs("jtChoices","XOr"),406);},function(){return this._forwardStructure(this._apply("trans"),409);}),404);}),402);$r0.value=["XOr"].concat($vars.cs.value);return this._endStructure($r0);},
"quotedString":function(){var $elf=this,$vars={},$r0=this._startStructure(413, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(417);$vars.l=this.anything();this._appendStructure($r1,this.exactly("Js"),420);$vars.locals=this.anything();this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(425);this._appendStructure($r2,this.exactly("string"),427);$vars.s=this.anything();return this._endStructure($r2);}),423);return this._endStructure($r1);}),415);$r0.value=$vars.s.value;return this._endStructure($r0);},
"jtChoice":function(){var $elf=this,$vars={},$r0=this._startStructure(433, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(436);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(440);$vars.l=this.anything();this._appendStructure($r2,this.exactly("And"),443);this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(447);$vars.l1=this.anything();this._appendStructure($r3,this.exactly("App"),450);this._appendStructure($r3,this.exactly("exactly"),452);$vars.x=this._appendStructure($r3,this._apply("quotedString"),455);return this._endStructure($r3);}),445);$vars.rest=this._appendStructure($r2,this._many(function(){return this._forwardStructure(this.anything(),460);}),458);return this._endStructure($r2);}),438);$r1.value=[$vars.x.value,[$vars.l.value,"And"].concat($vars.rest.value)];return this._endStructure($r1);},function(){var $r1=this._startStructure(464);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(468);$vars.l1=this.anything();this._appendStructure($r2,this.exactly("App"),471);this._appendStructure($r2,this.exactly("exactly"),473);$vars.x=this._appendStructure($r2,this._apply("quotedString"),476);return this._endStructure($r2);}),466);$r1.value=[$vars.x.value,jsValue("string",$vars.x.value)];return this._endStructure($r1);}),434);return this._endStructure($r0);},
"jtChoices":function(){var $elf=this,$vars={},$r0=this._startStructure(480, true);$vars.op=this.anything();$vars.c=this._appendStructure($r0,this._apply("jtChoice"),484);$vars.jt=this._generateStructure($r0,new JumpTable($vars.op.value,$vars.c.value),487);this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(491);$vars.c=this._appendStructure($r1,this._apply("jtChoice"),494);$r1.value=$vars.jt.value.add($vars.c.value);return this._endStructure($r1);}),489);this._appendStructure($r0,this._apply("setHelped"),498);$r0.value=$vars.jt.value.toTree(this.location());return this._endStructure($r0);}});let BSFunctionOptimization=objectThatDelegatesTo(GenericMatcher,{
"optimize":function(){var $elf=this,$vars={},$r0=this._startStructure(503, true);$vars.x=this._appendStructure($r0,this._apply("trans"),506);$r0.value=$vars.x.value;return this._endStructure($r0);},
"pushLocation":function(){var $elf=this,$vars={},$r0=this._startStructure(510, true);$vars.loc=this.anything();$r0.value=this["_locations"].push($vars.loc.value);return this._endStructure($r0);},
"popLocation":function(){var $elf=this,$vars={},$r0=this._startStructure(515, true);$r0.value=this["_locations"].pop();return this._endStructure($r0);},
"trans":function(){var $elf=this,$vars={},$r0=this._startStructure(517, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(521);$vars.loc=this.anything();$vars.t=this.anything();$r1.value=this._pred((this[$vars.t.value] != undefined));this._appendStructure($r1,this._applyWithArgs("pushLocation",$vars.loc.value),528);$vars.ans=this._appendStructure($r1,this._apply($vars.t.value),532);this._appendStructure($r1,this._apply("popLocation"),535);return this._endStructure($r1);}),519);$r0.value=[$vars.loc.value].concat($vars.ans.value);return this._endStructure($r0);},
"generatesStructure":function(){var $elf=this,$vars={},$r0=this._startStructure(539, true);this._appendStructure($r0,(function(){var $r1=this._startStructure(-1);switch(this._appendStructure($r1,this._apply('anything')).value){case "Or":$r1.value="Or";break;case "XOr":$r1.value="XOr";break;case "Opt":$r1.value="Opt";break;case "Many":$r1.value="Many";break;case "Many1":$r1.value="Many1";break;case "Not":$r1.value="Not";break;case "Lookahead":$r1.value="Lookahead";break;case "Form":$r1.value="Form";break;case "ConsBy":$r1.value="ConsBy";break;case "IdxConsBy":$r1.value="IdxConsBy";break;case "App":$r1.value="App";break;case "JumpTable":$r1.value="JumpTable";break;case "Interleave":$r1.value="Interleave";break;case "Set":$r1.value="Set";break;case "PopArg":$r1.value="PopArg";break;default: throw fail;}return this._endStructure($r1);}).call(this),540);return this._endStructure($r0);},
"storeSomething":function(){var $elf=this,$vars={},$r0=this._startStructure(542, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(545);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(549);$vars.loc=this.anything();this._appendStructure($r2,this.exactly("PopArg"),552);this._appendStructure($r2,this._applyWithArgs("pushLocation",$vars.loc.value),555);$vars.ans=this._appendStructure($r2,this._apply("PopArg"),559);this._appendStructure($r2,this._apply("popLocation"),562);return this._endStructure($r2);}),547);$r1.value=[$vars.loc.value].concat($vars.ans.value);return this._endStructure($r1);},function(){var $r1=this._startStructure(566);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(570);$vars.loc=this.anything();this._appendStructure($r2,this.exactly("Set"),573);this._appendStructure($r2,this._applyWithArgs("pushLocation",$vars.loc.value),576);$vars.ans=this._appendStructure($r2,this._apply("Set"),580);this._appendStructure($r2,this._apply("popLocation"),583);return this._endStructure($r2);}),568);$r1.value=[$vars.loc.value].concat($vars.ans.value);return this._endStructure($r1);},function(){var $r1=this._startStructure(587);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(591);$vars.loc=this.anything();$vars.t=this._appendStructure($r2,this._apply("generatesStructure"),595);this._appendStructure($r2,this._applyWithArgs("pushLocation",$vars.loc.value),597);$vars.ans=this._appendStructure($r2,this._apply($vars.t.value),601);this._appendStructure($r2,this._apply("popLocation"),604);return this._endStructure($r2);}),589);$r1.value=[$vars.loc.value,"Store",[$vars.loc.value].concat($vars.ans.value)];return this._endStructure($r1);},function(){var $r1=this._startStructure(608);$vars.x=this._appendStructure($r1,this._apply("trans"),611);$r1.value=[$vars.x.value[(0)],"SetReturn",$vars.x.value];return this._endStructure($r1);}),543);return this._endStructure($r0);},
"somethingThatReturns":function(){var $elf=this,$vars={},$r0=this._startStructure(615, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(618);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(622);$vars.l=this.anything();this._appendStructure($r2,this.exactly("And"),625);this._appendStructure($r2,this.end(),628);return this._endStructure($r2);}),620);$r1.value=[$vars.l.value,"SetReturn",[$vars.l.value,"And"]];return this._endStructure($r1);},function(){var $r1=this._startStructure(632);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(636);$vars.l=this.anything();this._appendStructure($r2,this.exactly("And"),639);$vars.xs=this._appendStructure($r2,this._many(function(){return this._forwardStructure(this._apply("storeSomething"),645);}),643);return this._endStructure($r2);}),634);$r1.value=[$vars.l.value,"And"].concat($vars.xs.value);return this._endStructure($r1);},function(){var $r1=this._startStructure(649);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(653);$vars.l=this.anything();$vars.t=this._appendStructure($r2,this._apply("generatesStructure"),657);$vars.ans=this._appendStructure($r2,this._apply($vars.t.value),660);return this._endStructure($r2);}),651);$r1.value=[$vars.l.value,"Store",[$vars.l.value].concat($vars.ans.value)];return this._endStructure($r1);},function(){var $r1=this._startStructure(665);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(669);$vars.l=this.anything();$vars.t=this.anything();$vars.ans=this._appendStructure($r2,this._apply($vars.t.value),674);return this._endStructure($r2);}),667);$r1.value=[null,"SetReturn",[$vars.l.value].concat($vars.ans.value)];return this._endStructure($r1);}),616);return this._endStructure($r0);},
"somethingThatCanPass":function(){var $elf=this,$vars={},$r0=this._startStructure(679, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(683);$vars.loc=this.anything();$vars.t=this._appendStructure($r1,this._apply("generatesStructure"),687);this._appendStructure($r1,this._applyWithArgs("pushLocation",$vars.loc.value),689);$vars.ans=this._appendStructure($r1,this._apply($vars.t.value),693);this._appendStructure($r1,this._apply("popLocation"),696);return this._endStructure($r1);}),681);$r0.value=[$vars.loc.value].concat($vars.ans.value);return this._endStructure($r0);},
"functioned":function(){var $elf=this,$vars={},$r0=this._startStructure(700, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(703);$vars.x=this._appendStructure($r1,this._apply("somethingThatCanPass"),706);$r1.value=[$vars.x.value[(0)],"Function",[null,"Return",$vars.x.value]];return this._endStructure($r1);},function(){var $r1=this._startStructure(710);$vars.x=this._appendStructure($r1,this._apply("somethingThatReturns"),713);$r1.value=[$vars.x.value[(0)],"FunctionStructure",$vars.x.value];return this._endStructure($r1);}),701);return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(717, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("functioned"),722);}),720);$r0.value=["Or"].concat($vars.xs.value);return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(726, true);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("functioned"),731);}),729);$r0.value=["XOr"].concat($vars.xs.value);return this._endStructure($r0);},
"Opt":function(){var $elf=this,$vars={},$r0=this._startStructure(735, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),738);$r0.value=["Opt",$vars.x.value];return this._endStructure($r0);},
"Many":function(){var $elf=this,$vars={},$r0=this._startStructure(742, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),745);$r0.value=["Many",$vars.x.value];return this._endStructure($r0);},
"Many1":function(){var $elf=this,$vars={},$r0=this._startStructure(749, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),752);$r0.value=["Many1",$vars.x.value];return this._endStructure($r0);},
"Not":function(){var $elf=this,$vars={},$r0=this._startStructure(756, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),759);$r0.value=["Not",$vars.x.value];return this._endStructure($r0);},
"Lookahead":function(){var $elf=this,$vars={},$r0=this._startStructure(763, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),766);$r0.value=["Lookahead",$vars.x.value];return this._endStructure($r0);},
"Form":function(){var $elf=this,$vars={},$r0=this._startStructure(770, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),773);$r0.value=["Form",$vars.x.value];return this._endStructure($r0);},
"ConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(777, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),780);$r0.value=["ConsBy",$vars.x.value];return this._endStructure($r0);},
"IdxConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(784, true);$vars.x=this._appendStructure($r0,this._apply("functioned"),787);$r0.value=["IdxConsBy",$vars.x.value];return this._endStructure($r0);},
"App":function(){var $elf=this,$vars={},$r0=this._startStructure(791, true);$vars.rule=this.anything();$vars.args=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("trans"),797);}),795);$r0.value=["App",$vars.rule.value].concat($vars.args.value);return this._endStructure($r0);},
"JumpTable":function(){var $elf=this,$vars={},$r0=this._startStructure(801, true);$vars.ces=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(806);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(810);$vars.c=this.anything();$vars.e=this._appendStructure($r2,this._apply("somethingThatReturns"),814);return this._endStructure($r2);}),808);$r1.value=[$vars.c.value,$vars.e.value];return this._endStructure($r1);}),804);$r0.value=["JumpTable"].concat($vars.ces.value);return this._endStructure($r0);},
"Interleave":function(){var $elf=this,$vars={},$r0=this._startStructure(820, true);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(825);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(829);$vars.m=this.anything();$vars.p=this._appendStructure($r2,this._apply("functioned"),833);return this._endStructure($r2);}),827);$r1.value=[$vars.m.value,$vars.p.value];return this._endStructure($r1);}),823);$r0.value=["Interleave"].concat($vars.xs.value);return this._endStructure($r0);},
"setRight":function(){var $elf=this,$vars={},$r0=this._startStructure(839, true);this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(842);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(846);$vars.loc=this.anything();$vars.t=this._appendStructure($r2,this._apply("generatesStructure"),850);this._appendStructure($r2,this._applyWithArgs("pushLocation",$vars.loc.value),852);$vars.ans=this._appendStructure($r2,this._apply($vars.t.value),856);this._appendStructure($r2,this._apply("popLocation"),859);return this._endStructure($r2);}),844);$r1.value=[$vars.loc.value,"Store",[$vars.loc.value].concat($vars.ans.value)];return this._endStructure($r1);},function(){var $r1=this._startStructure(863);$vars.x=this._appendStructure($r1,this._apply("trans"),866);$r1.value=[$vars.x.value[(0)],"Wrap",$vars.x.value];return this._endStructure($r1);}),840);return this._endStructure($r0);},
"Set":function(){var $elf=this,$vars={},$r0=this._startStructure(870, true);$vars.n=this.anything();$vars.v=this._appendStructure($r0,this._apply("setRight"),874);$r0.value=["Set",$vars.n.value,$vars.v.value];return this._endStructure($r0);},
"Pred":function(){var $elf=this,$vars={},$r0=this._startStructure(878, true);$vars.expr=this.anything();$r0.value=["Pred",$vars.expr.value];return this._endStructure($r0);},
"Js":function(){var $elf=this,$vars={},$r0=this._startStructure(883, true);$vars.locals=this.anything();$vars.code=this.anything();$r0.value=["Js",$vars.locals.value,$vars.code.value];return this._endStructure($r0);},
"PopArg":function(){var $elf=this,$vars={},$r0=this._startStructure(889, true);$vars.n=this.anything();$r0.value=["PopArg",$vars.n.value];return this._endStructure($r0);},
"Rule":function(){var $elf=this,$vars={},$r0=this._startStructure(894, true);$vars.name=this.anything();$vars.body=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(900);$vars.b=this._appendStructure($r1,this._apply("somethingThatCanPass"),903);$r1.value=[$vars.b.value[(0)],"Store",$vars.b.value];return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("somethingThatReturns"),907);}),898);$r0.value=["Rule",$vars.name.value,$vars.body.value];return this._endStructure($r0);}});(BSFunctionOptimization["initialize"]=(function (){(this["_locations"]=[]);}));(BSFunctionOptimization["location"]=(function (){return this["_locations"][(this["_locations"]["length"] - (1))];}));let BSOMetaOptimizer=objectThatDelegatesTo(OMeta,{
"optimizeGrammar":function(){var $elf=this,$vars={},$r0=this._startStructure(912, true);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(916);this._appendStructure($r1,this.exactly("Grammar"),918);$vars.sn=this.anything();$vars.rs=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("optimizeRule"),924);}),922);return this._endStructure($r1);}),914);$r0.value=["Grammar",$vars.sn.value].concat($vars.rs.value);return this._endStructure($r0);},
"optimizeRule":function(){var $elf=this,$vars={},$r0=this._startStructure(928, true);$vars.r=this.anything();this._appendStructure($r0,this._or(function(){return this._forwardStructure($vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSSeqInliner,"optimize",$vars.r.value),935),933);},function(){return this._forwardStructure(this._apply("empty"),939);}),931);this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._or(function(){return this._forwardStructure($vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSAssociativeOptimization,"optimize",$vars.r.value),947),945);},function(){return this._forwardStructure($vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSJumpTableOptimization,"optimize",$vars.r.value),953),951);}),943);}),941);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSFunctionOptimization,"optimize",$vars.r.value),958);$r0.value=$vars.r.value;return this._endStructure($r0);}})


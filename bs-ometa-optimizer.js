// This file was generated using Gnometa
// https://github.com/djdeath/gnometa
let BSNullOptimization=objectThatDelegatesTo(OMeta,{
"setHelped":function(){var $elf=this,$vars={},$r0=this._startStructure(0);$r0.value=(this["_didSomething"]=true);return this._endStructure($r0);},
"helped":function(){var $elf=this,$vars={},$r0=this._startStructure(3);$r0.value=this._pred(this["_didSomething"]);return this._endStructure($r0);},
"pushLocation":function(){var $elf=this,$vars={},$r0=this._startStructure(6);$vars.loc=this._getStructureValue(this.anything());$r0.value=this["_locations"].push($vars.loc);return this._endStructure($r0);},
"popLocation":function(){var $elf=this,$vars={},$r0=this._startStructure(9);$r0.value=this["_locations"].pop();return this._endStructure($r0);},
"trans":function(){var $elf=this,$vars={},$r0=this._startStructure(12);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(16);$vars.loc=this._getStructureValue(this.anything());$vars.t=this._getStructureValue(this.anything());this._pred((this[$vars.t] != undefined));this._appendStructure($r1,this._applyWithArgs("pushLocation",$vars.loc));$vars.ans=this._appendStructure($r1,this._apply($vars.t));$r1.value=this._appendStructure($r1,this._apply("popLocation"));return this._endStructure($r1);}));$r0.value=[$vars.loc].concat($vars.ans);return this._endStructure($r0);},
"optimize":function(){var $elf=this,$vars={},$r0=this._startStructure(29);$vars.x=this._appendStructure($r0,this._apply("trans"));this._appendStructure($r0,this._apply("helped"));$r0.value=$vars.x;return this._endStructure($r0);},
"App":function(){var $elf=this,$vars={},$r0=this._startStructure(36);$vars.rule=this._getStructureValue(this.anything());$vars.args=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(42);$r1.value=this._appendStructure($r1,this.anything());return this._endStructure($r1);}));$r0.value=["App",$vars.rule].concat($vars.args);return this._endStructure($r0);},
"Pred":function(){var $elf=this,$vars={},$r0=this._startStructure(46);$vars.expr=this._getStructureValue(this.anything());$r0.value=["Pred",$vars.expr];return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(49);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(54);$r1.value=this._appendStructure($r1,this._apply("trans"));return this._endStructure($r1);}));$r0.value=["Or"].concat($vars.xs);return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(58);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(63);$r1.value=this._appendStructure($r1,this._apply("trans"));return this._endStructure($r1);}));$r0.value=["XOr"].concat($vars.xs);return this._endStructure($r0);},
"And":function(){var $elf=this,$vars={},$r0=this._startStructure(67);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(72);$r1.value=this._appendStructure($r1,this._apply("trans"));return this._endStructure($r1);}));$r0.value=["And"].concat($vars.xs);return this._endStructure($r0);},
"Opt":function(){var $elf=this,$vars={},$r0=this._startStructure(76);$vars.x=this._appendStructure($r0,this._apply("trans"));$r0.value=["Opt",$vars.x];return this._endStructure($r0);},
"Many":function(){var $elf=this,$vars={},$r0=this._startStructure(81);$vars.x=this._appendStructure($r0,this._apply("trans"));$r0.value=["Many",$vars.x];return this._endStructure($r0);},
"Many1":function(){var $elf=this,$vars={},$r0=this._startStructure(86);$vars.x=this._appendStructure($r0,this._apply("trans"));$r0.value=["Many1",$vars.x];return this._endStructure($r0);},
"Set":function(){var $elf=this,$vars={},$r0=this._startStructure(91);$vars.n=this._getStructureValue(this.anything());$vars.v=this._appendStructure($r0,this._apply("trans"));$r0.value=["Set",$vars.n,$vars.v];return this._endStructure($r0);},
"Not":function(){var $elf=this,$vars={},$r0=this._startStructure(97);$vars.x=this._appendStructure($r0,this._apply("trans"));$r0.value=["Not",$vars.x];return this._endStructure($r0);},
"Lookahead":function(){var $elf=this,$vars={},$r0=this._startStructure(102);$vars.x=this._appendStructure($r0,this._apply("trans"));$r0.value=["Lookahead",$vars.x];return this._endStructure($r0);},
"Form":function(){var $elf=this,$vars={},$r0=this._startStructure(107);$vars.x=this._appendStructure($r0,this._apply("trans"));$r0.value=["Form",$vars.x];return this._endStructure($r0);},
"ConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(112);$vars.x=this._appendStructure($r0,this._apply("trans"));$r0.value=["ConsBy",$vars.x];return this._endStructure($r0);},
"IdxConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(117);$vars.x=this._appendStructure($r0,this._apply("trans"));$r0.value=["IdxConsBy",$vars.x];return this._endStructure($r0);},
"JumpTable":function(){var $elf=this,$vars={},$r0=this._startStructure(122);$vars.ces=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(127);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(131);$vars.c=this._getStructureValue(this.anything());$r2.value=($vars.e=this._appendStructure($r2,this._apply("trans")));return this._endStructure($r2);}));$r1.value=[$vars.c,$vars.e];return this._endStructure($r1);}));$r0.value=["JumpTable"].concat($vars.ces);return this._endStructure($r0);},
"Interleave":function(){var $elf=this,$vars={},$r0=this._startStructure(139);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(144);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(148);$vars.m=this._getStructureValue(this.anything());$r2.value=($vars.p=this._appendStructure($r2,this._apply("trans")));return this._endStructure($r2);}));$r1.value=[$vars.m,$vars.p];return this._endStructure($r1);}));$r0.value=["Interleave"].concat($vars.xs);return this._endStructure($r0);},
"Js":function(){var $elf=this,$vars={},$r0=this._startStructure(156);$vars.locals=this._getStructureValue(this.anything());$vars.code=this._getStructureValue(this.anything());$r0.value=["Js",$vars.locals,$vars.code];return this._endStructure($r0);},
"Location":function(){var $elf=this,$vars={},$r0=this._startStructure(160);$r0.value=["Location"];return this._endStructure($r0);},
"PopArg":function(){var $elf=this,$vars={},$r0=this._startStructure(163);$r0.value=["PopArg"];return this._endStructure($r0);},
"Rule":function(){var $elf=this,$vars={},$r0=this._startStructure(166);$vars.name=this._getStructureValue(this.anything());$vars.body=this._appendStructure($r0,this._apply("trans"));$r0.value=["Rule",$vars.name,$vars.body];return this._endStructure($r0);}});(BSNullOptimization["initialize"]=(function (){(this["_didSomething"]=false);(this["_locations"]=[]);}));(BSNullOptimization["location"]=(function (){return this["_locations"][(this["_locations"]["length"] - (1))];}));let BSAssociativeOptimization=objectThatDelegatesTo(BSNullOptimization,{
"And":function(){var $elf=this,$vars={},$r0=this._startStructure(172);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(174);$vars.x=this._appendStructure($r1,this._apply("trans"));this._appendStructure($r1,this.end());this._appendStructure($r1,this._apply("setHelped"));$r1.value=$vars.x.slice((1));return this._endStructure($r1);},function(){var $r1=this._startStructure(183);$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside","And"));$r1.value=["And"].concat($vars.xs);return this._endStructure($r1);}));return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(188);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(190);$vars.x=this._appendStructure($r1,this._apply("trans"));this._appendStructure($r1,this.end());this._appendStructure($r1,this._apply("setHelped"));$r1.value=$vars.x.slice((1));return this._endStructure($r1);},function(){var $r1=this._startStructure(199);$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside","Or"));$r1.value=["Or"].concat($vars.xs);return this._endStructure($r1);}));return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(204);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(206);$vars.x=this._appendStructure($r1,this._apply("trans"));this._appendStructure($r1,this.end());this._appendStructure($r1,this._apply("setHelped"));$r1.value=$vars.x.slice((1));return this._endStructure($r1);},function(){var $r1=this._startStructure(215);$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside","XOr"));$r1.value=["XOr"].concat($vars.xs);return this._endStructure($r1);}));return this._endStructure($r0);},
"transInside":function(){var $elf=this,$vars={},$r0=this._startStructure(220);$vars.t=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(226);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(230);$vars.l=this._getStructureValue(this.anything());this._appendStructure($r2,this.exactly($vars.t));$r2.value=($vars.xs=this._appendStructure($r2,this._applyWithArgs("transInside",$vars.t)));return this._endStructure($r2);}));$vars.ys=this._appendStructure($r1,this._applyWithArgs("transInside",$vars.t));this._appendStructure($r1,this._apply("setHelped"));$r1.value=$vars.xs.concat($vars.ys);return this._endStructure($r1);},function(){var $r1=this._startStructure(245);$vars.x=this._appendStructure($r1,this._apply("trans"));$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside",$vars.t));$r1.value=[$vars.x].concat($vars.xs);return this._endStructure($r1);},function(){var $r1=this._startStructure(253);$r1.value=[];return this._endStructure($r1);}));return this._endStructure($r0);}});let BSSeqInliner=objectThatDelegatesTo(BSNullOptimization,{
"App":function(){var $elf=this,$vars={},$r0=this._startStructure(256);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(258);this._appendStructure($r1,this.exactly("seq"));this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(264);$vars.l=this._getStructureValue(this.anything());this._appendStructure($r2,this.exactly("Js"));$vars.locals=this._getStructureValue(this.anything());$r2.value=this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(273);this._appendStructure($r3,this.exactly("string"));$r3.value=($vars.s=this._getStructureValue(this.anything()));return this._endStructure($r3);}));return this._endStructure($r2);}));this._appendStructure($r1,this.end());$vars.cs=this._appendStructure($r1,this._applyWithArgs("seqString",$vars.s));this._appendStructure($r1,this._apply("setHelped"));$r1.value=["And"].concat($vars.cs).concat([jsValue("string",$vars.s)]);return this._endStructure($r1);},function(){var $r1=this._startStructure(287);$vars.rule=this._getStructureValue(this.anything());$vars.args=this._appendStructure($r1,this._many(function(){var $r2=this._startStructure(293);$r2.value=this._appendStructure($r2,this.anything());return this._endStructure($r2);}));$r1.value=["App",$vars.rule].concat($vars.args);return this._endStructure($r1);}));return this._endStructure($r0);},
"inlineChar":function(){var $elf=this,$vars={},$r0=this._startStructure(297);$vars.c=this._appendStructure($r0,this._applyWithArgs("foreign",BSOMetaParser,"eChar"));$r0.value=[null,"App","exactly",jsValue("string",$vars.c)];return this._endStructure($r0);},
"seqString":function(){var $elf=this,$vars={},$r0=this._startStructure(302);this._appendStructure($r0,this._lookahead(function(){var $r1=this._startStructure(306);$vars.s=this._getStructureValue(this.anything());$r1.value=this._pred(((typeof $vars.s) === "string"));return this._endStructure($r1);}));this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(313);$r1.value=($vars.cs=this._appendStructure($r1,this._many(function(){var $r2=this._startStructure(319);$r2.value=this._appendStructure($r2,this._apply("inlineChar"));return this._endStructure($r2);})));return this._endStructure($r1);}));$r0.value=$vars.cs;return this._endStructure($r0);}});let JumpTable=(function (choiceOp,choice){(this["choiceOp"]=choiceOp);(this["choices"]=({}));this.add(choice);});(JumpTable["prototype"]["add"]=(function (choice){var c=choice[(0)],t=choice[(1)];if(this["choices"][c]){if((this["choices"][c][(0)] == this["choiceOp"])){this["choices"][c].push(t);}else{(this["choices"][c]=[this["choiceOp"],this["choices"][c],t]);};}else{(this["choices"][c]=t);};}));(JumpTable["prototype"]["toTree"]=(function (){var r=["JumpTable"],choiceKeys=ownPropertyNames(this["choices"]);for(var i=(0);(i < choiceKeys["length"]);(i+=(1))){r.push([choiceKeys[i],this["choices"][choiceKeys[i]]]);}return r;}));let BSJumpTableOptimization=objectThatDelegatesTo(BSNullOptimization,{
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(323);$vars.cs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(328);$r1.value=this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(332);$r2.value=this._appendStructure($r2,this._applyWithArgs("jtChoices","Or"));return this._endStructure($r2);},function(){var $r2=this._startStructure(336);$r2.value=this._appendStructure($r2,this._apply("trans"));return this._endStructure($r2);}));return this._endStructure($r1);}));$r0.value=["Or"].concat($vars.cs);return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(340);$vars.cs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(345);$r1.value=this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(349);$r2.value=this._appendStructure($r2,this._applyWithArgs("jtChoices","XOr"));return this._endStructure($r2);},function(){var $r2=this._startStructure(353);$r2.value=this._appendStructure($r2,this._apply("trans"));return this._endStructure($r2);}));return this._endStructure($r1);}));$r0.value=["XOr"].concat($vars.cs);return this._endStructure($r0);},
"quotedString":function(){var $elf=this,$vars={},$r0=this._startStructure(357);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(361);$vars.l=this._getStructureValue(this.anything());this._appendStructure($r1,this.exactly("Js"));$r1.value=this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(369);this._appendStructure($r2,this.exactly("string"));$r2.value=($vars.s=this._getStructureValue(this.anything()));return this._endStructure($r2);}));return this._endStructure($r1);}));$r0.value=$vars.s;return this._endStructure($r0);},
"jtChoice":function(){var $elf=this,$vars={},$r0=this._startStructure(376);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(378);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(382);$vars.l=this._getStructureValue(this.anything());this._appendStructure($r2,this.exactly("And"));this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(389);$vars.l1=this._getStructureValue(this.anything());this._appendStructure($r3,this.exactly("App"));this._appendStructure($r3,this.exactly("exactly"));$r3.value=($vars.x=this._appendStructure($r3,this._apply("quotedString")));return this._endStructure($r3);}));$r2.value=($vars.rest=this._appendStructure($r2,this._many(function(){var $r3=this._startStructure(406);$r3.value=this._appendStructure($r3,this.anything());return this._endStructure($r3);})));return this._endStructure($r2);}));$r1.value=[$vars.x,[$vars.l,"And"].concat($vars.rest)];return this._endStructure($r1);},function(){var $r1=this._startStructure(410);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(414);$vars.l1=this._getStructureValue(this.anything());this._appendStructure($r2,this.exactly("App"));this._appendStructure($r2,this.exactly("exactly"));$r2.value=($vars.x=this._appendStructure($r2,this._apply("quotedString")));return this._endStructure($r2);}));$r1.value=[$vars.x,jsValue("string",$vars.x)];return this._endStructure($r1);}));return this._endStructure($r0);},
"jtChoices":function(){var $elf=this,$vars={},$r0=this._startStructure(426);$vars.op=this._getStructureValue(this.anything());$vars.c=this._appendStructure($r0,this._apply("jtChoice"));$vars.jt=new JumpTable($vars.op,$vars.c);this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(435);$vars.c=this._appendStructure($r1,this._apply("jtChoice"));$r1.value=$vars.jt.add($vars.c);return this._endStructure($r1);}));this._appendStructure($r0,this._apply("setHelped"));$r0.value=$vars.jt.toTree();return this._endStructure($r0);}});let BSFunctionOptimization=objectThatDelegatesTo(GenericMatcher,{
"optimize":function(){var $elf=this,$vars={},$r0=this._startStructure(442);$vars.x=this._appendStructure($r0,this._apply("trans"));$r0.value=$vars.x;return this._endStructure($r0);},
"pushLocation":function(){var $elf=this,$vars={},$r0=this._startStructure(447);$vars.loc=this._getStructureValue(this.anything());$r0.value=this["_locations"].push($vars.loc);return this._endStructure($r0);},
"popLocation":function(){var $elf=this,$vars={},$r0=this._startStructure(450);$r0.value=this["_locations"].pop();return this._endStructure($r0);},
"trans":function(){var $elf=this,$vars={},$r0=this._startStructure(453);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(457);$vars.loc=this._getStructureValue(this.anything());$vars.t=this._getStructureValue(this.anything());this._pred((this[$vars.t] != undefined));this._appendStructure($r1,this._applyWithArgs("pushLocation",$vars.loc));$vars.ans=this._appendStructure($r1,this._apply($vars.t));$r1.value=this._appendStructure($r1,this._apply("popLocation"));return this._endStructure($r1);}));$r0.value=[$vars.loc].concat($vars.ans);return this._endStructure($r0);},
"andReturn":function(){var $elf=this,$vars={},$r0=this._startStructure(470);$vars.l=this._getStructureValue(this.anything());$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(476);$r1.value=this._appendStructure($r1,this._applyWithArgs("notLast","storeSomething"));return this._endStructure($r1);}));$vars.y=this._appendStructure($r0,this._apply("storeSomethingThatReturns"));$r0.value=[$vars.l,"And"].concat($vars.xs.concat([$vars.y]));return this._endStructure($r0);},
"somethingThatReturns":function(){var $elf=this,$vars={},$r0=this._startStructure(483);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(485);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(489);$vars.l=this._getStructureValue(this.anything());this._appendStructure($r2,this.exactly("And"));$r2.value=($vars.ans=this._appendStructure($r2,this._applyWithArgs("andReturn",$vars.l)));return this._endStructure($r2);}));$r1.value=$vars.ans;return this._endStructure($r1);},function(){var $r1=this._startStructure(499);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(503);$vars.l=this._getStructureValue(this.anything());this._appendStructure($r2,this.exactly("And"));$r2.value=this._appendStructure($r2,this.end());return this._endStructure($r2);}));$r1.value=[$vars.l,"ReturnStructure",[$vars.l,"And"]];return this._endStructure($r1);},function(){var $r1=this._startStructure(511);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(515);$vars.l=this._getStructureValue(this.anything());$vars.t=this._appendStructure($r2,this._apply("generatesStructure"));$r2.value=($vars.ans=this._appendStructure($r2,this._apply($vars.t)));return this._endStructure($r2);}));$r1.value=[$vars.l,"ReturnStructure",[$vars.l,"Store",[$vars.l].concat($vars.ans)]];return this._endStructure($r1);},function(){var $r1=this._startStructure(526);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(530);$vars.l=this._getStructureValue(this.anything());this._appendStructure($r2,this.exactly("Set"));$r2.value=($vars.ans=this._appendStructure($r2,this._apply("Set")));return this._endStructure($r2);}));$r1.value=[$vars.l,"ReturnStructure",[$vars.l,"Parenthesis",[$vars.l].concat($vars.ans)]];return this._endStructure($r1);},function(){var $r1=this._startStructure(540);$vars.x=this._appendStructure($r1,this._apply("trans"));$r1.value=[$vars.l,"ReturnStructure",$vars.x];return this._endStructure($r1);}));return this._endStructure($r0);},
"generatesStructure":function(){var $elf=this,$vars={},$r0=this._startStructure(545);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(547);$r1.value=this._appendStructure($r1,this.exactly("Or"));return this._endStructure($r1);},function(){var $r1=this._startStructure(551);$r1.value=this._appendStructure($r1,this.exactly("XOr"));return this._endStructure($r1);},function(){var $r1=this._startStructure(555);$r1.value=this._appendStructure($r1,this.exactly("Opt"));return this._endStructure($r1);},function(){var $r1=this._startStructure(559);$r1.value=this._appendStructure($r1,this.exactly("Many"));return this._endStructure($r1);},function(){var $r1=this._startStructure(563);$r1.value=this._appendStructure($r1,this.exactly("Many1"));return this._endStructure($r1);},function(){var $r1=this._startStructure(567);$r1.value=this._appendStructure($r1,this.exactly("Not"));return this._endStructure($r1);},function(){var $r1=this._startStructure(571);$r1.value=this._appendStructure($r1,this.exactly("Lookahead"));return this._endStructure($r1);},function(){var $r1=this._startStructure(575);$r1.value=this._appendStructure($r1,this.exactly("Form"));return this._endStructure($r1);},function(){var $r1=this._startStructure(579);$r1.value=this._appendStructure($r1,this.exactly("ConsBy"));return this._endStructure($r1);},function(){var $r1=this._startStructure(583);$r1.value=this._appendStructure($r1,this.exactly("IdxConsBy"));return this._endStructure($r1);},function(){var $r1=this._startStructure(587);$r1.value=this._appendStructure($r1,this.exactly("App"));return this._endStructure($r1);},function(){var $r1=this._startStructure(591);$r1.value=this._appendStructure($r1,this.exactly("JumpTable"));return this._endStructure($r1);},function(){var $r1=this._startStructure(595);$r1.value=this._appendStructure($r1,this.exactly("Interleave"));return this._endStructure($r1);}));return this._endStructure($r0);},
"somethingThatCanPass":function(){var $elf=this,$vars={},$r0=this._startStructure(599);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(603);$vars.loc=this._getStructureValue(this.anything());$vars.t=this._appendStructure($r1,this._apply("generatesStructure"));this._pred((this[$vars.t] != undefined));this._appendStructure($r1,this._applyWithArgs("pushLocation",$vars.loc));$vars.ans=this._appendStructure($r1,this._apply($vars.t));$r1.value=this._appendStructure($r1,this._apply("popLocation"));return this._endStructure($r1);}));$r0.value=[$vars.loc].concat($vars.ans);return this._endStructure($r0);},
"storeSomething":function(){var $elf=this,$vars={},$r0=this._startStructure(618);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(620);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(624);$vars.loc=this._getStructureValue(this.anything());$vars.t=this._appendStructure($r2,this._apply("generatesStructure"));this._pred((this[$vars.t] != undefined));this._appendStructure($r2,this._applyWithArgs("pushLocation",$vars.loc));$vars.ans=this._appendStructure($r2,this._apply($vars.t));$r2.value=this._appendStructure($r2,this._apply("popLocation"));return this._endStructure($r2);}));$r1.value=[$vars.loc,"Store",[$vars.loc].concat($vars.ans)];return this._endStructure($r1);},function(){var $r1=this._startStructure(639);$r1.value=($vars.x=this._appendStructure($r1,this._apply("trans")));return this._endStructure($r1);}));return this._endStructure($r0);},
"storeSomethingThatReturns":function(){var $elf=this,$vars={},$r0=this._startStructure(645);$r0.value=($vars.x=this._appendStructure($r0,this._apply("somethingThatReturns")));return this._endStructure($r0);},
"functioned":function(){var $elf=this,$vars={},$r0=this._startStructure(651);$vars.x=this._appendStructure($r0,this._apply("storeSomethingThatReturns"));$r0.value=[$vars.x[(0)],"FunctionStructure",$vars.x];return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(656);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(661);$r1.value=this._appendStructure($r1,this._apply("functioned"));return this._endStructure($r1);}));$r0.value=["Or"].concat($vars.xs);return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(665);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(670);$r1.value=this._appendStructure($r1,this._apply("functioned"));return this._endStructure($r1);}));$r0.value=["XOr"].concat($vars.xs);return this._endStructure($r0);},
"Opt":function(){var $elf=this,$vars={},$r0=this._startStructure(674);$vars.x=this._appendStructure($r0,this._apply("functioned"));$r0.value=["Opt",$vars.x];return this._endStructure($r0);},
"Many":function(){var $elf=this,$vars={},$r0=this._startStructure(679);$vars.x=this._appendStructure($r0,this._apply("functioned"));$r0.value=["Many",$vars.x];return this._endStructure($r0);},
"Many1":function(){var $elf=this,$vars={},$r0=this._startStructure(684);$vars.x=this._appendStructure($r0,this._apply("functioned"));$r0.value=["Many1",$vars.x];return this._endStructure($r0);},
"Not":function(){var $elf=this,$vars={},$r0=this._startStructure(689);$vars.x=this._appendStructure($r0,this._apply("functioned"));$r0.value=["Not",$vars.x];return this._endStructure($r0);},
"Lookahead":function(){var $elf=this,$vars={},$r0=this._startStructure(694);$vars.x=this._appendStructure($r0,this._apply("functioned"));$r0.value=["Lookahead",$vars.x];return this._endStructure($r0);},
"Form":function(){var $elf=this,$vars={},$r0=this._startStructure(699);$vars.x=this._appendStructure($r0,this._apply("functioned"));$r0.value=["Form",$vars.x];return this._endStructure($r0);},
"ConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(704);$vars.x=this._appendStructure($r0,this._apply("functioned"));$r0.value=["ConsBy",$vars.x];return this._endStructure($r0);},
"IdxConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(709);$vars.x=this._appendStructure($r0,this._apply("functioned"));$r0.value=["IdxConsBy",$vars.x];return this._endStructure($r0);},
"App":function(){var $elf=this,$vars={},$r0=this._startStructure(714);$vars.rule=this._getStructureValue(this.anything());$vars.args=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(720);$r1.value=this._appendStructure($r1,this._apply("trans"));return this._endStructure($r1);}));$r0.value=["App",$vars.rule].concat($vars.args);return this._endStructure($r0);},
"JumpTable":function(){var $elf=this,$vars={},$r0=this._startStructure(724);$vars.ces=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(729);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(733);$vars.c=this._getStructureValue(this.anything());$r2.value=($vars.e=this._appendStructure($r2,this._apply("somethingThatReturns")));return this._endStructure($r2);}));$r1.value=[$vars.c,$vars.e];return this._endStructure($r1);}));$r0.value=["JumpTable"].concat($vars.ces);return this._endStructure($r0);},
"Interleave":function(){var $elf=this,$vars={},$r0=this._startStructure(741);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(746);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(750);$vars.m=this._getStructureValue(this.anything());$r2.value=($vars.p=this._appendStructure($r2,this._apply("functioned")));return this._endStructure($r2);}));$r1.value=[$vars.m,$vars.p];return this._endStructure($r1);}));$r0.value=["Interleave"].concat($vars.xs);return this._endStructure($r0);},
"Pred":function(){var $elf=this,$vars={},$r0=this._startStructure(758);$vars.expr=this._getStructureValue(this.anything());$r0.value=["Pred",$vars.expr];return this._endStructure($r0);},
"Set":function(){var $elf=this,$vars={},$r0=this._startStructure(761);$vars.n=this._getStructureValue(this.anything());$vars.v=this._appendStructure($r0,this._apply("storeSomething"));$r0.value=["Set",$vars.n,$vars.v];return this._endStructure($r0);},
"Js":function(){var $elf=this,$vars={},$r0=this._startStructure(767);$vars.locals=this._getStructureValue(this.anything());$vars.code=this._getStructureValue(this.anything());$r0.value=["Js",$vars.locals,$vars.code];return this._endStructure($r0);},
"Location":function(){var $elf=this,$vars={},$r0=this._startStructure(771);$r0.value=["Location"];return this._endStructure($r0);},
"PopArg":function(){var $elf=this,$vars={},$r0=this._startStructure(774);$r0.value=["PopArg"];return this._endStructure($r0);},
"Rule":function(){var $elf=this,$vars={},$r0=this._startStructure(777);$vars.name=this._getStructureValue(this.anything());$vars.body=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(783);$vars.b=this._appendStructure($r1,this._apply("somethingThatCanPass"));$r1.value=[null,"ReturnStructure",[null,"Store",$vars.b]];return this._endStructure($r1);},function(){var $r1=this._startStructure(788);$r1.value=this._appendStructure($r1,this._apply("somethingThatReturns"));return this._endStructure($r1);}));$r0.value=["Rule",$vars.name,$vars.body];return this._endStructure($r0);}});(BSFunctionOptimization["initialize"]=(function (){(this["_locations"]=[]);}));(BSFunctionOptimization["location"]=(function (){return this["_locations"][(this["_locations"]["length"] - (1))];}));let BSOMetaOptimizer=objectThatDelegatesTo(OMeta,{
"optimizeGrammar":function(){var $elf=this,$vars={},$r0=this._startStructure(792);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(796);this._appendStructure($r1,this.exactly("Grammar"));$vars.sn=this._getStructureValue(this.anything());$r1.value=($vars.rs=this._appendStructure($r1,this._many(function(){var $r2=this._startStructure(806);$r2.value=this._appendStructure($r2,this._apply("optimizeRule"));return this._endStructure($r2);})));return this._endStructure($r1);}));$r0.value=["Grammar",$vars.sn].concat($vars.rs);return this._endStructure($r0);},
"optimizeRule":function(){var $elf=this,$vars={},$r0=this._startStructure(810);$vars.r=this._getStructureValue(this.anything());this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(815);$r1.value=($vars.r=this._appendStructure($r1,this._applyWithArgs("foreign",BSSeqInliner,"optimize",$vars.r)));return this._endStructure($r1);},function(){var $r1=this._startStructure(821);$r1.value=this._appendStructure($r1,this._apply("empty"));return this._endStructure($r1);}));this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(827);$r1.value=this._appendStructure($r1,this._or(function(){var $r2=this._startStructure(831);$r2.value=($vars.r=this._appendStructure($r2,this._applyWithArgs("foreign",BSAssociativeOptimization,"optimize",$vars.r)));return this._endStructure($r2);},function(){var $r2=this._startStructure(837);$r2.value=($vars.r=this._appendStructure($r2,this._applyWithArgs("foreign",BSJumpTableOptimization,"optimize",$vars.r)));return this._endStructure($r2);}));return this._endStructure($r1);}));$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSFunctionOptimization,"optimize",$vars.r));$r0.value=$vars.r;return this._endStructure($r0);}})


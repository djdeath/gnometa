// This file was generated using Gnometa
// https://github.com/djdeath/gnometa
let BSNullOptimization=objectThatDelegatesTo(OMeta,{
"setHelped":function(){var $elf=this,$vars={},$r0=this._startStructure(0);$r0.value=(this["_didSomething"]=true);return this._endStructure($r0);},
"helped":function(){var $elf=this,$vars={},$r0=this._startStructure(2);$r0.value=this._pred(this["_didSomething"]);return this._endStructure($r0);},
"pushLocation":function(){var $elf=this,$vars={},$r0=this._startStructure(4);$vars.loc=this._getStructureValue(this.anything());$r0.value=this["_locations"].push($vars.loc);return this._endStructure($r0);},
"popLocation":function(){var $elf=this,$vars={},$r0=this._startStructure(7);$r0.value=this["_locations"].pop();return this._endStructure($r0);},
"trans":function(){var $elf=this,$vars={},$r0=this._startStructure(9);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(13);$vars.loc=this._getStructureValue(this.anything());$vars.t=this._getStructureValue(this.anything());this._pred((this[$vars.t] != undefined));this._appendStructure($r1,this._applyWithArgs("pushLocation",$vars.loc),18);$vars.ans=this._appendStructure($r1,this._apply($vars.t),21);$r1.value=this._appendStructure($r1,this._apply("popLocation"),23);return this._endStructure($r1);}),11);$r0.value=[$vars.loc].concat($vars.ans);return this._endStructure($r0);},
"optimize":function(){var $elf=this,$vars={},$r0=this._startStructure(25);$vars.x=this._appendStructure($r0,this._apply("trans"),28);this._appendStructure($r0,this._apply("helped"),30);$r0.value=$vars.x;return this._endStructure($r0);},
"App":function(){var $elf=this,$vars={},$r0=this._startStructure(32);$vars.rule=this._getStructureValue(this.anything());$vars.args=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this.anything(),38);}),36);$r0.value=["App",$vars.rule].concat($vars.args);return this._endStructure($r0);},
"Pred":function(){var $elf=this,$vars={},$r0=this._startStructure(40);$vars.expr=this._getStructureValue(this.anything());$r0.value=["Pred",$vars.expr];return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(43);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("trans"),48);}),46);$r0.value=["Or"].concat($vars.xs);return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(50);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("trans"),55);}),53);$r0.value=["XOr"].concat($vars.xs);return this._endStructure($r0);},
"And":function(){var $elf=this,$vars={},$r0=this._startStructure(57);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("trans"),62);}),60);$r0.value=["And"].concat($vars.xs);return this._endStructure($r0);},
"Opt":function(){var $elf=this,$vars={},$r0=this._startStructure(64);$vars.x=this._appendStructure($r0,this._apply("trans"),67);$r0.value=["Opt",$vars.x];return this._endStructure($r0);},
"Many":function(){var $elf=this,$vars={},$r0=this._startStructure(69);$vars.x=this._appendStructure($r0,this._apply("trans"),72);$r0.value=["Many",$vars.x];return this._endStructure($r0);},
"Many1":function(){var $elf=this,$vars={},$r0=this._startStructure(74);$vars.x=this._appendStructure($r0,this._apply("trans"),77);$r0.value=["Many1",$vars.x];return this._endStructure($r0);},
"Set":function(){var $elf=this,$vars={},$r0=this._startStructure(79);$vars.n=this._getStructureValue(this.anything());$vars.v=this._appendStructure($r0,this._apply("trans"),83);$r0.value=["Set",$vars.n,$vars.v];return this._endStructure($r0);},
"Not":function(){var $elf=this,$vars={},$r0=this._startStructure(85);$vars.x=this._appendStructure($r0,this._apply("trans"),88);$r0.value=["Not",$vars.x];return this._endStructure($r0);},
"Lookahead":function(){var $elf=this,$vars={},$r0=this._startStructure(90);$vars.x=this._appendStructure($r0,this._apply("trans"),93);$r0.value=["Lookahead",$vars.x];return this._endStructure($r0);},
"Form":function(){var $elf=this,$vars={},$r0=this._startStructure(95);$vars.x=this._appendStructure($r0,this._apply("trans"),98);$r0.value=["Form",$vars.x];return this._endStructure($r0);},
"ConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(100);$vars.x=this._appendStructure($r0,this._apply("trans"),103);$r0.value=["ConsBy",$vars.x];return this._endStructure($r0);},
"IdxConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(105);$vars.x=this._appendStructure($r0,this._apply("trans"),108);$r0.value=["IdxConsBy",$vars.x];return this._endStructure($r0);},
"JumpTable":function(){var $elf=this,$vars={},$r0=this._startStructure(110);$vars.ces=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(115);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(119);$vars.c=this._getStructureValue(this.anything());$r2.value=($vars.e=this._appendStructure($r2,this._apply("trans"),124));return this._endStructure($r2);}),117);$r1.value=[$vars.c,$vars.e];return this._endStructure($r1);}),113);$r0.value=["JumpTable"].concat($vars.ces);return this._endStructure($r0);},
"Interleave":function(){var $elf=this,$vars={},$r0=this._startStructure(126);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(131);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(135);$vars.m=this._getStructureValue(this.anything());$r2.value=($vars.p=this._appendStructure($r2,this._apply("trans"),140));return this._endStructure($r2);}),133);$r1.value=[$vars.m,$vars.p];return this._endStructure($r1);}),129);$r0.value=["Interleave"].concat($vars.xs);return this._endStructure($r0);},
"Js":function(){var $elf=this,$vars={},$r0=this._startStructure(142);$vars.locals=this._getStructureValue(this.anything());$vars.code=this._getStructureValue(this.anything());$r0.value=["Js",$vars.locals,$vars.code];return this._endStructure($r0);},
"Location":function(){var $elf=this,$vars={},$r0=this._startStructure(146);$r0.value=["Location"];return this._endStructure($r0);},
"PopArg":function(){var $elf=this,$vars={},$r0=this._startStructure(148);$r0.value=["PopArg"];return this._endStructure($r0);},
"Rule":function(){var $elf=this,$vars={},$r0=this._startStructure(150);$vars.name=this._getStructureValue(this.anything());$vars.body=this._appendStructure($r0,this._apply("trans"),154);$r0.value=["Rule",$vars.name,$vars.body];return this._endStructure($r0);}});(BSNullOptimization["initialize"]=(function (){(this["_didSomething"]=false);(this["_locations"]=[]);}));(BSNullOptimization["location"]=(function (){return this["_locations"][(this["_locations"]["length"] - (1))];}));let BSAssociativeOptimization=objectThatDelegatesTo(BSNullOptimization,{
"And":function(){var $elf=this,$vars={},$r0=this._startStructure(156);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(159);$vars.x=this._appendStructure($r1,this._apply("trans"),162);this._appendStructure($r1,this.end(),164);this._appendStructure($r1,this._apply("setHelped"),166);$r1.value=$vars.x.slice((1));return this._endStructure($r1);},function(){var $r1=this._startStructure(168);$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside","And"),171);$r1.value=["And"].concat($vars.xs);return this._endStructure($r1);}),157);return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(173);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(176);$vars.x=this._appendStructure($r1,this._apply("trans"),179);this._appendStructure($r1,this.end(),181);this._appendStructure($r1,this._apply("setHelped"),183);$r1.value=$vars.x.slice((1));return this._endStructure($r1);},function(){var $r1=this._startStructure(185);$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside","Or"),188);$r1.value=["Or"].concat($vars.xs);return this._endStructure($r1);}),174);return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(190);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(193);$vars.x=this._appendStructure($r1,this._apply("trans"),196);this._appendStructure($r1,this.end(),198);this._appendStructure($r1,this._apply("setHelped"),200);$r1.value=$vars.x.slice((1));return this._endStructure($r1);},function(){var $r1=this._startStructure(202);$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside","XOr"),205);$r1.value=["XOr"].concat($vars.xs);return this._endStructure($r1);}),191);return this._endStructure($r0);},
"transInside":function(){var $elf=this,$vars={},$r0=this._startStructure(207);$vars.t=this._getStructureValue(this.anything());$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(212);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(216);$vars.l=this._getStructureValue(this.anything());this._appendStructure($r2,this.exactly($vars.t),219);$r2.value=($vars.xs=this._appendStructure($r2,this._applyWithArgs("transInside",$vars.t),223));return this._endStructure($r2);}),214);$vars.ys=this._appendStructure($r1,this._applyWithArgs("transInside",$vars.t),226);this._appendStructure($r1,this._apply("setHelped"),228);$r1.value=$vars.xs.concat($vars.ys);return this._endStructure($r1);},function(){var $r1=this._startStructure(230);$vars.x=this._appendStructure($r1,this._apply("trans"),233);$vars.xs=this._appendStructure($r1,this._applyWithArgs("transInside",$vars.t),236);$r1.value=[$vars.x].concat($vars.xs);return this._endStructure($r1);},function(){var $r1=this._startStructure(211);$r1.value=[];return this._endStructure($r1);}),210);return this._endStructure($r0);}});let BSSeqInliner=objectThatDelegatesTo(BSNullOptimization,{
"App":function(){var $elf=this,$vars={},$r0=this._startStructure(239);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(242);this._appendStructure($r1,this.exactly("seq"),244);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(248);$vars.l=this._getStructureValue(this.anything());this._appendStructure($r2,this.exactly("Js"),251);$vars.locals=this._getStructureValue(this.anything());$r2.value=this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(256);this._appendStructure($r3,this.exactly("string"),258);$r3.value=($vars.s=this._getStructureValue(this.anything()));return this._endStructure($r3);}),254);return this._endStructure($r2);}),246);this._appendStructure($r1,this.end(),262);$vars.cs=this._appendStructure($r1,this._applyWithArgs("seqString",$vars.s),265);this._appendStructure($r1,this._apply("setHelped"),267);$r1.value=["And"].concat($vars.cs).concat([jsValue("string",$vars.s)]);return this._endStructure($r1);},function(){var $r1=this._startStructure(269);$vars.rule=this._getStructureValue(this.anything());$vars.args=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this.anything(),275);}),273);$r1.value=["App",$vars.rule].concat($vars.args);return this._endStructure($r1);}),240);return this._endStructure($r0);},
"inlineChar":function(){var $elf=this,$vars={},$r0=this._startStructure(277);$vars.c=this._appendStructure($r0,this._applyWithArgs("foreign",BSOMetaParser,"eChar"),280);$r0.value=[null,"App","exactly",jsValue("string",$vars.c)];return this._endStructure($r0);},
"seqString":function(){var $elf=this,$vars={},$r0=this._startStructure(282);this._appendStructure($r0,this._lookahead(function(){var $r1=this._startStructure(286);$vars.s=this._getStructureValue(this.anything());$r1.value=this._pred(((typeof $vars.s) === "string"));return this._endStructure($r1);}),284);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(291);$r1.value=($vars.cs=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("inlineChar"),296);}),294));return this._endStructure($r1);}),290);$r0.value=$vars.cs;return this._endStructure($r0);}});let JumpTable=(function (choiceOp,choice){(this["choiceOp"]=choiceOp);(this["choices"]=({}));this.add(choice);});(JumpTable["prototype"]["add"]=(function (choice){var c=choice[(0)],t=choice[(1)];if(this["choices"][c]){if((this["choices"][c][(0)] == this["choiceOp"])){this["choices"][c].push(t);}else{(this["choices"][c]=[this["choiceOp"],this["choices"][c],t]);};}else{(this["choices"][c]=t);};}));(JumpTable["prototype"]["toTree"]=(function (){var r=["JumpTable"],choiceKeys=ownPropertyNames(this["choices"]);for(var i=(0);(i < choiceKeys["length"]);(i+=(1))){r.push([choiceKeys[i],this["choices"][choiceKeys[i]]]);}return r;}));let BSJumpTableOptimization=objectThatDelegatesTo(BSNullOptimization,{
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(298);$vars.cs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._or(function(){return this._forwardStructure(this._applyWithArgs("jtChoices","Or"),305);},function(){return this._forwardStructure(this._apply("trans"),307);}),303);}),301);$r0.value=["Or"].concat($vars.cs);return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(309);$vars.cs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._or(function(){return this._forwardStructure(this._applyWithArgs("jtChoices","XOr"),316);},function(){return this._forwardStructure(this._apply("trans"),318);}),314);}),312);$r0.value=["XOr"].concat($vars.cs);return this._endStructure($r0);},
"quotedString":function(){var $elf=this,$vars={},$r0=this._startStructure(320);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(324);$vars.l=this._getStructureValue(this.anything());this._appendStructure($r1,this.exactly("Js"),327);$r1.value=this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(331);this._appendStructure($r2,this.exactly("string"),333);$r2.value=($vars.s=this._getStructureValue(this.anything()));return this._endStructure($r2);}),329);return this._endStructure($r1);}),322);$r0.value=$vars.s;return this._endStructure($r0);},
"jtChoice":function(){var $elf=this,$vars={},$r0=this._startStructure(337);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(340);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(344);$vars.l=this._getStructureValue(this.anything());this._appendStructure($r2,this.exactly("And"),347);this._appendStructure($r2,this._form(function(){var $r3=this._startStructure(351);$vars.l1=this._getStructureValue(this.anything());this._appendStructure($r3,this.exactly("App"),354);this._appendStructure($r3,this.exactly("exactly"),356);$r3.value=($vars.x=this._appendStructure($r3,this._apply("quotedString"),360));return this._endStructure($r3);}),349);$r2.value=($vars.rest=this._appendStructure($r2,this._many(function(){return this._forwardStructure(this.anything(),366);}),364));return this._endStructure($r2);}),342);$r1.value=[$vars.x,[$vars.l,"And"].concat($vars.rest)];return this._endStructure($r1);},function(){var $r1=this._startStructure(368);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(372);$vars.l1=this._getStructureValue(this.anything());this._appendStructure($r2,this.exactly("App"),375);this._appendStructure($r2,this.exactly("exactly"),377);$r2.value=($vars.x=this._appendStructure($r2,this._apply("quotedString"),381));return this._endStructure($r2);}),370);$r1.value=[$vars.x,jsValue("string",$vars.x)];return this._endStructure($r1);}),338);return this._endStructure($r0);},
"jtChoices":function(){var $elf=this,$vars={},$r0=this._startStructure(383);$vars.op=this._getStructureValue(this.anything());$vars.c=this._appendStructure($r0,this._apply("jtChoice"),387);$vars.jt=new JumpTable($vars.op,$vars.c);this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(392);$vars.c=this._appendStructure($r1,this._apply("jtChoice"),395);$r1.value=$vars.jt.add($vars.c);return this._endStructure($r1);}),390);this._appendStructure($r0,this._apply("setHelped"),397);$r0.value=$vars.jt.toTree();return this._endStructure($r0);}});let BSFunctionOptimization=objectThatDelegatesTo(GenericMatcher,{
"optimize":function(){var $elf=this,$vars={},$r0=this._startStructure(399);$vars.x=this._appendStructure($r0,this._apply("trans"),402);$r0.value=$vars.x;return this._endStructure($r0);},
"pushLocation":function(){var $elf=this,$vars={},$r0=this._startStructure(404);$vars.loc=this._getStructureValue(this.anything());$r0.value=this["_locations"].push($vars.loc);return this._endStructure($r0);},
"popLocation":function(){var $elf=this,$vars={},$r0=this._startStructure(407);$r0.value=this["_locations"].pop();return this._endStructure($r0);},
"trans":function(){var $elf=this,$vars={},$r0=this._startStructure(409);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(413);$vars.loc=this._getStructureValue(this.anything());$vars.t=this._getStructureValue(this.anything());this._pred((this[$vars.t] != undefined));this._appendStructure($r1,this._applyWithArgs("pushLocation",$vars.loc),418);$vars.ans=this._appendStructure($r1,this._apply($vars.t),421);$r1.value=this._appendStructure($r1,this._apply("popLocation"),423);return this._endStructure($r1);}),411);$r0.value=[$vars.loc].concat($vars.ans);return this._endStructure($r0);},
"andReturn":function(){var $elf=this,$vars={},$r0=this._startStructure(425);$vars.l=this._getStructureValue(this.anything());$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._applyWithArgs("notLast","storeSomething"),431);}),429);$vars.y=this._appendStructure($r0,this._apply("storeSomethingThatReturns"),434);$r0.value=[$vars.l,"And"].concat($vars.xs.concat([$vars.y]));return this._endStructure($r0);},
"somethingThatReturns":function(){var $elf=this,$vars={},$r0=this._startStructure(436);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(439);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(443);$vars.l=this._getStructureValue(this.anything());this._appendStructure($r2,this.exactly("And"),446);$r2.value=($vars.ans=this._appendStructure($r2,this._applyWithArgs("andReturn",$vars.l),450));return this._endStructure($r2);}),441);$r1.value=$vars.ans;return this._endStructure($r1);},function(){var $r1=this._startStructure(452);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(456);$vars.l=this._getStructureValue(this.anything());this._appendStructure($r2,this.exactly("And"),459);$r2.value=this._appendStructure($r2,this.end(),461);return this._endStructure($r2);}),454);$r1.value=[null,"ReturnStructure",[$vars.l,"And"]];return this._endStructure($r1);},function(){var $r1=this._startStructure(463);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(467);$vars.l=this._getStructureValue(this.anything());$vars.t=this._appendStructure($r2,this._apply("generatesStructure"),471);$r2.value=($vars.ans=this._appendStructure($r2,this._apply($vars.t),475));return this._endStructure($r2);}),465);$r1.value=[null,"ReturnStructure",[$vars.l,"Store",[$vars.l].concat($vars.ans)]];return this._endStructure($r1);},function(){var $r1=this._startStructure(477);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(481);$vars.l=this._getStructureValue(this.anything());this._appendStructure($r2,this.exactly("Set"),484);$r2.value=($vars.ans=this._appendStructure($r2,this._apply("Set"),488));return this._endStructure($r2);}),479);$r1.value=[null,"ReturnStructure",[$vars.l,"Parenthesis",[$vars.l].concat($vars.ans)]];return this._endStructure($r1);},function(){var $r1=this._startStructure(490);$vars.x=this._appendStructure($r1,this._apply("trans"),493);$r1.value=[null,"ReturnStructure",$vars.x];return this._endStructure($r1);}),437);return this._endStructure($r0);},
"generatesStructure":function(){var $elf=this,$vars={},$r0=this._startStructure(495);$r0.value=this._appendStructure($r0,this._or(function(){return this._forwardStructure(this.exactly("Or"),498);},function(){return this._forwardStructure(this.exactly("XOr"),500);},function(){return this._forwardStructure(this.exactly("Opt"),502);},function(){return this._forwardStructure(this.exactly("Many"),504);},function(){return this._forwardStructure(this.exactly("Many1"),506);},function(){return this._forwardStructure(this.exactly("Not"),508);},function(){return this._forwardStructure(this.exactly("Lookahead"),510);},function(){return this._forwardStructure(this.exactly("Form"),512);},function(){return this._forwardStructure(this.exactly("ConsBy"),514);},function(){return this._forwardStructure(this.exactly("IdxConsBy"),516);},function(){return this._forwardStructure(this.exactly("App"),518);},function(){return this._forwardStructure(this.exactly("JumpTable"),520);},function(){return this._forwardStructure(this.exactly("Interleave"),522);}),496);return this._endStructure($r0);},
"somethingThatCanPass":function(){var $elf=this,$vars={},$r0=this._startStructure(524);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(528);$vars.loc=this._getStructureValue(this.anything());$vars.t=this._appendStructure($r1,this._apply("generatesStructure"),532);this._pred((this[$vars.t] != undefined));this._appendStructure($r1,this._applyWithArgs("pushLocation",$vars.loc),535);$vars.ans=this._appendStructure($r1,this._apply($vars.t),538);$r1.value=this._appendStructure($r1,this._apply("popLocation"),540);return this._endStructure($r1);}),526);$r0.value=[$vars.loc].concat($vars.ans);return this._endStructure($r0);},
"storeSomething":function(){var $elf=this,$vars={},$r0=this._startStructure(542);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(545);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(549);$vars.loc=this._getStructureValue(this.anything());$vars.t=this._appendStructure($r2,this._apply("generatesStructure"),553);this._pred((this[$vars.t] != undefined));this._appendStructure($r2,this._applyWithArgs("pushLocation",$vars.loc),556);$vars.ans=this._appendStructure($r2,this._apply($vars.t),559);$r2.value=this._appendStructure($r2,this._apply("popLocation"),561);return this._endStructure($r2);}),547);$r1.value=[$vars.loc,"Store",[$vars.loc].concat($vars.ans)];return this._endStructure($r1);},function(){var $r1=this._startStructure(544);$r1.value=($vars.x=this._appendStructure($r1,this._apply("trans"),565));return this._endStructure($r1);}),543);return this._endStructure($r0);},
"storeSomethingThatReturns":function(){var $elf=this,$vars={},$r0=this._startStructure(567);$r0.value=($vars.x=this._appendStructure($r0,this._apply("somethingThatReturns"),570));return this._endStructure($r0);},
"functioned":function(){var $elf=this,$vars={},$r0=this._startStructure(572);$r0.value=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(575);$vars.x=this._appendStructure($r1,this._apply("somethingThatCanPass"),578);$r1.value=[$vars.x[(0)],"Function",[null,"Return",$vars.x]];return this._endStructure($r1);},function(){var $r1=this._startStructure(580);$vars.x=this._appendStructure($r1,this._apply("storeSomethingThatReturns"),583);$r1.value=[$vars.x[(0)],"FunctionStructure",$vars.x];return this._endStructure($r1);}),573);return this._endStructure($r0);},
"Or":function(){var $elf=this,$vars={},$r0=this._startStructure(585);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("functioned"),590);}),588);$r0.value=["Or"].concat($vars.xs);return this._endStructure($r0);},
"XOr":function(){var $elf=this,$vars={},$r0=this._startStructure(592);$vars.xs=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("functioned"),597);}),595);$r0.value=["XOr"].concat($vars.xs);return this._endStructure($r0);},
"Opt":function(){var $elf=this,$vars={},$r0=this._startStructure(599);$vars.x=this._appendStructure($r0,this._apply("functioned"),602);$r0.value=["Opt",$vars.x];return this._endStructure($r0);},
"Many":function(){var $elf=this,$vars={},$r0=this._startStructure(604);$vars.x=this._appendStructure($r0,this._apply("functioned"),607);$r0.value=["Many",$vars.x];return this._endStructure($r0);},
"Many1":function(){var $elf=this,$vars={},$r0=this._startStructure(609);$vars.x=this._appendStructure($r0,this._apply("functioned"),612);$r0.value=["Many1",$vars.x];return this._endStructure($r0);},
"Not":function(){var $elf=this,$vars={},$r0=this._startStructure(614);$vars.x=this._appendStructure($r0,this._apply("functioned"),617);$r0.value=["Not",$vars.x];return this._endStructure($r0);},
"Lookahead":function(){var $elf=this,$vars={},$r0=this._startStructure(619);$vars.x=this._appendStructure($r0,this._apply("functioned"),622);$r0.value=["Lookahead",$vars.x];return this._endStructure($r0);},
"Form":function(){var $elf=this,$vars={},$r0=this._startStructure(624);$vars.x=this._appendStructure($r0,this._apply("functioned"),627);$r0.value=["Form",$vars.x];return this._endStructure($r0);},
"ConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(629);$vars.x=this._appendStructure($r0,this._apply("functioned"),632);$r0.value=["ConsBy",$vars.x];return this._endStructure($r0);},
"IdxConsBy":function(){var $elf=this,$vars={},$r0=this._startStructure(634);$vars.x=this._appendStructure($r0,this._apply("functioned"),637);$r0.value=["IdxConsBy",$vars.x];return this._endStructure($r0);},
"App":function(){var $elf=this,$vars={},$r0=this._startStructure(639);$vars.rule=this._getStructureValue(this.anything());$vars.args=this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._apply("trans"),645);}),643);$r0.value=["App",$vars.rule].concat($vars.args);return this._endStructure($r0);},
"JumpTable":function(){var $elf=this,$vars={},$r0=this._startStructure(647);$vars.ces=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(652);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(656);$vars.c=this._getStructureValue(this.anything());$r2.value=($vars.e=this._appendStructure($r2,this._apply("somethingThatReturns"),661));return this._endStructure($r2);}),654);$r1.value=[$vars.c,$vars.e];return this._endStructure($r1);}),650);$r0.value=["JumpTable"].concat($vars.ces);return this._endStructure($r0);},
"Interleave":function(){var $elf=this,$vars={},$r0=this._startStructure(663);$vars.xs=this._appendStructure($r0,this._many(function(){var $r1=this._startStructure(668);this._appendStructure($r1,this._form(function(){var $r2=this._startStructure(672);$vars.m=this._getStructureValue(this.anything());$r2.value=($vars.p=this._appendStructure($r2,this._apply("functioned"),677));return this._endStructure($r2);}),670);$r1.value=[$vars.m,$vars.p];return this._endStructure($r1);}),666);$r0.value=["Interleave"].concat($vars.xs);return this._endStructure($r0);},
"Pred":function(){var $elf=this,$vars={},$r0=this._startStructure(679);$vars.expr=this._getStructureValue(this.anything());$r0.value=["Pred",$vars.expr];return this._endStructure($r0);},
"Set":function(){var $elf=this,$vars={},$r0=this._startStructure(682);$vars.n=this._getStructureValue(this.anything());$vars.v=this._appendStructure($r0,this._apply("storeSomething"),686);$r0.value=["Set",$vars.n,$vars.v];return this._endStructure($r0);},
"Js":function(){var $elf=this,$vars={},$r0=this._startStructure(688);$vars.locals=this._getStructureValue(this.anything());$vars.code=this._getStructureValue(this.anything());$r0.value=["Js",$vars.locals,$vars.code];return this._endStructure($r0);},
"Location":function(){var $elf=this,$vars={},$r0=this._startStructure(692);$r0.value=["Location"];return this._endStructure($r0);},
"PopArg":function(){var $elf=this,$vars={},$r0=this._startStructure(694);$r0.value=["PopArg"];return this._endStructure($r0);},
"Rule":function(){var $elf=this,$vars={},$r0=this._startStructure(696);$vars.name=this._getStructureValue(this.anything());$vars.body=this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(702);$vars.b=this._appendStructure($r1,this._apply("somethingThatCanPass"),705);$r1.value=[null,"ReturnStructure",[$vars.b[(0)],"Store",$vars.b]];return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("somethingThatReturns"),707);}),700);$r0.value=["Rule",$vars.name,$vars.body];return this._endStructure($r0);}});(BSFunctionOptimization["initialize"]=(function (){(this["_locations"]=[]);}));(BSFunctionOptimization["location"]=(function (){return this["_locations"][(this["_locations"]["length"] - (1))];}));let BSOMetaOptimizer=objectThatDelegatesTo(OMeta,{
"optimizeGrammar":function(){var $elf=this,$vars={},$r0=this._startStructure(709);this._appendStructure($r0,this._form(function(){var $r1=this._startStructure(713);this._appendStructure($r1,this.exactly("Grammar"),715);$vars.sn=this._getStructureValue(this.anything());$r1.value=($vars.rs=this._appendStructure($r1,this._many(function(){return this._forwardStructure(this._apply("optimizeRule"),722);}),720));return this._endStructure($r1);}),711);$r0.value=["Grammar",$vars.sn].concat($vars.rs);return this._endStructure($r0);},
"optimizeRule":function(){var $elf=this,$vars={},$r0=this._startStructure(724);$vars.r=this._getStructureValue(this.anything());this._appendStructure($r0,this._or(function(){var $r1=this._startStructure(728);$r1.value=($vars.r=this._appendStructure($r1,this._applyWithArgs("foreign",BSSeqInliner,"optimize",$vars.r),731));return this._endStructure($r1);},function(){return this._forwardStructure(this._apply("empty"),733);}),727);this._appendStructure($r0,this._many(function(){return this._forwardStructure(this._or(function(){var $r2=this._startStructure(738);$r2.value=($vars.r=this._appendStructure($r2,this._applyWithArgs("foreign",BSAssociativeOptimization,"optimize",$vars.r),741));return this._endStructure($r2);},function(){var $r2=this._startStructure(738);$r2.value=($vars.r=this._appendStructure($r2,this._applyWithArgs("foreign",BSJumpTableOptimization,"optimize",$vars.r),745));return this._endStructure($r2);}),737);}),735);$vars.r=this._appendStructure($r0,this._applyWithArgs("foreign",BSFunctionOptimization,"optimize",$vars.r),748);$r0.value=$vars.r;return this._endStructure($r0);}})

